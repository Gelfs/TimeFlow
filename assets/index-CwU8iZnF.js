(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function Zw(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var yy={exports:{}},Fu={},vy={exports:{}},ue={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Sa=Symbol.for("react.element"),ex=Symbol.for("react.portal"),tx=Symbol.for("react.fragment"),nx=Symbol.for("react.strict_mode"),rx=Symbol.for("react.profiler"),sx=Symbol.for("react.provider"),ix=Symbol.for("react.context"),ox=Symbol.for("react.forward_ref"),ax=Symbol.for("react.suspense"),lx=Symbol.for("react.memo"),ux=Symbol.for("react.lazy"),Wp=Symbol.iterator;function cx(t){return t===null||typeof t!="object"?null:(t=Wp&&t[Wp]||t["@@iterator"],typeof t=="function"?t:null)}var _y={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},wy=Object.assign,xy={};function Zi(t,e,n){this.props=t,this.context=e,this.refs=xy,this.updater=n||_y}Zi.prototype.isReactComponent={};Zi.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Zi.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Ey(){}Ey.prototype=Zi.prototype;function Ph(t,e,n){this.props=t,this.context=e,this.refs=xy,this.updater=n||_y}var bh=Ph.prototype=new Ey;bh.constructor=Ph;wy(bh,Zi.prototype);bh.isPureReactComponent=!0;var Kp=Array.isArray,Ty=Object.prototype.hasOwnProperty,Rh={current:null},Iy={key:!0,ref:!0,__self:!0,__source:!0};function Sy(t,e,n){var r,s={},i=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)Ty.call(e,r)&&!Iy.hasOwnProperty(r)&&(s[r]=e[r]);var l=arguments.length-2;if(l===1)s.children=n;else if(1<l){for(var c=Array(l),h=0;h<l;h++)c[h]=arguments[h+2];s.children=c}if(t&&t.defaultProps)for(r in l=t.defaultProps,l)s[r]===void 0&&(s[r]=l[r]);return{$$typeof:Sa,type:t,key:i,ref:o,props:s,_owner:Rh.current}}function dx(t,e){return{$$typeof:Sa,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Dh(t){return typeof t=="object"&&t!==null&&t.$$typeof===Sa}function hx(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Gp=/\/+/g;function Cc(t,e){return typeof t=="object"&&t!==null&&t.key!=null?hx(""+t.key):e.toString(36)}function Pl(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Sa:case ex:o=!0}}if(o)return o=t,s=s(o),t=r===""?"."+Cc(o,0):r,Kp(s)?(n="",t!=null&&(n=t.replace(Gp,"$&/")+"/"),Pl(s,e,n,"",function(h){return h})):s!=null&&(Dh(s)&&(s=dx(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(Gp,"$&/")+"/")+t)),e.push(s)),1;if(o=0,r=r===""?".":r+":",Kp(t))for(var l=0;l<t.length;l++){i=t[l];var c=r+Cc(i,l);o+=Pl(i,e,n,c,s)}else if(c=cx(t),typeof c=="function")for(t=c.call(t),l=0;!(i=t.next()).done;)i=i.value,c=r+Cc(i,l++),o+=Pl(i,e,n,c,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function ll(t,e,n){if(t==null)return t;var r=[],s=0;return Pl(t,r,"","",function(i){return e.call(n,i,s++)}),r}function fx(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Kt={current:null},bl={transition:null},px={ReactCurrentDispatcher:Kt,ReactCurrentBatchConfig:bl,ReactCurrentOwner:Rh};function Ny(){throw Error("act(...) is not supported in production builds of React.")}ue.Children={map:ll,forEach:function(t,e,n){ll(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return ll(t,function(){e++}),e},toArray:function(t){return ll(t,function(e){return e})||[]},only:function(t){if(!Dh(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};ue.Component=Zi;ue.Fragment=tx;ue.Profiler=rx;ue.PureComponent=Ph;ue.StrictMode=nx;ue.Suspense=ax;ue.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=px;ue.act=Ny;ue.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=wy({},t.props),s=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=Rh.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(c in e)Ty.call(e,c)&&!Iy.hasOwnProperty(c)&&(r[c]=e[c]===void 0&&l!==void 0?l[c]:e[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){l=Array(c);for(var h=0;h<c;h++)l[h]=arguments[h+2];r.children=l}return{$$typeof:Sa,type:t.type,key:s,ref:i,props:r,_owner:o}};ue.createContext=function(t){return t={$$typeof:ix,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:sx,_context:t},t.Consumer=t};ue.createElement=Sy;ue.createFactory=function(t){var e=Sy.bind(null,t);return e.type=t,e};ue.createRef=function(){return{current:null}};ue.forwardRef=function(t){return{$$typeof:ox,render:t}};ue.isValidElement=Dh;ue.lazy=function(t){return{$$typeof:ux,_payload:{_status:-1,_result:t},_init:fx}};ue.memo=function(t,e){return{$$typeof:lx,type:t,compare:e===void 0?null:e}};ue.startTransition=function(t){var e=bl.transition;bl.transition={};try{t()}finally{bl.transition=e}};ue.unstable_act=Ny;ue.useCallback=function(t,e){return Kt.current.useCallback(t,e)};ue.useContext=function(t){return Kt.current.useContext(t)};ue.useDebugValue=function(){};ue.useDeferredValue=function(t){return Kt.current.useDeferredValue(t)};ue.useEffect=function(t,e){return Kt.current.useEffect(t,e)};ue.useId=function(){return Kt.current.useId()};ue.useImperativeHandle=function(t,e,n){return Kt.current.useImperativeHandle(t,e,n)};ue.useInsertionEffect=function(t,e){return Kt.current.useInsertionEffect(t,e)};ue.useLayoutEffect=function(t,e){return Kt.current.useLayoutEffect(t,e)};ue.useMemo=function(t,e){return Kt.current.useMemo(t,e)};ue.useReducer=function(t,e,n){return Kt.current.useReducer(t,e,n)};ue.useRef=function(t){return Kt.current.useRef(t)};ue.useState=function(t){return Kt.current.useState(t)};ue.useSyncExternalStore=function(t,e,n){return Kt.current.useSyncExternalStore(t,e,n)};ue.useTransition=function(){return Kt.current.useTransition()};ue.version="18.3.1";vy.exports=ue;var L=vy.exports;const mx=Zw(L);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var gx=L,yx=Symbol.for("react.element"),vx=Symbol.for("react.fragment"),_x=Object.prototype.hasOwnProperty,wx=gx.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,xx={key:!0,ref:!0,__self:!0,__source:!0};function ky(t,e,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)_x.call(e,r)&&!xx.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:yx,type:t,key:i,ref:o,props:s,_owner:wx.current}}Fu.Fragment=vx;Fu.jsx=ky;Fu.jsxs=ky;yy.exports=Fu;var u=yy.exports,hd={},Ay={exports:{}},yn={},Cy={exports:{}},Py={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(q,X){var Z=q.length;q.push(X);e:for(;0<Z;){var we=Z-1>>>1,me=q[we];if(0<s(me,X))q[we]=X,q[Z]=me,Z=we;else break e}}function n(q){return q.length===0?null:q[0]}function r(q){if(q.length===0)return null;var X=q[0],Z=q.pop();if(Z!==X){q[0]=Z;e:for(var we=0,me=q.length,Se=me>>>1;we<Se;){var Ye=2*(we+1)-1,yt=q[Ye],At=Ye+1,Xe=q[At];if(0>s(yt,Z))At<me&&0>s(Xe,yt)?(q[we]=Xe,q[At]=Z,we=At):(q[we]=yt,q[Ye]=Z,we=Ye);else if(At<me&&0>s(Xe,Z))q[we]=Xe,q[At]=Z,we=At;else break e}}return X}function s(q,X){var Z=q.sortIndex-X.sortIndex;return Z!==0?Z:q.id-X.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var c=[],h=[],p=1,m=null,g=3,k=!1,b=!1,P=!1,j=typeof setTimeout=="function"?setTimeout:null,S=typeof clearTimeout=="function"?clearTimeout:null,_=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function N(q){for(var X=n(h);X!==null;){if(X.callback===null)r(h);else if(X.startTime<=q)r(h),X.sortIndex=X.expirationTime,e(c,X);else break;X=n(h)}}function D(q){if(P=!1,N(q),!b)if(n(c)!==null)b=!0,on($);else{var X=n(h);X!==null&&Bt(D,X.startTime-q)}}function $(q,X){b=!1,P&&(P=!1,S(v),v=-1),k=!0;var Z=g;try{for(N(X),m=n(c);m!==null&&(!(m.expirationTime>X)||q&&!A());){var we=m.callback;if(typeof we=="function"){m.callback=null,g=m.priorityLevel;var me=we(m.expirationTime<=X);X=t.unstable_now(),typeof me=="function"?m.callback=me:m===n(c)&&r(c),N(X)}else r(c);m=n(c)}if(m!==null)var Se=!0;else{var Ye=n(h);Ye!==null&&Bt(D,Ye.startTime-X),Se=!1}return Se}finally{m=null,g=Z,k=!1}}var F=!1,w=null,v=-1,x=5,T=-1;function A(){return!(t.unstable_now()-T<x)}function C(){if(w!==null){var q=t.unstable_now();T=q;var X=!0;try{X=w(!0,q)}finally{X?I():(F=!1,w=null)}}else F=!1}var I;if(typeof _=="function")I=function(){_(C)};else if(typeof MessageChannel<"u"){var Qe=new MessageChannel,sn=Qe.port2;Qe.port1.onmessage=C,I=function(){sn.postMessage(null)}}else I=function(){j(C,0)};function on(q){w=q,F||(F=!0,I())}function Bt(q,X){v=j(function(){q(t.unstable_now())},X)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(q){q.callback=null},t.unstable_continueExecution=function(){b||k||(b=!0,on($))},t.unstable_forceFrameRate=function(q){0>q||125<q?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):x=0<q?Math.floor(1e3/q):5},t.unstable_getCurrentPriorityLevel=function(){return g},t.unstable_getFirstCallbackNode=function(){return n(c)},t.unstable_next=function(q){switch(g){case 1:case 2:case 3:var X=3;break;default:X=g}var Z=g;g=X;try{return q()}finally{g=Z}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(q,X){switch(q){case 1:case 2:case 3:case 4:case 5:break;default:q=3}var Z=g;g=q;try{return X()}finally{g=Z}},t.unstable_scheduleCallback=function(q,X,Z){var we=t.unstable_now();switch(typeof Z=="object"&&Z!==null?(Z=Z.delay,Z=typeof Z=="number"&&0<Z?we+Z:we):Z=we,q){case 1:var me=-1;break;case 2:me=250;break;case 5:me=1073741823;break;case 4:me=1e4;break;default:me=5e3}return me=Z+me,q={id:p++,callback:X,priorityLevel:q,startTime:Z,expirationTime:me,sortIndex:-1},Z>we?(q.sortIndex=Z,e(h,q),n(c)===null&&q===n(h)&&(P?(S(v),v=-1):P=!0,Bt(D,Z-we))):(q.sortIndex=me,e(c,q),b||k||(b=!0,on($))),q},t.unstable_shouldYield=A,t.unstable_wrapCallback=function(q){var X=g;return function(){var Z=g;g=X;try{return q.apply(this,arguments)}finally{g=Z}}}})(Py);Cy.exports=Py;var Ex=Cy.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Tx=L,gn=Ex;function B(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var by=new Set,ea={};function Xs(t,e){Mi(t,e),Mi(t+"Capture",e)}function Mi(t,e){for(ea[t]=e,t=0;t<e.length;t++)by.add(e[t])}var Tr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),fd=Object.prototype.hasOwnProperty,Ix=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Qp={},Yp={};function Sx(t){return fd.call(Yp,t)?!0:fd.call(Qp,t)?!1:Ix.test(t)?Yp[t]=!0:(Qp[t]=!0,!1)}function Nx(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function kx(t,e,n,r){if(e===null||typeof e>"u"||Nx(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Gt(t,e,n,r,s,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var St={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){St[t]=new Gt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];St[e]=new Gt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){St[t]=new Gt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){St[t]=new Gt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){St[t]=new Gt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){St[t]=new Gt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){St[t]=new Gt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){St[t]=new Gt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){St[t]=new Gt(t,5,!1,t.toLowerCase(),null,!1,!1)});var jh=/[\-:]([a-z])/g;function Vh(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(jh,Vh);St[e]=new Gt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(jh,Vh);St[e]=new Gt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(jh,Vh);St[e]=new Gt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){St[t]=new Gt(t,1,!1,t.toLowerCase(),null,!1,!1)});St.xlinkHref=new Gt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){St[t]=new Gt(t,1,!1,t.toLowerCase(),null,!0,!0)});function Lh(t,e,n,r){var s=St.hasOwnProperty(e)?St[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(kx(e,n,s,r)&&(n=null),r||s===null?Sx(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var jr=Tx.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,ul=Symbol.for("react.element"),pi=Symbol.for("react.portal"),mi=Symbol.for("react.fragment"),Oh=Symbol.for("react.strict_mode"),pd=Symbol.for("react.profiler"),Ry=Symbol.for("react.provider"),Dy=Symbol.for("react.context"),Mh=Symbol.for("react.forward_ref"),md=Symbol.for("react.suspense"),gd=Symbol.for("react.suspense_list"),Fh=Symbol.for("react.memo"),Hr=Symbol.for("react.lazy"),jy=Symbol.for("react.offscreen"),Xp=Symbol.iterator;function To(t){return t===null||typeof t!="object"?null:(t=Xp&&t[Xp]||t["@@iterator"],typeof t=="function"?t:null)}var Ue=Object.assign,Pc;function Ro(t){if(Pc===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Pc=e&&e[1]||""}return`
`+Pc+t}var bc=!1;function Rc(t,e){if(!t||bc)return"";bc=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(h){var r=h}Reflect.construct(t,[],e)}else{try{e.call()}catch(h){r=h}t.call(e.prototype)}else{try{throw Error()}catch(h){r=h}t()}}catch(h){if(h&&r&&typeof h.stack=="string"){for(var s=h.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,l=i.length-1;1<=o&&0<=l&&s[o]!==i[l];)l--;for(;1<=o&&0<=l;o--,l--)if(s[o]!==i[l]){if(o!==1||l!==1)do if(o--,l--,0>l||s[o]!==i[l]){var c=`
`+s[o].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=o&&0<=l);break}}}finally{bc=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Ro(t):""}function Ax(t){switch(t.tag){case 5:return Ro(t.type);case 16:return Ro("Lazy");case 13:return Ro("Suspense");case 19:return Ro("SuspenseList");case 0:case 2:case 15:return t=Rc(t.type,!1),t;case 11:return t=Rc(t.type.render,!1),t;case 1:return t=Rc(t.type,!0),t;default:return""}}function yd(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case mi:return"Fragment";case pi:return"Portal";case pd:return"Profiler";case Oh:return"StrictMode";case md:return"Suspense";case gd:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Dy:return(t.displayName||"Context")+".Consumer";case Ry:return(t._context.displayName||"Context")+".Provider";case Mh:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Fh:return e=t.displayName||null,e!==null?e:yd(t.type)||"Memo";case Hr:e=t._payload,t=t._init;try{return yd(t(e))}catch{}}return null}function Cx(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return yd(e);case 8:return e===Oh?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function ys(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Vy(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function Px(t){var e=Vy(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function cl(t){t._valueTracker||(t._valueTracker=Px(t))}function Ly(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=Vy(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Xl(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function vd(t,e){var n=e.checked;return Ue({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Jp(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=ys(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Oy(t,e){e=e.checked,e!=null&&Lh(t,"checked",e,!1)}function _d(t,e){Oy(t,e);var n=ys(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?wd(t,e.type,n):e.hasOwnProperty("defaultValue")&&wd(t,e.type,ys(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Zp(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function wd(t,e,n){(e!=="number"||Xl(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Do=Array.isArray;function Ai(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+ys(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function xd(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(B(91));return Ue({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function em(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(B(92));if(Do(n)){if(1<n.length)throw Error(B(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:ys(n)}}function My(t,e){var n=ys(e.value),r=ys(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function tm(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function Fy(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Ed(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?Fy(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var dl,Uy=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(dl=dl||document.createElement("div"),dl.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=dl.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function ta(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Uo={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},bx=["Webkit","ms","Moz","O"];Object.keys(Uo).forEach(function(t){bx.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Uo[e]=Uo[t]})});function $y(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Uo.hasOwnProperty(t)&&Uo[t]?(""+e).trim():e+"px"}function By(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=$y(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var Rx=Ue({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Td(t,e){if(e){if(Rx[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(B(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(B(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(B(61))}if(e.style!=null&&typeof e.style!="object")throw Error(B(62))}}function Id(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Sd=null;function Uh(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Nd=null,Ci=null,Pi=null;function nm(t){if(t=Aa(t)){if(typeof Nd!="function")throw Error(B(280));var e=t.stateNode;e&&(e=qu(e),Nd(t.stateNode,t.type,e))}}function zy(t){Ci?Pi?Pi.push(t):Pi=[t]:Ci=t}function qy(){if(Ci){var t=Ci,e=Pi;if(Pi=Ci=null,nm(t),e)for(t=0;t<e.length;t++)nm(e[t])}}function Hy(t,e){return t(e)}function Wy(){}var Dc=!1;function Ky(t,e,n){if(Dc)return t(e,n);Dc=!0;try{return Hy(t,e,n)}finally{Dc=!1,(Ci!==null||Pi!==null)&&(Wy(),qy())}}function na(t,e){var n=t.stateNode;if(n===null)return null;var r=qu(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(B(231,e,typeof n));return n}var kd=!1;if(Tr)try{var Io={};Object.defineProperty(Io,"passive",{get:function(){kd=!0}}),window.addEventListener("test",Io,Io),window.removeEventListener("test",Io,Io)}catch{kd=!1}function Dx(t,e,n,r,s,i,o,l,c){var h=Array.prototype.slice.call(arguments,3);try{e.apply(n,h)}catch(p){this.onError(p)}}var $o=!1,Jl=null,Zl=!1,Ad=null,jx={onError:function(t){$o=!0,Jl=t}};function Vx(t,e,n,r,s,i,o,l,c){$o=!1,Jl=null,Dx.apply(jx,arguments)}function Lx(t,e,n,r,s,i,o,l,c){if(Vx.apply(this,arguments),$o){if($o){var h=Jl;$o=!1,Jl=null}else throw Error(B(198));Zl||(Zl=!0,Ad=h)}}function Js(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function Gy(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function rm(t){if(Js(t)!==t)throw Error(B(188))}function Ox(t){var e=t.alternate;if(!e){if(e=Js(t),e===null)throw Error(B(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return rm(s),t;if(i===r)return rm(s),e;i=i.sibling}throw Error(B(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,l=s.child;l;){if(l===n){o=!0,n=s,r=i;break}if(l===r){o=!0,r=s,n=i;break}l=l.sibling}if(!o){for(l=i.child;l;){if(l===n){o=!0,n=i,r=s;break}if(l===r){o=!0,r=i,n=s;break}l=l.sibling}if(!o)throw Error(B(189))}}if(n.alternate!==r)throw Error(B(190))}if(n.tag!==3)throw Error(B(188));return n.stateNode.current===n?t:e}function Qy(t){return t=Ox(t),t!==null?Yy(t):null}function Yy(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=Yy(t);if(e!==null)return e;t=t.sibling}return null}var Xy=gn.unstable_scheduleCallback,sm=gn.unstable_cancelCallback,Mx=gn.unstable_shouldYield,Fx=gn.unstable_requestPaint,Ge=gn.unstable_now,Ux=gn.unstable_getCurrentPriorityLevel,$h=gn.unstable_ImmediatePriority,Jy=gn.unstable_UserBlockingPriority,eu=gn.unstable_NormalPriority,$x=gn.unstable_LowPriority,Zy=gn.unstable_IdlePriority,Uu=null,Jn=null;function Bx(t){if(Jn&&typeof Jn.onCommitFiberRoot=="function")try{Jn.onCommitFiberRoot(Uu,t,void 0,(t.current.flags&128)===128)}catch{}}var Mn=Math.clz32?Math.clz32:Hx,zx=Math.log,qx=Math.LN2;function Hx(t){return t>>>=0,t===0?32:31-(zx(t)/qx|0)|0}var hl=64,fl=4194304;function jo(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function tu(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,o=n&268435455;if(o!==0){var l=o&~s;l!==0?r=jo(l):(i&=o,i!==0&&(r=jo(i)))}else o=n&~s,o!==0?r=jo(o):i!==0&&(r=jo(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Mn(e),s=1<<n,r|=t[n],e&=~s;return r}function Wx(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Kx(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-Mn(i),l=1<<o,c=s[o];c===-1?(!(l&n)||l&r)&&(s[o]=Wx(l,e)):c<=e&&(t.expiredLanes|=l),i&=~l}}function Cd(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function e0(){var t=hl;return hl<<=1,!(hl&4194240)&&(hl=64),t}function jc(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Na(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Mn(e),t[e]=n}function Gx(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-Mn(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function Bh(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Mn(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var Te=0;function t0(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var n0,zh,r0,s0,i0,Pd=!1,pl=[],is=null,os=null,as=null,ra=new Map,sa=new Map,Kr=[],Qx="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function im(t,e){switch(t){case"focusin":case"focusout":is=null;break;case"dragenter":case"dragleave":os=null;break;case"mouseover":case"mouseout":as=null;break;case"pointerover":case"pointerout":ra.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":sa.delete(e.pointerId)}}function So(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=Aa(e),e!==null&&zh(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function Yx(t,e,n,r,s){switch(e){case"focusin":return is=So(is,t,e,n,r,s),!0;case"dragenter":return os=So(os,t,e,n,r,s),!0;case"mouseover":return as=So(as,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return ra.set(i,So(ra.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,sa.set(i,So(sa.get(i)||null,t,e,n,r,s)),!0}return!1}function o0(t){var e=js(t.target);if(e!==null){var n=Js(e);if(n!==null){if(e=n.tag,e===13){if(e=Gy(n),e!==null){t.blockedOn=e,i0(t.priority,function(){r0(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Rl(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=bd(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Sd=r,n.target.dispatchEvent(r),Sd=null}else return e=Aa(n),e!==null&&zh(e),t.blockedOn=n,!1;e.shift()}return!0}function om(t,e,n){Rl(t)&&n.delete(e)}function Xx(){Pd=!1,is!==null&&Rl(is)&&(is=null),os!==null&&Rl(os)&&(os=null),as!==null&&Rl(as)&&(as=null),ra.forEach(om),sa.forEach(om)}function No(t,e){t.blockedOn===e&&(t.blockedOn=null,Pd||(Pd=!0,gn.unstable_scheduleCallback(gn.unstable_NormalPriority,Xx)))}function ia(t){function e(s){return No(s,t)}if(0<pl.length){No(pl[0],t);for(var n=1;n<pl.length;n++){var r=pl[n];r.blockedOn===t&&(r.blockedOn=null)}}for(is!==null&&No(is,t),os!==null&&No(os,t),as!==null&&No(as,t),ra.forEach(e),sa.forEach(e),n=0;n<Kr.length;n++)r=Kr[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Kr.length&&(n=Kr[0],n.blockedOn===null);)o0(n),n.blockedOn===null&&Kr.shift()}var bi=jr.ReactCurrentBatchConfig,nu=!0;function Jx(t,e,n,r){var s=Te,i=bi.transition;bi.transition=null;try{Te=1,qh(t,e,n,r)}finally{Te=s,bi.transition=i}}function Zx(t,e,n,r){var s=Te,i=bi.transition;bi.transition=null;try{Te=4,qh(t,e,n,r)}finally{Te=s,bi.transition=i}}function qh(t,e,n,r){if(nu){var s=bd(t,e,n,r);if(s===null)qc(t,e,r,ru,n),im(t,r);else if(Yx(s,t,e,n,r))r.stopPropagation();else if(im(t,r),e&4&&-1<Qx.indexOf(t)){for(;s!==null;){var i=Aa(s);if(i!==null&&n0(i),i=bd(t,e,n,r),i===null&&qc(t,e,r,ru,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else qc(t,e,r,null,n)}}var ru=null;function bd(t,e,n,r){if(ru=null,t=Uh(r),t=js(t),t!==null)if(e=Js(t),e===null)t=null;else if(n=e.tag,n===13){if(t=Gy(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return ru=t,null}function a0(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Ux()){case $h:return 1;case Jy:return 4;case eu:case $x:return 16;case Zy:return 536870912;default:return 16}default:return 16}}var es=null,Hh=null,Dl=null;function l0(){if(Dl)return Dl;var t,e=Hh,n=e.length,r,s="value"in es?es.value:es.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===s[i-r];r++);return Dl=s.slice(t,1<r?1-r:void 0)}function jl(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function ml(){return!0}function am(){return!1}function vn(t){function e(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(n=t[l],this[l]=n?n(i):i[l]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?ml:am,this.isPropagationStopped=am,this}return Ue(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=ml)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=ml)},persist:function(){},isPersistent:ml}),e}var eo={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Wh=vn(eo),ka=Ue({},eo,{view:0,detail:0}),eE=vn(ka),Vc,Lc,ko,$u=Ue({},ka,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Kh,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==ko&&(ko&&t.type==="mousemove"?(Vc=t.screenX-ko.screenX,Lc=t.screenY-ko.screenY):Lc=Vc=0,ko=t),Vc)},movementY:function(t){return"movementY"in t?t.movementY:Lc}}),lm=vn($u),tE=Ue({},$u,{dataTransfer:0}),nE=vn(tE),rE=Ue({},ka,{relatedTarget:0}),Oc=vn(rE),sE=Ue({},eo,{animationName:0,elapsedTime:0,pseudoElement:0}),iE=vn(sE),oE=Ue({},eo,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),aE=vn(oE),lE=Ue({},eo,{data:0}),um=vn(lE),uE={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},cE={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},dE={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function hE(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=dE[t])?!!e[t]:!1}function Kh(){return hE}var fE=Ue({},ka,{key:function(t){if(t.key){var e=uE[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=jl(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?cE[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Kh,charCode:function(t){return t.type==="keypress"?jl(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?jl(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),pE=vn(fE),mE=Ue({},$u,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),cm=vn(mE),gE=Ue({},ka,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Kh}),yE=vn(gE),vE=Ue({},eo,{propertyName:0,elapsedTime:0,pseudoElement:0}),_E=vn(vE),wE=Ue({},$u,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),xE=vn(wE),EE=[9,13,27,32],Gh=Tr&&"CompositionEvent"in window,Bo=null;Tr&&"documentMode"in document&&(Bo=document.documentMode);var TE=Tr&&"TextEvent"in window&&!Bo,u0=Tr&&(!Gh||Bo&&8<Bo&&11>=Bo),dm=" ",hm=!1;function c0(t,e){switch(t){case"keyup":return EE.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function d0(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var gi=!1;function IE(t,e){switch(t){case"compositionend":return d0(e);case"keypress":return e.which!==32?null:(hm=!0,dm);case"textInput":return t=e.data,t===dm&&hm?null:t;default:return null}}function SE(t,e){if(gi)return t==="compositionend"||!Gh&&c0(t,e)?(t=l0(),Dl=Hh=es=null,gi=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return u0&&e.locale!=="ko"?null:e.data;default:return null}}var NE={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function fm(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!NE[t.type]:e==="textarea"}function h0(t,e,n,r){zy(r),e=su(e,"onChange"),0<e.length&&(n=new Wh("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var zo=null,oa=null;function kE(t){T0(t,0)}function Bu(t){var e=_i(t);if(Ly(e))return t}function AE(t,e){if(t==="change")return e}var f0=!1;if(Tr){var Mc;if(Tr){var Fc="oninput"in document;if(!Fc){var pm=document.createElement("div");pm.setAttribute("oninput","return;"),Fc=typeof pm.oninput=="function"}Mc=Fc}else Mc=!1;f0=Mc&&(!document.documentMode||9<document.documentMode)}function mm(){zo&&(zo.detachEvent("onpropertychange",p0),oa=zo=null)}function p0(t){if(t.propertyName==="value"&&Bu(oa)){var e=[];h0(e,oa,t,Uh(t)),Ky(kE,e)}}function CE(t,e,n){t==="focusin"?(mm(),zo=e,oa=n,zo.attachEvent("onpropertychange",p0)):t==="focusout"&&mm()}function PE(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Bu(oa)}function bE(t,e){if(t==="click")return Bu(e)}function RE(t,e){if(t==="input"||t==="change")return Bu(e)}function DE(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Un=typeof Object.is=="function"?Object.is:DE;function aa(t,e){if(Un(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!fd.call(e,s)||!Un(t[s],e[s]))return!1}return!0}function gm(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function ym(t,e){var n=gm(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=gm(n)}}function m0(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?m0(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function g0(){for(var t=window,e=Xl();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Xl(t.document)}return e}function Qh(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function jE(t){var e=g0(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&m0(n.ownerDocument.documentElement,n)){if(r!==null&&Qh(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=ym(n,i);var o=ym(n,r);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var VE=Tr&&"documentMode"in document&&11>=document.documentMode,yi=null,Rd=null,qo=null,Dd=!1;function vm(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Dd||yi==null||yi!==Xl(r)||(r=yi,"selectionStart"in r&&Qh(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),qo&&aa(qo,r)||(qo=r,r=su(Rd,"onSelect"),0<r.length&&(e=new Wh("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=yi)))}function gl(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var vi={animationend:gl("Animation","AnimationEnd"),animationiteration:gl("Animation","AnimationIteration"),animationstart:gl("Animation","AnimationStart"),transitionend:gl("Transition","TransitionEnd")},Uc={},y0={};Tr&&(y0=document.createElement("div").style,"AnimationEvent"in window||(delete vi.animationend.animation,delete vi.animationiteration.animation,delete vi.animationstart.animation),"TransitionEvent"in window||delete vi.transitionend.transition);function zu(t){if(Uc[t])return Uc[t];if(!vi[t])return t;var e=vi[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in y0)return Uc[t]=e[n];return t}var v0=zu("animationend"),_0=zu("animationiteration"),w0=zu("animationstart"),x0=zu("transitionend"),E0=new Map,_m="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Es(t,e){E0.set(t,e),Xs(e,[t])}for(var $c=0;$c<_m.length;$c++){var Bc=_m[$c],LE=Bc.toLowerCase(),OE=Bc[0].toUpperCase()+Bc.slice(1);Es(LE,"on"+OE)}Es(v0,"onAnimationEnd");Es(_0,"onAnimationIteration");Es(w0,"onAnimationStart");Es("dblclick","onDoubleClick");Es("focusin","onFocus");Es("focusout","onBlur");Es(x0,"onTransitionEnd");Mi("onMouseEnter",["mouseout","mouseover"]);Mi("onMouseLeave",["mouseout","mouseover"]);Mi("onPointerEnter",["pointerout","pointerover"]);Mi("onPointerLeave",["pointerout","pointerover"]);Xs("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Xs("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Xs("onBeforeInput",["compositionend","keypress","textInput","paste"]);Xs("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Xs("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Xs("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Vo="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),ME=new Set("cancel close invalid load scroll toggle".split(" ").concat(Vo));function wm(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,Lx(r,e,void 0,t),t.currentTarget=null}function T0(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var o=r.length-1;0<=o;o--){var l=r[o],c=l.instance,h=l.currentTarget;if(l=l.listener,c!==i&&s.isPropagationStopped())break e;wm(s,l,h),i=c}else for(o=0;o<r.length;o++){if(l=r[o],c=l.instance,h=l.currentTarget,l=l.listener,c!==i&&s.isPropagationStopped())break e;wm(s,l,h),i=c}}}if(Zl)throw t=Ad,Zl=!1,Ad=null,t}function Re(t,e){var n=e[Md];n===void 0&&(n=e[Md]=new Set);var r=t+"__bubble";n.has(r)||(I0(e,t,2,!1),n.add(r))}function zc(t,e,n){var r=0;e&&(r|=4),I0(n,t,r,e)}var yl="_reactListening"+Math.random().toString(36).slice(2);function la(t){if(!t[yl]){t[yl]=!0,by.forEach(function(n){n!=="selectionchange"&&(ME.has(n)||zc(n,!1,t),zc(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[yl]||(e[yl]=!0,zc("selectionchange",!1,e))}}function I0(t,e,n,r){switch(a0(e)){case 1:var s=Jx;break;case 4:s=Zx;break;default:s=qh}n=s.bind(null,e,n,t),s=void 0,!kd||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function qc(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var l=r.stateNode.containerInfo;if(l===s||l.nodeType===8&&l.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===s||c.nodeType===8&&c.parentNode===s))return;o=o.return}for(;l!==null;){if(o=js(l),o===null)return;if(c=o.tag,c===5||c===6){r=i=o;continue e}l=l.parentNode}}r=r.return}Ky(function(){var h=i,p=Uh(n),m=[];e:{var g=E0.get(t);if(g!==void 0){var k=Wh,b=t;switch(t){case"keypress":if(jl(n)===0)break e;case"keydown":case"keyup":k=pE;break;case"focusin":b="focus",k=Oc;break;case"focusout":b="blur",k=Oc;break;case"beforeblur":case"afterblur":k=Oc;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":k=lm;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":k=nE;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":k=yE;break;case v0:case _0:case w0:k=iE;break;case x0:k=_E;break;case"scroll":k=eE;break;case"wheel":k=xE;break;case"copy":case"cut":case"paste":k=aE;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":k=cm}var P=(e&4)!==0,j=!P&&t==="scroll",S=P?g!==null?g+"Capture":null:g;P=[];for(var _=h,N;_!==null;){N=_;var D=N.stateNode;if(N.tag===5&&D!==null&&(N=D,S!==null&&(D=na(_,S),D!=null&&P.push(ua(_,D,N)))),j)break;_=_.return}0<P.length&&(g=new k(g,b,null,n,p),m.push({event:g,listeners:P}))}}if(!(e&7)){e:{if(g=t==="mouseover"||t==="pointerover",k=t==="mouseout"||t==="pointerout",g&&n!==Sd&&(b=n.relatedTarget||n.fromElement)&&(js(b)||b[Ir]))break e;if((k||g)&&(g=p.window===p?p:(g=p.ownerDocument)?g.defaultView||g.parentWindow:window,k?(b=n.relatedTarget||n.toElement,k=h,b=b?js(b):null,b!==null&&(j=Js(b),b!==j||b.tag!==5&&b.tag!==6)&&(b=null)):(k=null,b=h),k!==b)){if(P=lm,D="onMouseLeave",S="onMouseEnter",_="mouse",(t==="pointerout"||t==="pointerover")&&(P=cm,D="onPointerLeave",S="onPointerEnter",_="pointer"),j=k==null?g:_i(k),N=b==null?g:_i(b),g=new P(D,_+"leave",k,n,p),g.target=j,g.relatedTarget=N,D=null,js(p)===h&&(P=new P(S,_+"enter",b,n,p),P.target=N,P.relatedTarget=j,D=P),j=D,k&&b)t:{for(P=k,S=b,_=0,N=P;N;N=ci(N))_++;for(N=0,D=S;D;D=ci(D))N++;for(;0<_-N;)P=ci(P),_--;for(;0<N-_;)S=ci(S),N--;for(;_--;){if(P===S||S!==null&&P===S.alternate)break t;P=ci(P),S=ci(S)}P=null}else P=null;k!==null&&xm(m,g,k,P,!1),b!==null&&j!==null&&xm(m,j,b,P,!0)}}e:{if(g=h?_i(h):window,k=g.nodeName&&g.nodeName.toLowerCase(),k==="select"||k==="input"&&g.type==="file")var $=AE;else if(fm(g))if(f0)$=RE;else{$=PE;var F=CE}else(k=g.nodeName)&&k.toLowerCase()==="input"&&(g.type==="checkbox"||g.type==="radio")&&($=bE);if($&&($=$(t,h))){h0(m,$,n,p);break e}F&&F(t,g,h),t==="focusout"&&(F=g._wrapperState)&&F.controlled&&g.type==="number"&&wd(g,"number",g.value)}switch(F=h?_i(h):window,t){case"focusin":(fm(F)||F.contentEditable==="true")&&(yi=F,Rd=h,qo=null);break;case"focusout":qo=Rd=yi=null;break;case"mousedown":Dd=!0;break;case"contextmenu":case"mouseup":case"dragend":Dd=!1,vm(m,n,p);break;case"selectionchange":if(VE)break;case"keydown":case"keyup":vm(m,n,p)}var w;if(Gh)e:{switch(t){case"compositionstart":var v="onCompositionStart";break e;case"compositionend":v="onCompositionEnd";break e;case"compositionupdate":v="onCompositionUpdate";break e}v=void 0}else gi?c0(t,n)&&(v="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(v="onCompositionStart");v&&(u0&&n.locale!=="ko"&&(gi||v!=="onCompositionStart"?v==="onCompositionEnd"&&gi&&(w=l0()):(es=p,Hh="value"in es?es.value:es.textContent,gi=!0)),F=su(h,v),0<F.length&&(v=new um(v,t,null,n,p),m.push({event:v,listeners:F}),w?v.data=w:(w=d0(n),w!==null&&(v.data=w)))),(w=TE?IE(t,n):SE(t,n))&&(h=su(h,"onBeforeInput"),0<h.length&&(p=new um("onBeforeInput","beforeinput",null,n,p),m.push({event:p,listeners:h}),p.data=w))}T0(m,e)})}function ua(t,e,n){return{instance:t,listener:e,currentTarget:n}}function su(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=na(t,n),i!=null&&r.unshift(ua(t,i,s)),i=na(t,e),i!=null&&r.push(ua(t,i,s))),t=t.return}return r}function ci(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function xm(t,e,n,r,s){for(var i=e._reactName,o=[];n!==null&&n!==r;){var l=n,c=l.alternate,h=l.stateNode;if(c!==null&&c===r)break;l.tag===5&&h!==null&&(l=h,s?(c=na(n,i),c!=null&&o.unshift(ua(n,c,l))):s||(c=na(n,i),c!=null&&o.push(ua(n,c,l)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var FE=/\r\n?/g,UE=/\u0000|\uFFFD/g;function Em(t){return(typeof t=="string"?t:""+t).replace(FE,`
`).replace(UE,"")}function vl(t,e,n){if(e=Em(e),Em(t)!==e&&n)throw Error(B(425))}function iu(){}var jd=null,Vd=null;function Ld(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Od=typeof setTimeout=="function"?setTimeout:void 0,$E=typeof clearTimeout=="function"?clearTimeout:void 0,Tm=typeof Promise=="function"?Promise:void 0,BE=typeof queueMicrotask=="function"?queueMicrotask:typeof Tm<"u"?function(t){return Tm.resolve(null).then(t).catch(zE)}:Od;function zE(t){setTimeout(function(){throw t})}function Hc(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),ia(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);ia(e)}function ls(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Im(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var to=Math.random().toString(36).slice(2),Yn="__reactFiber$"+to,ca="__reactProps$"+to,Ir="__reactContainer$"+to,Md="__reactEvents$"+to,qE="__reactListeners$"+to,HE="__reactHandles$"+to;function js(t){var e=t[Yn];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Ir]||n[Yn]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Im(t);t!==null;){if(n=t[Yn])return n;t=Im(t)}return e}t=n,n=t.parentNode}return null}function Aa(t){return t=t[Yn]||t[Ir],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function _i(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(B(33))}function qu(t){return t[ca]||null}var Fd=[],wi=-1;function Ts(t){return{current:t}}function je(t){0>wi||(t.current=Fd[wi],Fd[wi]=null,wi--)}function Ce(t,e){wi++,Fd[wi]=t.current,t.current=e}var vs={},Ut=Ts(vs),en=Ts(!1),$s=vs;function Fi(t,e){var n=t.type.contextTypes;if(!n)return vs;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function tn(t){return t=t.childContextTypes,t!=null}function ou(){je(en),je(Ut)}function Sm(t,e,n){if(Ut.current!==vs)throw Error(B(168));Ce(Ut,e),Ce(en,n)}function S0(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(B(108,Cx(t)||"Unknown",s));return Ue({},n,r)}function au(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||vs,$s=Ut.current,Ce(Ut,t),Ce(en,en.current),!0}function Nm(t,e,n){var r=t.stateNode;if(!r)throw Error(B(169));n?(t=S0(t,e,$s),r.__reactInternalMemoizedMergedChildContext=t,je(en),je(Ut),Ce(Ut,t)):je(en),Ce(en,n)}var dr=null,Hu=!1,Wc=!1;function N0(t){dr===null?dr=[t]:dr.push(t)}function WE(t){Hu=!0,N0(t)}function Is(){if(!Wc&&dr!==null){Wc=!0;var t=0,e=Te;try{var n=dr;for(Te=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}dr=null,Hu=!1}catch(s){throw dr!==null&&(dr=dr.slice(t+1)),Xy($h,Is),s}finally{Te=e,Wc=!1}}return null}var xi=[],Ei=0,lu=null,uu=0,Sn=[],Nn=0,Bs=null,hr=1,fr="";function bs(t,e){xi[Ei++]=uu,xi[Ei++]=lu,lu=t,uu=e}function k0(t,e,n){Sn[Nn++]=hr,Sn[Nn++]=fr,Sn[Nn++]=Bs,Bs=t;var r=hr;t=fr;var s=32-Mn(r)-1;r&=~(1<<s),n+=1;var i=32-Mn(e)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,hr=1<<32-Mn(e)+s|n<<s|r,fr=i+t}else hr=1<<i|n<<s|r,fr=t}function Yh(t){t.return!==null&&(bs(t,1),k0(t,1,0))}function Xh(t){for(;t===lu;)lu=xi[--Ei],xi[Ei]=null,uu=xi[--Ei],xi[Ei]=null;for(;t===Bs;)Bs=Sn[--Nn],Sn[Nn]=null,fr=Sn[--Nn],Sn[Nn]=null,hr=Sn[--Nn],Sn[Nn]=null}var mn=null,fn=null,Ve=!1,On=null;function A0(t,e){var n=An(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function km(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,mn=t,fn=ls(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,mn=t,fn=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Bs!==null?{id:hr,overflow:fr}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=An(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,mn=t,fn=null,!0):!1;default:return!1}}function Ud(t){return(t.mode&1)!==0&&(t.flags&128)===0}function $d(t){if(Ve){var e=fn;if(e){var n=e;if(!km(t,e)){if(Ud(t))throw Error(B(418));e=ls(n.nextSibling);var r=mn;e&&km(t,e)?A0(r,n):(t.flags=t.flags&-4097|2,Ve=!1,mn=t)}}else{if(Ud(t))throw Error(B(418));t.flags=t.flags&-4097|2,Ve=!1,mn=t}}}function Am(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;mn=t}function _l(t){if(t!==mn)return!1;if(!Ve)return Am(t),Ve=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Ld(t.type,t.memoizedProps)),e&&(e=fn)){if(Ud(t))throw C0(),Error(B(418));for(;e;)A0(t,e),e=ls(e.nextSibling)}if(Am(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(B(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){fn=ls(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}fn=null}}else fn=mn?ls(t.stateNode.nextSibling):null;return!0}function C0(){for(var t=fn;t;)t=ls(t.nextSibling)}function Ui(){fn=mn=null,Ve=!1}function Jh(t){On===null?On=[t]:On.push(t)}var KE=jr.ReactCurrentBatchConfig;function Ao(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(B(309));var r=n.stateNode}if(!r)throw Error(B(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var l=s.refs;o===null?delete l[i]:l[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(B(284));if(!n._owner)throw Error(B(290,t))}return t}function wl(t,e){throw t=Object.prototype.toString.call(e),Error(B(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Cm(t){var e=t._init;return e(t._payload)}function P0(t){function e(S,_){if(t){var N=S.deletions;N===null?(S.deletions=[_],S.flags|=16):N.push(_)}}function n(S,_){if(!t)return null;for(;_!==null;)e(S,_),_=_.sibling;return null}function r(S,_){for(S=new Map;_!==null;)_.key!==null?S.set(_.key,_):S.set(_.index,_),_=_.sibling;return S}function s(S,_){return S=hs(S,_),S.index=0,S.sibling=null,S}function i(S,_,N){return S.index=N,t?(N=S.alternate,N!==null?(N=N.index,N<_?(S.flags|=2,_):N):(S.flags|=2,_)):(S.flags|=1048576,_)}function o(S){return t&&S.alternate===null&&(S.flags|=2),S}function l(S,_,N,D){return _===null||_.tag!==6?(_=Zc(N,S.mode,D),_.return=S,_):(_=s(_,N),_.return=S,_)}function c(S,_,N,D){var $=N.type;return $===mi?p(S,_,N.props.children,D,N.key):_!==null&&(_.elementType===$||typeof $=="object"&&$!==null&&$.$$typeof===Hr&&Cm($)===_.type)?(D=s(_,N.props),D.ref=Ao(S,_,N),D.return=S,D):(D=$l(N.type,N.key,N.props,null,S.mode,D),D.ref=Ao(S,_,N),D.return=S,D)}function h(S,_,N,D){return _===null||_.tag!==4||_.stateNode.containerInfo!==N.containerInfo||_.stateNode.implementation!==N.implementation?(_=ed(N,S.mode,D),_.return=S,_):(_=s(_,N.children||[]),_.return=S,_)}function p(S,_,N,D,$){return _===null||_.tag!==7?(_=Fs(N,S.mode,D,$),_.return=S,_):(_=s(_,N),_.return=S,_)}function m(S,_,N){if(typeof _=="string"&&_!==""||typeof _=="number")return _=Zc(""+_,S.mode,N),_.return=S,_;if(typeof _=="object"&&_!==null){switch(_.$$typeof){case ul:return N=$l(_.type,_.key,_.props,null,S.mode,N),N.ref=Ao(S,null,_),N.return=S,N;case pi:return _=ed(_,S.mode,N),_.return=S,_;case Hr:var D=_._init;return m(S,D(_._payload),N)}if(Do(_)||To(_))return _=Fs(_,S.mode,N,null),_.return=S,_;wl(S,_)}return null}function g(S,_,N,D){var $=_!==null?_.key:null;if(typeof N=="string"&&N!==""||typeof N=="number")return $!==null?null:l(S,_,""+N,D);if(typeof N=="object"&&N!==null){switch(N.$$typeof){case ul:return N.key===$?c(S,_,N,D):null;case pi:return N.key===$?h(S,_,N,D):null;case Hr:return $=N._init,g(S,_,$(N._payload),D)}if(Do(N)||To(N))return $!==null?null:p(S,_,N,D,null);wl(S,N)}return null}function k(S,_,N,D,$){if(typeof D=="string"&&D!==""||typeof D=="number")return S=S.get(N)||null,l(_,S,""+D,$);if(typeof D=="object"&&D!==null){switch(D.$$typeof){case ul:return S=S.get(D.key===null?N:D.key)||null,c(_,S,D,$);case pi:return S=S.get(D.key===null?N:D.key)||null,h(_,S,D,$);case Hr:var F=D._init;return k(S,_,N,F(D._payload),$)}if(Do(D)||To(D))return S=S.get(N)||null,p(_,S,D,$,null);wl(_,D)}return null}function b(S,_,N,D){for(var $=null,F=null,w=_,v=_=0,x=null;w!==null&&v<N.length;v++){w.index>v?(x=w,w=null):x=w.sibling;var T=g(S,w,N[v],D);if(T===null){w===null&&(w=x);break}t&&w&&T.alternate===null&&e(S,w),_=i(T,_,v),F===null?$=T:F.sibling=T,F=T,w=x}if(v===N.length)return n(S,w),Ve&&bs(S,v),$;if(w===null){for(;v<N.length;v++)w=m(S,N[v],D),w!==null&&(_=i(w,_,v),F===null?$=w:F.sibling=w,F=w);return Ve&&bs(S,v),$}for(w=r(S,w);v<N.length;v++)x=k(w,S,v,N[v],D),x!==null&&(t&&x.alternate!==null&&w.delete(x.key===null?v:x.key),_=i(x,_,v),F===null?$=x:F.sibling=x,F=x);return t&&w.forEach(function(A){return e(S,A)}),Ve&&bs(S,v),$}function P(S,_,N,D){var $=To(N);if(typeof $!="function")throw Error(B(150));if(N=$.call(N),N==null)throw Error(B(151));for(var F=$=null,w=_,v=_=0,x=null,T=N.next();w!==null&&!T.done;v++,T=N.next()){w.index>v?(x=w,w=null):x=w.sibling;var A=g(S,w,T.value,D);if(A===null){w===null&&(w=x);break}t&&w&&A.alternate===null&&e(S,w),_=i(A,_,v),F===null?$=A:F.sibling=A,F=A,w=x}if(T.done)return n(S,w),Ve&&bs(S,v),$;if(w===null){for(;!T.done;v++,T=N.next())T=m(S,T.value,D),T!==null&&(_=i(T,_,v),F===null?$=T:F.sibling=T,F=T);return Ve&&bs(S,v),$}for(w=r(S,w);!T.done;v++,T=N.next())T=k(w,S,v,T.value,D),T!==null&&(t&&T.alternate!==null&&w.delete(T.key===null?v:T.key),_=i(T,_,v),F===null?$=T:F.sibling=T,F=T);return t&&w.forEach(function(C){return e(S,C)}),Ve&&bs(S,v),$}function j(S,_,N,D){if(typeof N=="object"&&N!==null&&N.type===mi&&N.key===null&&(N=N.props.children),typeof N=="object"&&N!==null){switch(N.$$typeof){case ul:e:{for(var $=N.key,F=_;F!==null;){if(F.key===$){if($=N.type,$===mi){if(F.tag===7){n(S,F.sibling),_=s(F,N.props.children),_.return=S,S=_;break e}}else if(F.elementType===$||typeof $=="object"&&$!==null&&$.$$typeof===Hr&&Cm($)===F.type){n(S,F.sibling),_=s(F,N.props),_.ref=Ao(S,F,N),_.return=S,S=_;break e}n(S,F);break}else e(S,F);F=F.sibling}N.type===mi?(_=Fs(N.props.children,S.mode,D,N.key),_.return=S,S=_):(D=$l(N.type,N.key,N.props,null,S.mode,D),D.ref=Ao(S,_,N),D.return=S,S=D)}return o(S);case pi:e:{for(F=N.key;_!==null;){if(_.key===F)if(_.tag===4&&_.stateNode.containerInfo===N.containerInfo&&_.stateNode.implementation===N.implementation){n(S,_.sibling),_=s(_,N.children||[]),_.return=S,S=_;break e}else{n(S,_);break}else e(S,_);_=_.sibling}_=ed(N,S.mode,D),_.return=S,S=_}return o(S);case Hr:return F=N._init,j(S,_,F(N._payload),D)}if(Do(N))return b(S,_,N,D);if(To(N))return P(S,_,N,D);wl(S,N)}return typeof N=="string"&&N!==""||typeof N=="number"?(N=""+N,_!==null&&_.tag===6?(n(S,_.sibling),_=s(_,N),_.return=S,S=_):(n(S,_),_=Zc(N,S.mode,D),_.return=S,S=_),o(S)):n(S,_)}return j}var $i=P0(!0),b0=P0(!1),cu=Ts(null),du=null,Ti=null,Zh=null;function ef(){Zh=Ti=du=null}function tf(t){var e=cu.current;je(cu),t._currentValue=e}function Bd(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Ri(t,e){du=t,Zh=Ti=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Zt=!0),t.firstContext=null)}function bn(t){var e=t._currentValue;if(Zh!==t)if(t={context:t,memoizedValue:e,next:null},Ti===null){if(du===null)throw Error(B(308));Ti=t,du.dependencies={lanes:0,firstContext:t}}else Ti=Ti.next=t;return e}var Vs=null;function nf(t){Vs===null?Vs=[t]:Vs.push(t)}function R0(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,nf(e)):(n.next=s.next,s.next=n),e.interleaved=n,Sr(t,r)}function Sr(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Wr=!1;function rf(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function D0(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function wr(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function us(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,ye&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,Sr(t,n)}return s=r.interleaved,s===null?(e.next=e,nf(r)):(e.next=s.next,s.next=e),r.interleaved=e,Sr(t,n)}function Vl(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Bh(t,n)}}function Pm(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function hu(t,e,n,r){var s=t.updateQueue;Wr=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,l=s.shared.pending;if(l!==null){s.shared.pending=null;var c=l,h=c.next;c.next=null,o===null?i=h:o.next=h,o=c;var p=t.alternate;p!==null&&(p=p.updateQueue,l=p.lastBaseUpdate,l!==o&&(l===null?p.firstBaseUpdate=h:l.next=h,p.lastBaseUpdate=c))}if(i!==null){var m=s.baseState;o=0,p=h=c=null,l=i;do{var g=l.lane,k=l.eventTime;if((r&g)===g){p!==null&&(p=p.next={eventTime:k,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var b=t,P=l;switch(g=e,k=n,P.tag){case 1:if(b=P.payload,typeof b=="function"){m=b.call(k,m,g);break e}m=b;break e;case 3:b.flags=b.flags&-65537|128;case 0:if(b=P.payload,g=typeof b=="function"?b.call(k,m,g):b,g==null)break e;m=Ue({},m,g);break e;case 2:Wr=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,g=s.effects,g===null?s.effects=[l]:g.push(l))}else k={eventTime:k,lane:g,tag:l.tag,payload:l.payload,callback:l.callback,next:null},p===null?(h=p=k,c=m):p=p.next=k,o|=g;if(l=l.next,l===null){if(l=s.shared.pending,l===null)break;g=l,l=g.next,g.next=null,s.lastBaseUpdate=g,s.shared.pending=null}}while(!0);if(p===null&&(c=m),s.baseState=c,s.firstBaseUpdate=h,s.lastBaseUpdate=p,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);qs|=o,t.lanes=o,t.memoizedState=m}}function bm(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(B(191,s));s.call(r)}}}var Ca={},Zn=Ts(Ca),da=Ts(Ca),ha=Ts(Ca);function Ls(t){if(t===Ca)throw Error(B(174));return t}function sf(t,e){switch(Ce(ha,e),Ce(da,t),Ce(Zn,Ca),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Ed(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Ed(e,t)}je(Zn),Ce(Zn,e)}function Bi(){je(Zn),je(da),je(ha)}function j0(t){Ls(ha.current);var e=Ls(Zn.current),n=Ed(e,t.type);e!==n&&(Ce(da,t),Ce(Zn,n))}function of(t){da.current===t&&(je(Zn),je(da))}var Me=Ts(0);function fu(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Kc=[];function af(){for(var t=0;t<Kc.length;t++)Kc[t]._workInProgressVersionPrimary=null;Kc.length=0}var Ll=jr.ReactCurrentDispatcher,Gc=jr.ReactCurrentBatchConfig,zs=0,Fe=null,at=null,pt=null,pu=!1,Ho=!1,fa=0,GE=0;function Dt(){throw Error(B(321))}function lf(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Un(t[n],e[n]))return!1;return!0}function uf(t,e,n,r,s,i){if(zs=i,Fe=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Ll.current=t===null||t.memoizedState===null?JE:ZE,t=n(r,s),Ho){i=0;do{if(Ho=!1,fa=0,25<=i)throw Error(B(301));i+=1,pt=at=null,e.updateQueue=null,Ll.current=eT,t=n(r,s)}while(Ho)}if(Ll.current=mu,e=at!==null&&at.next!==null,zs=0,pt=at=Fe=null,pu=!1,e)throw Error(B(300));return t}function cf(){var t=fa!==0;return fa=0,t}function Qn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return pt===null?Fe.memoizedState=pt=t:pt=pt.next=t,pt}function Rn(){if(at===null){var t=Fe.alternate;t=t!==null?t.memoizedState:null}else t=at.next;var e=pt===null?Fe.memoizedState:pt.next;if(e!==null)pt=e,at=t;else{if(t===null)throw Error(B(310));at=t,t={memoizedState:at.memoizedState,baseState:at.baseState,baseQueue:at.baseQueue,queue:at.queue,next:null},pt===null?Fe.memoizedState=pt=t:pt=pt.next=t}return pt}function pa(t,e){return typeof e=="function"?e(t):e}function Qc(t){var e=Rn(),n=e.queue;if(n===null)throw Error(B(311));n.lastRenderedReducer=t;var r=at,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var l=o=null,c=null,h=i;do{var p=h.lane;if((zs&p)===p)c!==null&&(c=c.next={lane:0,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null}),r=h.hasEagerState?h.eagerState:t(r,h.action);else{var m={lane:p,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null};c===null?(l=c=m,o=r):c=c.next=m,Fe.lanes|=p,qs|=p}h=h.next}while(h!==null&&h!==i);c===null?o=r:c.next=l,Un(r,e.memoizedState)||(Zt=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=c,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,Fe.lanes|=i,qs|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Yc(t){var e=Rn(),n=e.queue;if(n===null)throw Error(B(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=t(i,o.action),o=o.next;while(o!==s);Un(i,e.memoizedState)||(Zt=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function V0(){}function L0(t,e){var n=Fe,r=Rn(),s=e(),i=!Un(r.memoizedState,s);if(i&&(r.memoizedState=s,Zt=!0),r=r.queue,df(F0.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||pt!==null&&pt.memoizedState.tag&1){if(n.flags|=2048,ma(9,M0.bind(null,n,r,s,e),void 0,null),gt===null)throw Error(B(349));zs&30||O0(n,e,s)}return s}function O0(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Fe.updateQueue,e===null?(e={lastEffect:null,stores:null},Fe.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function M0(t,e,n,r){e.value=n,e.getSnapshot=r,U0(e)&&$0(t)}function F0(t,e,n){return n(function(){U0(e)&&$0(t)})}function U0(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Un(t,n)}catch{return!0}}function $0(t){var e=Sr(t,1);e!==null&&Fn(e,t,1,-1)}function Rm(t){var e=Qn();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:pa,lastRenderedState:t},e.queue=t,t=t.dispatch=XE.bind(null,Fe,t),[e.memoizedState,t]}function ma(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Fe.updateQueue,e===null?(e={lastEffect:null,stores:null},Fe.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function B0(){return Rn().memoizedState}function Ol(t,e,n,r){var s=Qn();Fe.flags|=t,s.memoizedState=ma(1|e,n,void 0,r===void 0?null:r)}function Wu(t,e,n,r){var s=Rn();r=r===void 0?null:r;var i=void 0;if(at!==null){var o=at.memoizedState;if(i=o.destroy,r!==null&&lf(r,o.deps)){s.memoizedState=ma(e,n,i,r);return}}Fe.flags|=t,s.memoizedState=ma(1|e,n,i,r)}function Dm(t,e){return Ol(8390656,8,t,e)}function df(t,e){return Wu(2048,8,t,e)}function z0(t,e){return Wu(4,2,t,e)}function q0(t,e){return Wu(4,4,t,e)}function H0(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function W0(t,e,n){return n=n!=null?n.concat([t]):null,Wu(4,4,H0.bind(null,e,t),n)}function hf(){}function K0(t,e){var n=Rn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&lf(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function G0(t,e){var n=Rn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&lf(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function Q0(t,e,n){return zs&21?(Un(n,e)||(n=e0(),Fe.lanes|=n,qs|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Zt=!0),t.memoizedState=n)}function QE(t,e){var n=Te;Te=n!==0&&4>n?n:4,t(!0);var r=Gc.transition;Gc.transition={};try{t(!1),e()}finally{Te=n,Gc.transition=r}}function Y0(){return Rn().memoizedState}function YE(t,e,n){var r=ds(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},X0(t))J0(e,n);else if(n=R0(t,e,n,r),n!==null){var s=Wt();Fn(n,t,r,s),Z0(n,e,r)}}function XE(t,e,n){var r=ds(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(X0(t))J0(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,l=i(o,n);if(s.hasEagerState=!0,s.eagerState=l,Un(l,o)){var c=e.interleaved;c===null?(s.next=s,nf(e)):(s.next=c.next,c.next=s),e.interleaved=s;return}}catch{}finally{}n=R0(t,e,s,r),n!==null&&(s=Wt(),Fn(n,t,r,s),Z0(n,e,r))}}function X0(t){var e=t.alternate;return t===Fe||e!==null&&e===Fe}function J0(t,e){Ho=pu=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function Z0(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Bh(t,n)}}var mu={readContext:bn,useCallback:Dt,useContext:Dt,useEffect:Dt,useImperativeHandle:Dt,useInsertionEffect:Dt,useLayoutEffect:Dt,useMemo:Dt,useReducer:Dt,useRef:Dt,useState:Dt,useDebugValue:Dt,useDeferredValue:Dt,useTransition:Dt,useMutableSource:Dt,useSyncExternalStore:Dt,useId:Dt,unstable_isNewReconciler:!1},JE={readContext:bn,useCallback:function(t,e){return Qn().memoizedState=[t,e===void 0?null:e],t},useContext:bn,useEffect:Dm,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Ol(4194308,4,H0.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Ol(4194308,4,t,e)},useInsertionEffect:function(t,e){return Ol(4,2,t,e)},useMemo:function(t,e){var n=Qn();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Qn();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=YE.bind(null,Fe,t),[r.memoizedState,t]},useRef:function(t){var e=Qn();return t={current:t},e.memoizedState=t},useState:Rm,useDebugValue:hf,useDeferredValue:function(t){return Qn().memoizedState=t},useTransition:function(){var t=Rm(!1),e=t[0];return t=QE.bind(null,t[1]),Qn().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Fe,s=Qn();if(Ve){if(n===void 0)throw Error(B(407));n=n()}else{if(n=e(),gt===null)throw Error(B(349));zs&30||O0(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,Dm(F0.bind(null,r,i,t),[t]),r.flags|=2048,ma(9,M0.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=Qn(),e=gt.identifierPrefix;if(Ve){var n=fr,r=hr;n=(r&~(1<<32-Mn(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=fa++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=GE++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},ZE={readContext:bn,useCallback:K0,useContext:bn,useEffect:df,useImperativeHandle:W0,useInsertionEffect:z0,useLayoutEffect:q0,useMemo:G0,useReducer:Qc,useRef:B0,useState:function(){return Qc(pa)},useDebugValue:hf,useDeferredValue:function(t){var e=Rn();return Q0(e,at.memoizedState,t)},useTransition:function(){var t=Qc(pa)[0],e=Rn().memoizedState;return[t,e]},useMutableSource:V0,useSyncExternalStore:L0,useId:Y0,unstable_isNewReconciler:!1},eT={readContext:bn,useCallback:K0,useContext:bn,useEffect:df,useImperativeHandle:W0,useInsertionEffect:z0,useLayoutEffect:q0,useMemo:G0,useReducer:Yc,useRef:B0,useState:function(){return Yc(pa)},useDebugValue:hf,useDeferredValue:function(t){var e=Rn();return at===null?e.memoizedState=t:Q0(e,at.memoizedState,t)},useTransition:function(){var t=Yc(pa)[0],e=Rn().memoizedState;return[t,e]},useMutableSource:V0,useSyncExternalStore:L0,useId:Y0,unstable_isNewReconciler:!1};function Vn(t,e){if(t&&t.defaultProps){e=Ue({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function zd(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Ue({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Ku={isMounted:function(t){return(t=t._reactInternals)?Js(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Wt(),s=ds(t),i=wr(r,s);i.payload=e,n!=null&&(i.callback=n),e=us(t,i,s),e!==null&&(Fn(e,t,s,r),Vl(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Wt(),s=ds(t),i=wr(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=us(t,i,s),e!==null&&(Fn(e,t,s,r),Vl(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Wt(),r=ds(t),s=wr(n,r);s.tag=2,e!=null&&(s.callback=e),e=us(t,s,r),e!==null&&(Fn(e,t,r,n),Vl(e,t,r))}};function jm(t,e,n,r,s,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,o):e.prototype&&e.prototype.isPureReactComponent?!aa(n,r)||!aa(s,i):!0}function ev(t,e,n){var r=!1,s=vs,i=e.contextType;return typeof i=="object"&&i!==null?i=bn(i):(s=tn(e)?$s:Ut.current,r=e.contextTypes,i=(r=r!=null)?Fi(t,s):vs),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Ku,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function Vm(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Ku.enqueueReplaceState(e,e.state,null)}function qd(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},rf(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=bn(i):(i=tn(e)?$s:Ut.current,s.context=Fi(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(zd(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&Ku.enqueueReplaceState(s,s.state,null),hu(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function zi(t,e){try{var n="",r=e;do n+=Ax(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function Xc(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Hd(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var tT=typeof WeakMap=="function"?WeakMap:Map;function tv(t,e,n){n=wr(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){yu||(yu=!0,th=r),Hd(t,e)},n}function nv(t,e,n){n=wr(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){Hd(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){Hd(t,e),typeof r!="function"&&(cs===null?cs=new Set([this]):cs.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function Lm(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new tT;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=mT.bind(null,t,e,n),e.then(t,t))}function Om(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Mm(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=wr(-1,1),e.tag=2,us(n,e,1))),n.lanes|=1),t)}var nT=jr.ReactCurrentOwner,Zt=!1;function Ht(t,e,n,r){e.child=t===null?b0(e,null,n,r):$i(e,t.child,n,r)}function Fm(t,e,n,r,s){n=n.render;var i=e.ref;return Ri(e,s),r=uf(t,e,n,r,i,s),n=cf(),t!==null&&!Zt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Nr(t,e,s)):(Ve&&n&&Yh(e),e.flags|=1,Ht(t,e,r,s),e.child)}function Um(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!wf(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,rv(t,e,i,r,s)):(t=$l(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:aa,n(o,r)&&t.ref===e.ref)return Nr(t,e,s)}return e.flags|=1,t=hs(i,r),t.ref=e.ref,t.return=e,e.child=t}function rv(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(aa(i,r)&&t.ref===e.ref)if(Zt=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(Zt=!0);else return e.lanes=t.lanes,Nr(t,e,s)}return Wd(t,e,n,r,s)}function sv(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ce(Si,hn),hn|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Ce(Si,hn),hn|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,Ce(Si,hn),hn|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,Ce(Si,hn),hn|=r;return Ht(t,e,s,n),e.child}function iv(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Wd(t,e,n,r,s){var i=tn(n)?$s:Ut.current;return i=Fi(e,i),Ri(e,s),n=uf(t,e,n,r,i,s),r=cf(),t!==null&&!Zt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Nr(t,e,s)):(Ve&&r&&Yh(e),e.flags|=1,Ht(t,e,n,s),e.child)}function $m(t,e,n,r,s){if(tn(n)){var i=!0;au(e)}else i=!1;if(Ri(e,s),e.stateNode===null)Ml(t,e),ev(e,n,r),qd(e,n,r,s),r=!0;else if(t===null){var o=e.stateNode,l=e.memoizedProps;o.props=l;var c=o.context,h=n.contextType;typeof h=="object"&&h!==null?h=bn(h):(h=tn(n)?$s:Ut.current,h=Fi(e,h));var p=n.getDerivedStateFromProps,m=typeof p=="function"||typeof o.getSnapshotBeforeUpdate=="function";m||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==r||c!==h)&&Vm(e,o,r,h),Wr=!1;var g=e.memoizedState;o.state=g,hu(e,r,o,s),c=e.memoizedState,l!==r||g!==c||en.current||Wr?(typeof p=="function"&&(zd(e,n,p,r),c=e.memoizedState),(l=Wr||jm(e,n,l,r,g,c,h))?(m||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=c),o.props=r,o.state=c,o.context=h,r=l):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,D0(t,e),l=e.memoizedProps,h=e.type===e.elementType?l:Vn(e.type,l),o.props=h,m=e.pendingProps,g=o.context,c=n.contextType,typeof c=="object"&&c!==null?c=bn(c):(c=tn(n)?$s:Ut.current,c=Fi(e,c));var k=n.getDerivedStateFromProps;(p=typeof k=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==m||g!==c)&&Vm(e,o,r,c),Wr=!1,g=e.memoizedState,o.state=g,hu(e,r,o,s);var b=e.memoizedState;l!==m||g!==b||en.current||Wr?(typeof k=="function"&&(zd(e,n,k,r),b=e.memoizedState),(h=Wr||jm(e,n,h,r,g,b,c)||!1)?(p||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,b,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,b,c)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&g===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&g===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=b),o.props=r,o.state=b,o.context=c,r=h):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&g===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&g===t.memoizedState||(e.flags|=1024),r=!1)}return Kd(t,e,n,r,i,s)}function Kd(t,e,n,r,s,i){iv(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return s&&Nm(e,n,!1),Nr(t,e,i);r=e.stateNode,nT.current=e;var l=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=$i(e,t.child,null,i),e.child=$i(e,null,l,i)):Ht(t,e,l,i),e.memoizedState=r.state,s&&Nm(e,n,!0),e.child}function ov(t){var e=t.stateNode;e.pendingContext?Sm(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Sm(t,e.context,!1),sf(t,e.containerInfo)}function Bm(t,e,n,r,s){return Ui(),Jh(s),e.flags|=256,Ht(t,e,n,r),e.child}var Gd={dehydrated:null,treeContext:null,retryLane:0};function Qd(t){return{baseLanes:t,cachePool:null,transitions:null}}function av(t,e,n){var r=e.pendingProps,s=Me.current,i=!1,o=(e.flags&128)!==0,l;if((l=o)||(l=t!==null&&t.memoizedState===null?!1:(s&2)!==0),l?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),Ce(Me,s&1),t===null)return $d(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,i?(r=e.mode,i=e.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=Yu(o,r,0,null),t=Fs(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=Qd(n),e.memoizedState=Gd,t):ff(e,o));if(s=t.memoizedState,s!==null&&(l=s.dehydrated,l!==null))return rT(t,e,o,r,l,s,n);if(i){i=r.fallback,o=e.mode,s=t.child,l=s.sibling;var c={mode:"hidden",children:r.children};return!(o&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=c,e.deletions=null):(r=hs(s,c),r.subtreeFlags=s.subtreeFlags&14680064),l!==null?i=hs(l,i):(i=Fs(i,o,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,o=t.child.memoizedState,o=o===null?Qd(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~n,e.memoizedState=Gd,r}return i=t.child,t=i.sibling,r=hs(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function ff(t,e){return e=Yu({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function xl(t,e,n,r){return r!==null&&Jh(r),$i(e,t.child,null,n),t=ff(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function rT(t,e,n,r,s,i,o){if(n)return e.flags&256?(e.flags&=-257,r=Xc(Error(B(422))),xl(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=Yu({mode:"visible",children:r.children},s,0,null),i=Fs(i,s,o,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&$i(e,t.child,null,o),e.child.memoizedState=Qd(o),e.memoizedState=Gd,i);if(!(e.mode&1))return xl(t,e,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var l=r.dgst;return r=l,i=Error(B(419)),r=Xc(i,r,void 0),xl(t,e,o,r)}if(l=(o&t.childLanes)!==0,Zt||l){if(r=gt,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,Sr(t,s),Fn(r,t,s,-1))}return _f(),r=Xc(Error(B(421))),xl(t,e,o,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=gT.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,fn=ls(s.nextSibling),mn=e,Ve=!0,On=null,t!==null&&(Sn[Nn++]=hr,Sn[Nn++]=fr,Sn[Nn++]=Bs,hr=t.id,fr=t.overflow,Bs=e),e=ff(e,r.children),e.flags|=4096,e)}function zm(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Bd(t.return,e,n)}function Jc(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function lv(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(Ht(t,e,r.children,n),r=Me.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&zm(t,n,e);else if(t.tag===19)zm(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Ce(Me,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&fu(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),Jc(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&fu(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}Jc(e,!0,n,null,i);break;case"together":Jc(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Ml(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Nr(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),qs|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(B(153));if(e.child!==null){for(t=e.child,n=hs(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=hs(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function sT(t,e,n){switch(e.tag){case 3:ov(e),Ui();break;case 5:j0(e);break;case 1:tn(e.type)&&au(e);break;case 4:sf(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;Ce(cu,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Ce(Me,Me.current&1),e.flags|=128,null):n&e.child.childLanes?av(t,e,n):(Ce(Me,Me.current&1),t=Nr(t,e,n),t!==null?t.sibling:null);Ce(Me,Me.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return lv(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),Ce(Me,Me.current),r)break;return null;case 22:case 23:return e.lanes=0,sv(t,e,n)}return Nr(t,e,n)}var uv,Yd,cv,dv;uv=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Yd=function(){};cv=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,Ls(Zn.current);var i=null;switch(n){case"input":s=vd(t,s),r=vd(t,r),i=[];break;case"select":s=Ue({},s,{value:void 0}),r=Ue({},r,{value:void 0}),i=[];break;case"textarea":s=xd(t,s),r=xd(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=iu)}Td(n,r);var o;n=null;for(h in s)if(!r.hasOwnProperty(h)&&s.hasOwnProperty(h)&&s[h]!=null)if(h==="style"){var l=s[h];for(o in l)l.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else h!=="dangerouslySetInnerHTML"&&h!=="children"&&h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&h!=="autoFocus"&&(ea.hasOwnProperty(h)?i||(i=[]):(i=i||[]).push(h,null));for(h in r){var c=r[h];if(l=s!=null?s[h]:void 0,r.hasOwnProperty(h)&&c!==l&&(c!=null||l!=null))if(h==="style")if(l){for(o in l)!l.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in c)c.hasOwnProperty(o)&&l[o]!==c[o]&&(n||(n={}),n[o]=c[o])}else n||(i||(i=[]),i.push(h,n)),n=c;else h==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(i=i||[]).push(h,c)):h==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(h,""+c):h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&(ea.hasOwnProperty(h)?(c!=null&&h==="onScroll"&&Re("scroll",t),i||l===c||(i=[])):(i=i||[]).push(h,c))}n&&(i=i||[]).push("style",n);var h=i;(e.updateQueue=h)&&(e.flags|=4)}};dv=function(t,e,n,r){n!==r&&(e.flags|=4)};function Co(t,e){if(!Ve)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function jt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function iT(t,e,n){var r=e.pendingProps;switch(Xh(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return jt(e),null;case 1:return tn(e.type)&&ou(),jt(e),null;case 3:return r=e.stateNode,Bi(),je(en),je(Ut),af(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(_l(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,On!==null&&(sh(On),On=null))),Yd(t,e),jt(e),null;case 5:of(e);var s=Ls(ha.current);if(n=e.type,t!==null&&e.stateNode!=null)cv(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(B(166));return jt(e),null}if(t=Ls(Zn.current),_l(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[Yn]=e,r[ca]=i,t=(e.mode&1)!==0,n){case"dialog":Re("cancel",r),Re("close",r);break;case"iframe":case"object":case"embed":Re("load",r);break;case"video":case"audio":for(s=0;s<Vo.length;s++)Re(Vo[s],r);break;case"source":Re("error",r);break;case"img":case"image":case"link":Re("error",r),Re("load",r);break;case"details":Re("toggle",r);break;case"input":Jp(r,i),Re("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},Re("invalid",r);break;case"textarea":em(r,i),Re("invalid",r)}Td(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var l=i[o];o==="children"?typeof l=="string"?r.textContent!==l&&(i.suppressHydrationWarning!==!0&&vl(r.textContent,l,t),s=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(i.suppressHydrationWarning!==!0&&vl(r.textContent,l,t),s=["children",""+l]):ea.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&Re("scroll",r)}switch(n){case"input":cl(r),Zp(r,i,!0);break;case"textarea":cl(r),tm(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=iu)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Fy(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[Yn]=e,t[ca]=r,uv(t,e,!1,!1),e.stateNode=t;e:{switch(o=Id(n,r),n){case"dialog":Re("cancel",t),Re("close",t),s=r;break;case"iframe":case"object":case"embed":Re("load",t),s=r;break;case"video":case"audio":for(s=0;s<Vo.length;s++)Re(Vo[s],t);s=r;break;case"source":Re("error",t),s=r;break;case"img":case"image":case"link":Re("error",t),Re("load",t),s=r;break;case"details":Re("toggle",t),s=r;break;case"input":Jp(t,r),s=vd(t,r),Re("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=Ue({},r,{value:void 0}),Re("invalid",t);break;case"textarea":em(t,r),s=xd(t,r),Re("invalid",t);break;default:s=r}Td(n,s),l=s;for(i in l)if(l.hasOwnProperty(i)){var c=l[i];i==="style"?By(t,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&Uy(t,c)):i==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&ta(t,c):typeof c=="number"&&ta(t,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(ea.hasOwnProperty(i)?c!=null&&i==="onScroll"&&Re("scroll",t):c!=null&&Lh(t,i,c,o))}switch(n){case"input":cl(t),Zp(t,r,!1);break;case"textarea":cl(t),tm(t);break;case"option":r.value!=null&&t.setAttribute("value",""+ys(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?Ai(t,!!r.multiple,i,!1):r.defaultValue!=null&&Ai(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=iu)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return jt(e),null;case 6:if(t&&e.stateNode!=null)dv(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(B(166));if(n=Ls(ha.current),Ls(Zn.current),_l(e)){if(r=e.stateNode,n=e.memoizedProps,r[Yn]=e,(i=r.nodeValue!==n)&&(t=mn,t!==null))switch(t.tag){case 3:vl(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&vl(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Yn]=e,e.stateNode=r}return jt(e),null;case 13:if(je(Me),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Ve&&fn!==null&&e.mode&1&&!(e.flags&128))C0(),Ui(),e.flags|=98560,i=!1;else if(i=_l(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(B(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(B(317));i[Yn]=e}else Ui(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;jt(e),i=!1}else On!==null&&(sh(On),On=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Me.current&1?ut===0&&(ut=3):_f())),e.updateQueue!==null&&(e.flags|=4),jt(e),null);case 4:return Bi(),Yd(t,e),t===null&&la(e.stateNode.containerInfo),jt(e),null;case 10:return tf(e.type._context),jt(e),null;case 17:return tn(e.type)&&ou(),jt(e),null;case 19:if(je(Me),i=e.memoizedState,i===null)return jt(e),null;if(r=(e.flags&128)!==0,o=i.rendering,o===null)if(r)Co(i,!1);else{if(ut!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=fu(t),o!==null){for(e.flags|=128,Co(i,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Ce(Me,Me.current&1|2),e.child}t=t.sibling}i.tail!==null&&Ge()>qi&&(e.flags|=128,r=!0,Co(i,!1),e.lanes=4194304)}else{if(!r)if(t=fu(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Co(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!Ve)return jt(e),null}else 2*Ge()-i.renderingStartTime>qi&&n!==1073741824&&(e.flags|=128,r=!0,Co(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(n=i.last,n!==null?n.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=Ge(),e.sibling=null,n=Me.current,Ce(Me,r?n&1|2:n&1),e):(jt(e),null);case 22:case 23:return vf(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?hn&1073741824&&(jt(e),e.subtreeFlags&6&&(e.flags|=8192)):jt(e),null;case 24:return null;case 25:return null}throw Error(B(156,e.tag))}function oT(t,e){switch(Xh(e),e.tag){case 1:return tn(e.type)&&ou(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Bi(),je(en),je(Ut),af(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return of(e),null;case 13:if(je(Me),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(B(340));Ui()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return je(Me),null;case 4:return Bi(),null;case 10:return tf(e.type._context),null;case 22:case 23:return vf(),null;case 24:return null;default:return null}}var El=!1,Ot=!1,aT=typeof WeakSet=="function"?WeakSet:Set,W=null;function Ii(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){He(t,e,r)}else n.current=null}function Xd(t,e,n){try{n()}catch(r){He(t,e,r)}}var qm=!1;function lT(t,e){if(jd=nu,t=g0(),Qh(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,l=-1,c=-1,h=0,p=0,m=t,g=null;t:for(;;){for(var k;m!==n||s!==0&&m.nodeType!==3||(l=o+s),m!==i||r!==0&&m.nodeType!==3||(c=o+r),m.nodeType===3&&(o+=m.nodeValue.length),(k=m.firstChild)!==null;)g=m,m=k;for(;;){if(m===t)break t;if(g===n&&++h===s&&(l=o),g===i&&++p===r&&(c=o),(k=m.nextSibling)!==null)break;m=g,g=m.parentNode}m=k}n=l===-1||c===-1?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(Vd={focusedElem:t,selectionRange:n},nu=!1,W=e;W!==null;)if(e=W,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,W=t;else for(;W!==null;){e=W;try{var b=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(b!==null){var P=b.memoizedProps,j=b.memoizedState,S=e.stateNode,_=S.getSnapshotBeforeUpdate(e.elementType===e.type?P:Vn(e.type,P),j);S.__reactInternalSnapshotBeforeUpdate=_}break;case 3:var N=e.stateNode.containerInfo;N.nodeType===1?N.textContent="":N.nodeType===9&&N.documentElement&&N.removeChild(N.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(B(163))}}catch(D){He(e,e.return,D)}if(t=e.sibling,t!==null){t.return=e.return,W=t;break}W=e.return}return b=qm,qm=!1,b}function Wo(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&Xd(e,n,i)}s=s.next}while(s!==r)}}function Gu(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Jd(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function hv(t){var e=t.alternate;e!==null&&(t.alternate=null,hv(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Yn],delete e[ca],delete e[Md],delete e[qE],delete e[HE])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function fv(t){return t.tag===5||t.tag===3||t.tag===4}function Hm(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||fv(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Zd(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=iu));else if(r!==4&&(t=t.child,t!==null))for(Zd(t,e,n),t=t.sibling;t!==null;)Zd(t,e,n),t=t.sibling}function eh(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(eh(t,e,n),t=t.sibling;t!==null;)eh(t,e,n),t=t.sibling}var wt=null,Ln=!1;function zr(t,e,n){for(n=n.child;n!==null;)pv(t,e,n),n=n.sibling}function pv(t,e,n){if(Jn&&typeof Jn.onCommitFiberUnmount=="function")try{Jn.onCommitFiberUnmount(Uu,n)}catch{}switch(n.tag){case 5:Ot||Ii(n,e);case 6:var r=wt,s=Ln;wt=null,zr(t,e,n),wt=r,Ln=s,wt!==null&&(Ln?(t=wt,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):wt.removeChild(n.stateNode));break;case 18:wt!==null&&(Ln?(t=wt,n=n.stateNode,t.nodeType===8?Hc(t.parentNode,n):t.nodeType===1&&Hc(t,n),ia(t)):Hc(wt,n.stateNode));break;case 4:r=wt,s=Ln,wt=n.stateNode.containerInfo,Ln=!0,zr(t,e,n),wt=r,Ln=s;break;case 0:case 11:case 14:case 15:if(!Ot&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&Xd(n,e,o),s=s.next}while(s!==r)}zr(t,e,n);break;case 1:if(!Ot&&(Ii(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){He(n,e,l)}zr(t,e,n);break;case 21:zr(t,e,n);break;case 22:n.mode&1?(Ot=(r=Ot)||n.memoizedState!==null,zr(t,e,n),Ot=r):zr(t,e,n);break;default:zr(t,e,n)}}function Wm(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new aT),e.forEach(function(r){var s=yT.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function jn(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,o=e,l=o;e:for(;l!==null;){switch(l.tag){case 5:wt=l.stateNode,Ln=!1;break e;case 3:wt=l.stateNode.containerInfo,Ln=!0;break e;case 4:wt=l.stateNode.containerInfo,Ln=!0;break e}l=l.return}if(wt===null)throw Error(B(160));pv(i,o,s),wt=null,Ln=!1;var c=s.alternate;c!==null&&(c.return=null),s.return=null}catch(h){He(s,e,h)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)mv(e,t),e=e.sibling}function mv(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(jn(e,t),Gn(t),r&4){try{Wo(3,t,t.return),Gu(3,t)}catch(P){He(t,t.return,P)}try{Wo(5,t,t.return)}catch(P){He(t,t.return,P)}}break;case 1:jn(e,t),Gn(t),r&512&&n!==null&&Ii(n,n.return);break;case 5:if(jn(e,t),Gn(t),r&512&&n!==null&&Ii(n,n.return),t.flags&32){var s=t.stateNode;try{ta(s,"")}catch(P){He(t,t.return,P)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,o=n!==null?n.memoizedProps:i,l=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{l==="input"&&i.type==="radio"&&i.name!=null&&Oy(s,i),Id(l,o);var h=Id(l,i);for(o=0;o<c.length;o+=2){var p=c[o],m=c[o+1];p==="style"?By(s,m):p==="dangerouslySetInnerHTML"?Uy(s,m):p==="children"?ta(s,m):Lh(s,p,m,h)}switch(l){case"input":_d(s,i);break;case"textarea":My(s,i);break;case"select":var g=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var k=i.value;k!=null?Ai(s,!!i.multiple,k,!1):g!==!!i.multiple&&(i.defaultValue!=null?Ai(s,!!i.multiple,i.defaultValue,!0):Ai(s,!!i.multiple,i.multiple?[]:"",!1))}s[ca]=i}catch(P){He(t,t.return,P)}}break;case 6:if(jn(e,t),Gn(t),r&4){if(t.stateNode===null)throw Error(B(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(P){He(t,t.return,P)}}break;case 3:if(jn(e,t),Gn(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{ia(e.containerInfo)}catch(P){He(t,t.return,P)}break;case 4:jn(e,t),Gn(t);break;case 13:jn(e,t),Gn(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(gf=Ge())),r&4&&Wm(t);break;case 22:if(p=n!==null&&n.memoizedState!==null,t.mode&1?(Ot=(h=Ot)||p,jn(e,t),Ot=h):jn(e,t),Gn(t),r&8192){if(h=t.memoizedState!==null,(t.stateNode.isHidden=h)&&!p&&t.mode&1)for(W=t,p=t.child;p!==null;){for(m=W=p;W!==null;){switch(g=W,k=g.child,g.tag){case 0:case 11:case 14:case 15:Wo(4,g,g.return);break;case 1:Ii(g,g.return);var b=g.stateNode;if(typeof b.componentWillUnmount=="function"){r=g,n=g.return;try{e=r,b.props=e.memoizedProps,b.state=e.memoizedState,b.componentWillUnmount()}catch(P){He(r,n,P)}}break;case 5:Ii(g,g.return);break;case 22:if(g.memoizedState!==null){Gm(m);continue}}k!==null?(k.return=g,W=k):Gm(m)}p=p.sibling}e:for(p=null,m=t;;){if(m.tag===5){if(p===null){p=m;try{s=m.stateNode,h?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(l=m.stateNode,c=m.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=$y("display",o))}catch(P){He(t,t.return,P)}}}else if(m.tag===6){if(p===null)try{m.stateNode.nodeValue=h?"":m.memoizedProps}catch(P){He(t,t.return,P)}}else if((m.tag!==22&&m.tag!==23||m.memoizedState===null||m===t)&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===t)break e;for(;m.sibling===null;){if(m.return===null||m.return===t)break e;p===m&&(p=null),m=m.return}p===m&&(p=null),m.sibling.return=m.return,m=m.sibling}}break;case 19:jn(e,t),Gn(t),r&4&&Wm(t);break;case 21:break;default:jn(e,t),Gn(t)}}function Gn(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(fv(n)){var r=n;break e}n=n.return}throw Error(B(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(ta(s,""),r.flags&=-33);var i=Hm(t);eh(t,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,l=Hm(t);Zd(t,l,o);break;default:throw Error(B(161))}}catch(c){He(t,t.return,c)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function uT(t,e,n){W=t,gv(t)}function gv(t,e,n){for(var r=(t.mode&1)!==0;W!==null;){var s=W,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||El;if(!o){var l=s.alternate,c=l!==null&&l.memoizedState!==null||Ot;l=El;var h=Ot;if(El=o,(Ot=c)&&!h)for(W=s;W!==null;)o=W,c=o.child,o.tag===22&&o.memoizedState!==null?Qm(s):c!==null?(c.return=o,W=c):Qm(s);for(;i!==null;)W=i,gv(i),i=i.sibling;W=s,El=l,Ot=h}Km(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,W=i):Km(t)}}function Km(t){for(;W!==null;){var e=W;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Ot||Gu(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Ot)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:Vn(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&bm(e,i,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}bm(e,o,n)}break;case 5:var l=e.stateNode;if(n===null&&e.flags&4){n=l;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var h=e.alternate;if(h!==null){var p=h.memoizedState;if(p!==null){var m=p.dehydrated;m!==null&&ia(m)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(B(163))}Ot||e.flags&512&&Jd(e)}catch(g){He(e,e.return,g)}}if(e===t){W=null;break}if(n=e.sibling,n!==null){n.return=e.return,W=n;break}W=e.return}}function Gm(t){for(;W!==null;){var e=W;if(e===t){W=null;break}var n=e.sibling;if(n!==null){n.return=e.return,W=n;break}W=e.return}}function Qm(t){for(;W!==null;){var e=W;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Gu(4,e)}catch(c){He(e,n,c)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(c){He(e,s,c)}}var i=e.return;try{Jd(e)}catch(c){He(e,i,c)}break;case 5:var o=e.return;try{Jd(e)}catch(c){He(e,o,c)}}}catch(c){He(e,e.return,c)}if(e===t){W=null;break}var l=e.sibling;if(l!==null){l.return=e.return,W=l;break}W=e.return}}var cT=Math.ceil,gu=jr.ReactCurrentDispatcher,pf=jr.ReactCurrentOwner,Cn=jr.ReactCurrentBatchConfig,ye=0,gt=null,rt=null,Tt=0,hn=0,Si=Ts(0),ut=0,ga=null,qs=0,Qu=0,mf=0,Ko=null,Xt=null,gf=0,qi=1/0,cr=null,yu=!1,th=null,cs=null,Tl=!1,ts=null,vu=0,Go=0,nh=null,Fl=-1,Ul=0;function Wt(){return ye&6?Ge():Fl!==-1?Fl:Fl=Ge()}function ds(t){return t.mode&1?ye&2&&Tt!==0?Tt&-Tt:KE.transition!==null?(Ul===0&&(Ul=e0()),Ul):(t=Te,t!==0||(t=window.event,t=t===void 0?16:a0(t.type)),t):1}function Fn(t,e,n,r){if(50<Go)throw Go=0,nh=null,Error(B(185));Na(t,n,r),(!(ye&2)||t!==gt)&&(t===gt&&(!(ye&2)&&(Qu|=n),ut===4&&Gr(t,Tt)),nn(t,r),n===1&&ye===0&&!(e.mode&1)&&(qi=Ge()+500,Hu&&Is()))}function nn(t,e){var n=t.callbackNode;Kx(t,e);var r=tu(t,t===gt?Tt:0);if(r===0)n!==null&&sm(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&sm(n),e===1)t.tag===0?WE(Ym.bind(null,t)):N0(Ym.bind(null,t)),BE(function(){!(ye&6)&&Is()}),n=null;else{switch(t0(r)){case 1:n=$h;break;case 4:n=Jy;break;case 16:n=eu;break;case 536870912:n=Zy;break;default:n=eu}n=Iv(n,yv.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function yv(t,e){if(Fl=-1,Ul=0,ye&6)throw Error(B(327));var n=t.callbackNode;if(Di()&&t.callbackNode!==n)return null;var r=tu(t,t===gt?Tt:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=_u(t,r);else{e=r;var s=ye;ye|=2;var i=_v();(gt!==t||Tt!==e)&&(cr=null,qi=Ge()+500,Ms(t,e));do try{fT();break}catch(l){vv(t,l)}while(!0);ef(),gu.current=i,ye=s,rt!==null?e=0:(gt=null,Tt=0,e=ut)}if(e!==0){if(e===2&&(s=Cd(t),s!==0&&(r=s,e=rh(t,s))),e===1)throw n=ga,Ms(t,0),Gr(t,r),nn(t,Ge()),n;if(e===6)Gr(t,r);else{if(s=t.current.alternate,!(r&30)&&!dT(s)&&(e=_u(t,r),e===2&&(i=Cd(t),i!==0&&(r=i,e=rh(t,i))),e===1))throw n=ga,Ms(t,0),Gr(t,r),nn(t,Ge()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(B(345));case 2:Rs(t,Xt,cr);break;case 3:if(Gr(t,r),(r&130023424)===r&&(e=gf+500-Ge(),10<e)){if(tu(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){Wt(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=Od(Rs.bind(null,t,Xt,cr),e);break}Rs(t,Xt,cr);break;case 4:if(Gr(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var o=31-Mn(r);i=1<<o,o=e[o],o>s&&(s=o),r&=~i}if(r=s,r=Ge()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*cT(r/1960))-r,10<r){t.timeoutHandle=Od(Rs.bind(null,t,Xt,cr),r);break}Rs(t,Xt,cr);break;case 5:Rs(t,Xt,cr);break;default:throw Error(B(329))}}}return nn(t,Ge()),t.callbackNode===n?yv.bind(null,t):null}function rh(t,e){var n=Ko;return t.current.memoizedState.isDehydrated&&(Ms(t,e).flags|=256),t=_u(t,e),t!==2&&(e=Xt,Xt=n,e!==null&&sh(e)),t}function sh(t){Xt===null?Xt=t:Xt.push.apply(Xt,t)}function dT(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!Un(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Gr(t,e){for(e&=~mf,e&=~Qu,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Mn(e),r=1<<n;t[n]=-1,e&=~r}}function Ym(t){if(ye&6)throw Error(B(327));Di();var e=tu(t,0);if(!(e&1))return nn(t,Ge()),null;var n=_u(t,e);if(t.tag!==0&&n===2){var r=Cd(t);r!==0&&(e=r,n=rh(t,r))}if(n===1)throw n=ga,Ms(t,0),Gr(t,e),nn(t,Ge()),n;if(n===6)throw Error(B(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Rs(t,Xt,cr),nn(t,Ge()),null}function yf(t,e){var n=ye;ye|=1;try{return t(e)}finally{ye=n,ye===0&&(qi=Ge()+500,Hu&&Is())}}function Hs(t){ts!==null&&ts.tag===0&&!(ye&6)&&Di();var e=ye;ye|=1;var n=Cn.transition,r=Te;try{if(Cn.transition=null,Te=1,t)return t()}finally{Te=r,Cn.transition=n,ye=e,!(ye&6)&&Is()}}function vf(){hn=Si.current,je(Si)}function Ms(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,$E(n)),rt!==null)for(n=rt.return;n!==null;){var r=n;switch(Xh(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&ou();break;case 3:Bi(),je(en),je(Ut),af();break;case 5:of(r);break;case 4:Bi();break;case 13:je(Me);break;case 19:je(Me);break;case 10:tf(r.type._context);break;case 22:case 23:vf()}n=n.return}if(gt=t,rt=t=hs(t.current,null),Tt=hn=e,ut=0,ga=null,mf=Qu=qs=0,Xt=Ko=null,Vs!==null){for(e=0;e<Vs.length;e++)if(n=Vs[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}Vs=null}return t}function vv(t,e){do{var n=rt;try{if(ef(),Ll.current=mu,pu){for(var r=Fe.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}pu=!1}if(zs=0,pt=at=Fe=null,Ho=!1,fa=0,pf.current=null,n===null||n.return===null){ut=1,ga=e,rt=null;break}e:{var i=t,o=n.return,l=n,c=e;if(e=Tt,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var h=c,p=l,m=p.tag;if(!(p.mode&1)&&(m===0||m===11||m===15)){var g=p.alternate;g?(p.updateQueue=g.updateQueue,p.memoizedState=g.memoizedState,p.lanes=g.lanes):(p.updateQueue=null,p.memoizedState=null)}var k=Om(o);if(k!==null){k.flags&=-257,Mm(k,o,l,i,e),k.mode&1&&Lm(i,h,e),e=k,c=h;var b=e.updateQueue;if(b===null){var P=new Set;P.add(c),e.updateQueue=P}else b.add(c);break e}else{if(!(e&1)){Lm(i,h,e),_f();break e}c=Error(B(426))}}else if(Ve&&l.mode&1){var j=Om(o);if(j!==null){!(j.flags&65536)&&(j.flags|=256),Mm(j,o,l,i,e),Jh(zi(c,l));break e}}i=c=zi(c,l),ut!==4&&(ut=2),Ko===null?Ko=[i]:Ko.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var S=tv(i,c,e);Pm(i,S);break e;case 1:l=c;var _=i.type,N=i.stateNode;if(!(i.flags&128)&&(typeof _.getDerivedStateFromError=="function"||N!==null&&typeof N.componentDidCatch=="function"&&(cs===null||!cs.has(N)))){i.flags|=65536,e&=-e,i.lanes|=e;var D=nv(i,l,e);Pm(i,D);break e}}i=i.return}while(i!==null)}xv(n)}catch($){e=$,rt===n&&n!==null&&(rt=n=n.return);continue}break}while(!0)}function _v(){var t=gu.current;return gu.current=mu,t===null?mu:t}function _f(){(ut===0||ut===3||ut===2)&&(ut=4),gt===null||!(qs&268435455)&&!(Qu&268435455)||Gr(gt,Tt)}function _u(t,e){var n=ye;ye|=2;var r=_v();(gt!==t||Tt!==e)&&(cr=null,Ms(t,e));do try{hT();break}catch(s){vv(t,s)}while(!0);if(ef(),ye=n,gu.current=r,rt!==null)throw Error(B(261));return gt=null,Tt=0,ut}function hT(){for(;rt!==null;)wv(rt)}function fT(){for(;rt!==null&&!Mx();)wv(rt)}function wv(t){var e=Tv(t.alternate,t,hn);t.memoizedProps=t.pendingProps,e===null?xv(t):rt=e,pf.current=null}function xv(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=oT(n,e),n!==null){n.flags&=32767,rt=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{ut=6,rt=null;return}}else if(n=iT(n,e,hn),n!==null){rt=n;return}if(e=e.sibling,e!==null){rt=e;return}rt=e=t}while(e!==null);ut===0&&(ut=5)}function Rs(t,e,n){var r=Te,s=Cn.transition;try{Cn.transition=null,Te=1,pT(t,e,n,r)}finally{Cn.transition=s,Te=r}return null}function pT(t,e,n,r){do Di();while(ts!==null);if(ye&6)throw Error(B(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(B(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(Gx(t,i),t===gt&&(rt=gt=null,Tt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Tl||(Tl=!0,Iv(eu,function(){return Di(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=Cn.transition,Cn.transition=null;var o=Te;Te=1;var l=ye;ye|=4,pf.current=null,lT(t,n),mv(n,t),jE(Vd),nu=!!jd,Vd=jd=null,t.current=n,uT(n),Fx(),ye=l,Te=o,Cn.transition=i}else t.current=n;if(Tl&&(Tl=!1,ts=t,vu=s),i=t.pendingLanes,i===0&&(cs=null),Bx(n.stateNode),nn(t,Ge()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(yu)throw yu=!1,t=th,th=null,t;return vu&1&&t.tag!==0&&Di(),i=t.pendingLanes,i&1?t===nh?Go++:(Go=0,nh=t):Go=0,Is(),null}function Di(){if(ts!==null){var t=t0(vu),e=Cn.transition,n=Te;try{if(Cn.transition=null,Te=16>t?16:t,ts===null)var r=!1;else{if(t=ts,ts=null,vu=0,ye&6)throw Error(B(331));var s=ye;for(ye|=4,W=t.current;W!==null;){var i=W,o=i.child;if(W.flags&16){var l=i.deletions;if(l!==null){for(var c=0;c<l.length;c++){var h=l[c];for(W=h;W!==null;){var p=W;switch(p.tag){case 0:case 11:case 15:Wo(8,p,i)}var m=p.child;if(m!==null)m.return=p,W=m;else for(;W!==null;){p=W;var g=p.sibling,k=p.return;if(hv(p),p===h){W=null;break}if(g!==null){g.return=k,W=g;break}W=k}}}var b=i.alternate;if(b!==null){var P=b.child;if(P!==null){b.child=null;do{var j=P.sibling;P.sibling=null,P=j}while(P!==null)}}W=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,W=o;else e:for(;W!==null;){if(i=W,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Wo(9,i,i.return)}var S=i.sibling;if(S!==null){S.return=i.return,W=S;break e}W=i.return}}var _=t.current;for(W=_;W!==null;){o=W;var N=o.child;if(o.subtreeFlags&2064&&N!==null)N.return=o,W=N;else e:for(o=_;W!==null;){if(l=W,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:Gu(9,l)}}catch($){He(l,l.return,$)}if(l===o){W=null;break e}var D=l.sibling;if(D!==null){D.return=l.return,W=D;break e}W=l.return}}if(ye=s,Is(),Jn&&typeof Jn.onPostCommitFiberRoot=="function")try{Jn.onPostCommitFiberRoot(Uu,t)}catch{}r=!0}return r}finally{Te=n,Cn.transition=e}}return!1}function Xm(t,e,n){e=zi(n,e),e=tv(t,e,1),t=us(t,e,1),e=Wt(),t!==null&&(Na(t,1,e),nn(t,e))}function He(t,e,n){if(t.tag===3)Xm(t,t,n);else for(;e!==null;){if(e.tag===3){Xm(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(cs===null||!cs.has(r))){t=zi(n,t),t=nv(e,t,1),e=us(e,t,1),t=Wt(),e!==null&&(Na(e,1,t),nn(e,t));break}}e=e.return}}function mT(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Wt(),t.pingedLanes|=t.suspendedLanes&n,gt===t&&(Tt&n)===n&&(ut===4||ut===3&&(Tt&130023424)===Tt&&500>Ge()-gf?Ms(t,0):mf|=n),nn(t,e)}function Ev(t,e){e===0&&(t.mode&1?(e=fl,fl<<=1,!(fl&130023424)&&(fl=4194304)):e=1);var n=Wt();t=Sr(t,e),t!==null&&(Na(t,e,n),nn(t,n))}function gT(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),Ev(t,n)}function yT(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(B(314))}r!==null&&r.delete(e),Ev(t,n)}var Tv;Tv=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||en.current)Zt=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Zt=!1,sT(t,e,n);Zt=!!(t.flags&131072)}else Zt=!1,Ve&&e.flags&1048576&&k0(e,uu,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Ml(t,e),t=e.pendingProps;var s=Fi(e,Ut.current);Ri(e,n),s=uf(null,e,r,t,s,n);var i=cf();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,tn(r)?(i=!0,au(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,rf(e),s.updater=Ku,e.stateNode=s,s._reactInternals=e,qd(e,r,t,n),e=Kd(null,e,r,!0,i,n)):(e.tag=0,Ve&&i&&Yh(e),Ht(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Ml(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=_T(r),t=Vn(r,t),s){case 0:e=Wd(null,e,r,t,n);break e;case 1:e=$m(null,e,r,t,n);break e;case 11:e=Fm(null,e,r,t,n);break e;case 14:e=Um(null,e,r,Vn(r.type,t),n);break e}throw Error(B(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Vn(r,s),Wd(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Vn(r,s),$m(t,e,r,s,n);case 3:e:{if(ov(e),t===null)throw Error(B(387));r=e.pendingProps,i=e.memoizedState,s=i.element,D0(t,e),hu(e,r,null,n);var o=e.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=zi(Error(B(423)),e),e=Bm(t,e,r,n,s);break e}else if(r!==s){s=zi(Error(B(424)),e),e=Bm(t,e,r,n,s);break e}else for(fn=ls(e.stateNode.containerInfo.firstChild),mn=e,Ve=!0,On=null,n=b0(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Ui(),r===s){e=Nr(t,e,n);break e}Ht(t,e,r,n)}e=e.child}return e;case 5:return j0(e),t===null&&$d(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,o=s.children,Ld(r,s)?o=null:i!==null&&Ld(r,i)&&(e.flags|=32),iv(t,e),Ht(t,e,o,n),e.child;case 6:return t===null&&$d(e),null;case 13:return av(t,e,n);case 4:return sf(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=$i(e,null,r,n):Ht(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Vn(r,s),Fm(t,e,r,s,n);case 7:return Ht(t,e,e.pendingProps,n),e.child;case 8:return Ht(t,e,e.pendingProps.children,n),e.child;case 12:return Ht(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,o=s.value,Ce(cu,r._currentValue),r._currentValue=o,i!==null)if(Un(i.value,o)){if(i.children===s.children&&!en.current){e=Nr(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var l=i.dependencies;if(l!==null){o=i.child;for(var c=l.firstContext;c!==null;){if(c.context===r){if(i.tag===1){c=wr(-1,n&-n),c.tag=2;var h=i.updateQueue;if(h!==null){h=h.shared;var p=h.pending;p===null?c.next=c:(c.next=p.next,p.next=c),h.pending=c}}i.lanes|=n,c=i.alternate,c!==null&&(c.lanes|=n),Bd(i.return,n,e),l.lanes|=n;break}c=c.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(B(341));o.lanes|=n,l=o.alternate,l!==null&&(l.lanes|=n),Bd(o,n,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}Ht(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,Ri(e,n),s=bn(s),r=r(s),e.flags|=1,Ht(t,e,r,n),e.child;case 14:return r=e.type,s=Vn(r,e.pendingProps),s=Vn(r.type,s),Um(t,e,r,s,n);case 15:return rv(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Vn(r,s),Ml(t,e),e.tag=1,tn(r)?(t=!0,au(e)):t=!1,Ri(e,n),ev(e,r,s),qd(e,r,s,n),Kd(null,e,r,!0,t,n);case 19:return lv(t,e,n);case 22:return sv(t,e,n)}throw Error(B(156,e.tag))};function Iv(t,e){return Xy(t,e)}function vT(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function An(t,e,n,r){return new vT(t,e,n,r)}function wf(t){return t=t.prototype,!(!t||!t.isReactComponent)}function _T(t){if(typeof t=="function")return wf(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Mh)return 11;if(t===Fh)return 14}return 2}function hs(t,e){var n=t.alternate;return n===null?(n=An(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function $l(t,e,n,r,s,i){var o=2;if(r=t,typeof t=="function")wf(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case mi:return Fs(n.children,s,i,e);case Oh:o=8,s|=8;break;case pd:return t=An(12,n,e,s|2),t.elementType=pd,t.lanes=i,t;case md:return t=An(13,n,e,s),t.elementType=md,t.lanes=i,t;case gd:return t=An(19,n,e,s),t.elementType=gd,t.lanes=i,t;case jy:return Yu(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Ry:o=10;break e;case Dy:o=9;break e;case Mh:o=11;break e;case Fh:o=14;break e;case Hr:o=16,r=null;break e}throw Error(B(130,t==null?t:typeof t,""))}return e=An(o,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function Fs(t,e,n,r){return t=An(7,t,r,e),t.lanes=n,t}function Yu(t,e,n,r){return t=An(22,t,r,e),t.elementType=jy,t.lanes=n,t.stateNode={isHidden:!1},t}function Zc(t,e,n){return t=An(6,t,null,e),t.lanes=n,t}function ed(t,e,n){return e=An(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function wT(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=jc(0),this.expirationTimes=jc(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=jc(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function xf(t,e,n,r,s,i,o,l,c){return t=new wT(t,e,n,l,c),e===1?(e=1,i===!0&&(e|=8)):e=0,i=An(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},rf(i),t}function xT(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:pi,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function Sv(t){if(!t)return vs;t=t._reactInternals;e:{if(Js(t)!==t||t.tag!==1)throw Error(B(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(tn(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(B(171))}if(t.tag===1){var n=t.type;if(tn(n))return S0(t,n,e)}return e}function Nv(t,e,n,r,s,i,o,l,c){return t=xf(n,r,!0,t,s,i,o,l,c),t.context=Sv(null),n=t.current,r=Wt(),s=ds(n),i=wr(r,s),i.callback=e??null,us(n,i,s),t.current.lanes=s,Na(t,s,r),nn(t,r),t}function Xu(t,e,n,r){var s=e.current,i=Wt(),o=ds(s);return n=Sv(n),e.context===null?e.context=n:e.pendingContext=n,e=wr(i,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=us(s,e,o),t!==null&&(Fn(t,s,o,i),Vl(t,s,o)),o}function wu(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Jm(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Ef(t,e){Jm(t,e),(t=t.alternate)&&Jm(t,e)}function ET(){return null}var kv=typeof reportError=="function"?reportError:function(t){console.error(t)};function Tf(t){this._internalRoot=t}Ju.prototype.render=Tf.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(B(409));Xu(t,e,null,null)};Ju.prototype.unmount=Tf.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Hs(function(){Xu(null,t,null,null)}),e[Ir]=null}};function Ju(t){this._internalRoot=t}Ju.prototype.unstable_scheduleHydration=function(t){if(t){var e=s0();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Kr.length&&e!==0&&e<Kr[n].priority;n++);Kr.splice(n,0,t),n===0&&o0(t)}};function If(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Zu(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Zm(){}function TT(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var h=wu(o);i.call(h)}}var o=Nv(e,r,t,0,null,!1,!1,"",Zm);return t._reactRootContainer=o,t[Ir]=o.current,la(t.nodeType===8?t.parentNode:t),Hs(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var l=r;r=function(){var h=wu(c);l.call(h)}}var c=xf(t,0,!1,null,null,!1,!1,"",Zm);return t._reactRootContainer=c,t[Ir]=c.current,la(t.nodeType===8?t.parentNode:t),Hs(function(){Xu(e,c,n,r)}),c}function ec(t,e,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var l=s;s=function(){var c=wu(o);l.call(c)}}Xu(e,o,t,s)}else o=TT(n,e,t,s,r);return wu(o)}n0=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=jo(e.pendingLanes);n!==0&&(Bh(e,n|1),nn(e,Ge()),!(ye&6)&&(qi=Ge()+500,Is()))}break;case 13:Hs(function(){var r=Sr(t,1);if(r!==null){var s=Wt();Fn(r,t,1,s)}}),Ef(t,1)}};zh=function(t){if(t.tag===13){var e=Sr(t,134217728);if(e!==null){var n=Wt();Fn(e,t,134217728,n)}Ef(t,134217728)}};r0=function(t){if(t.tag===13){var e=ds(t),n=Sr(t,e);if(n!==null){var r=Wt();Fn(n,t,e,r)}Ef(t,e)}};s0=function(){return Te};i0=function(t,e){var n=Te;try{return Te=t,e()}finally{Te=n}};Nd=function(t,e,n){switch(e){case"input":if(_d(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=qu(r);if(!s)throw Error(B(90));Ly(r),_d(r,s)}}}break;case"textarea":My(t,n);break;case"select":e=n.value,e!=null&&Ai(t,!!n.multiple,e,!1)}};Hy=yf;Wy=Hs;var IT={usingClientEntryPoint:!1,Events:[Aa,_i,qu,zy,qy,yf]},Po={findFiberByHostInstance:js,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},ST={bundleType:Po.bundleType,version:Po.version,rendererPackageName:Po.rendererPackageName,rendererConfig:Po.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:jr.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Qy(t),t===null?null:t.stateNode},findFiberByHostInstance:Po.findFiberByHostInstance||ET,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Il=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Il.isDisabled&&Il.supportsFiber)try{Uu=Il.inject(ST),Jn=Il}catch{}}yn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=IT;yn.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!If(e))throw Error(B(200));return xT(t,e,null,n)};yn.createRoot=function(t,e){if(!If(t))throw Error(B(299));var n=!1,r="",s=kv;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=xf(t,1,!1,null,null,n,!1,r,s),t[Ir]=e.current,la(t.nodeType===8?t.parentNode:t),new Tf(e)};yn.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(B(188)):(t=Object.keys(t).join(","),Error(B(268,t)));return t=Qy(e),t=t===null?null:t.stateNode,t};yn.flushSync=function(t){return Hs(t)};yn.hydrate=function(t,e,n){if(!Zu(e))throw Error(B(200));return ec(null,t,e,!0,n)};yn.hydrateRoot=function(t,e,n){if(!If(t))throw Error(B(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=kv;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=Nv(e,null,t,1,n??null,s,!1,i,o),t[Ir]=e.current,la(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new Ju(e)};yn.render=function(t,e,n){if(!Zu(e))throw Error(B(200));return ec(null,t,e,!1,n)};yn.unmountComponentAtNode=function(t){if(!Zu(t))throw Error(B(40));return t._reactRootContainer?(Hs(function(){ec(null,null,t,!1,function(){t._reactRootContainer=null,t[Ir]=null})}),!0):!1};yn.unstable_batchedUpdates=yf;yn.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Zu(n))throw Error(B(200));if(t==null||t._reactInternals===void 0)throw Error(B(38));return ec(t,e,n,!1,r)};yn.version="18.3.1-next-f1338f8080-20240426";function Av(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Av)}catch(t){console.error(t)}}Av(),Ay.exports=yn;var NT=Ay.exports,eg=NT;hd.createRoot=eg.createRoot,hd.hydrateRoot=eg.hydrateRoot;var tg={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cv=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},kT=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],o=t[n++],l=t[n++],c=((s&7)<<18|(i&63)<<12|(o&63)<<6|l&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{const i=t[n++],o=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return e.join("")},Pv={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],o=s+1<t.length,l=o?t[s+1]:0,c=s+2<t.length,h=c?t[s+2]:0,p=i>>2,m=(i&3)<<4|l>>4;let g=(l&15)<<2|h>>6,k=h&63;c||(k=64,o||(g=64)),r.push(n[p],n[m],n[g],n[k])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(Cv(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):kT(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],l=s<t.length?n[t.charAt(s)]:0;++s;const h=s<t.length?n[t.charAt(s)]:64;++s;const m=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||l==null||h==null||m==null)throw new AT;const g=i<<2|l>>4;if(r.push(g),h!==64){const k=l<<4&240|h>>2;if(r.push(k),m!==64){const b=h<<6&192|m;r.push(b)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class AT extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const CT=function(t){const e=Cv(t);return Pv.encodeByteArray(e,!0)},xu=function(t){return CT(t).replace(/\./g,"")},bv=function(t){try{return Pv.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PT(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bT=()=>PT().__FIREBASE_DEFAULTS__,RT=()=>{if(typeof process>"u"||typeof tg>"u")return;const t=tg.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},DT=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&bv(t[1]);return e&&JSON.parse(e)},tc=()=>{try{return bT()||RT()||DT()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},Rv=t=>{var e,n;return(n=(e=tc())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},jT=t=>{const e=Rv(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},Dv=()=>{var t;return(t=tc())===null||t===void 0?void 0:t.config},jv=t=>{var e;return(e=tc())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VT{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LT(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},t);return[xu(JSON.stringify(n)),xu(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $t(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function OT(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test($t())}function MT(){var t;const e=(t=tc())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function FT(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function UT(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function $T(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function BT(){const t=$t();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function zT(){return!MT()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function qT(){try{return typeof indexedDB=="object"}catch{return!1}}function HT(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)===null||i===void 0?void 0:i.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WT="FirebaseError";class Vr extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=WT,Object.setPrototypeOf(this,Vr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Pa.prototype.create)}}class Pa{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],o=i?KT(i,r):"Error",l=`${this.serviceName}: ${o} (${s}).`;return new Vr(s,l,r)}}function KT(t,e){return t.replace(GT,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const GT=/\{\$([^}]+)}/g;function QT(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Eu(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],o=e[s];if(ng(i)&&ng(o)){if(!Eu(i,o))return!1}else if(i!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function ng(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ba(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function YT(t,e){const n=new XT(t,e);return n.subscribe.bind(n)}class XT{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");JT(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=td),s.error===void 0&&(s.error=td),s.complete===void 0&&(s.complete=td);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function JT(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function td(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nt(t){return t&&t._delegate?t._delegate:t}class Ws{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ds="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZT{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new VT;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(i){if(s)return null;throw i}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(tI(e))try{this.getOrInitializeService({instanceIdentifier:Ds})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=Ds){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Ds){return this.instances.has(e)}getOptions(e=Ds){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,o]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(i);r===l&&o.resolve(s)}return s}onInit(e,n){var r;const s=this.normalizeInstanceIdentifier(n),i=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;i.add(e),this.onInitCallbacks.set(s,i);const o=this.instances.get(s);return o&&e(o,s),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:eI(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Ds){return this.component?this.component.multipleInstances?e:Ds:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function eI(t){return t===Ds?void 0:t}function tI(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nI{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new ZT(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var de;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(de||(de={}));const rI={debug:de.DEBUG,verbose:de.VERBOSE,info:de.INFO,warn:de.WARN,error:de.ERROR,silent:de.SILENT},sI=de.INFO,iI={[de.DEBUG]:"log",[de.VERBOSE]:"log",[de.INFO]:"info",[de.WARN]:"warn",[de.ERROR]:"error"},oI=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=iI[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Sf{constructor(e){this.name=e,this._logLevel=sI,this._logHandler=oI,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in de))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?rI[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,de.DEBUG,...e),this._logHandler(this,de.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,de.VERBOSE,...e),this._logHandler(this,de.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,de.INFO,...e),this._logHandler(this,de.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,de.WARN,...e),this._logHandler(this,de.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,de.ERROR,...e),this._logHandler(this,de.ERROR,...e)}}const aI=(t,e)=>e.some(n=>t instanceof n);let rg,sg;function lI(){return rg||(rg=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function uI(){return sg||(sg=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Vv=new WeakMap,ih=new WeakMap,Lv=new WeakMap,nd=new WeakMap,Nf=new WeakMap;function cI(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(fs(t.result)),s()},o=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&Vv.set(n,t)}).catch(()=>{}),Nf.set(e,t),e}function dI(t){if(ih.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),s()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});ih.set(t,e)}let oh={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return ih.get(t);if(e==="objectStoreNames")return t.objectStoreNames||Lv.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return fs(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function hI(t){oh=t(oh)}function fI(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(rd(this),e,...n);return Lv.set(r,e.sort?e.sort():[e]),fs(r)}:uI().includes(t)?function(...e){return t.apply(rd(this),e),fs(Vv.get(this))}:function(...e){return fs(t.apply(rd(this),e))}}function pI(t){return typeof t=="function"?fI(t):(t instanceof IDBTransaction&&dI(t),aI(t,lI())?new Proxy(t,oh):t)}function fs(t){if(t instanceof IDBRequest)return cI(t);if(nd.has(t))return nd.get(t);const e=pI(t);return e!==t&&(nd.set(t,e),Nf.set(e,t)),e}const rd=t=>Nf.get(t);function mI(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(t,e),l=fs(o);return r&&o.addEventListener("upgradeneeded",c=>{r(fs(o.result),c.oldVersion,c.newVersion,fs(o.transaction),c)}),n&&o.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),l.then(c=>{i&&c.addEventListener("close",()=>i()),s&&c.addEventListener("versionchange",h=>s(h.oldVersion,h.newVersion,h))}).catch(()=>{}),l}const gI=["get","getKey","getAll","getAllKeys","count"],yI=["put","add","delete","clear"],sd=new Map;function ig(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(sd.get(e))return sd.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=yI.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||gI.includes(n)))return;const i=async function(o,...l){const c=this.transaction(o,s?"readwrite":"readonly");let h=c.store;return r&&(h=h.index(l.shift())),(await Promise.all([h[n](...l),s&&c.done]))[0]};return sd.set(e,i),i}hI(t=>({...t,get:(e,n,r)=>ig(e,n)||t.get(e,n,r),has:(e,n)=>!!ig(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vI{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(_I(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function _I(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const ah="@firebase/app",og="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kr=new Sf("@firebase/app"),wI="@firebase/app-compat",xI="@firebase/analytics-compat",EI="@firebase/analytics",TI="@firebase/app-check-compat",II="@firebase/app-check",SI="@firebase/auth",NI="@firebase/auth-compat",kI="@firebase/database",AI="@firebase/data-connect",CI="@firebase/database-compat",PI="@firebase/functions",bI="@firebase/functions-compat",RI="@firebase/installations",DI="@firebase/installations-compat",jI="@firebase/messaging",VI="@firebase/messaging-compat",LI="@firebase/performance",OI="@firebase/performance-compat",MI="@firebase/remote-config",FI="@firebase/remote-config-compat",UI="@firebase/storage",$I="@firebase/storage-compat",BI="@firebase/firestore",zI="@firebase/vertexai-preview",qI="@firebase/firestore-compat",HI="firebase",WI="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lh="[DEFAULT]",KI={[ah]:"fire-core",[wI]:"fire-core-compat",[EI]:"fire-analytics",[xI]:"fire-analytics-compat",[II]:"fire-app-check",[TI]:"fire-app-check-compat",[SI]:"fire-auth",[NI]:"fire-auth-compat",[kI]:"fire-rtdb",[AI]:"fire-data-connect",[CI]:"fire-rtdb-compat",[PI]:"fire-fn",[bI]:"fire-fn-compat",[RI]:"fire-iid",[DI]:"fire-iid-compat",[jI]:"fire-fcm",[VI]:"fire-fcm-compat",[LI]:"fire-perf",[OI]:"fire-perf-compat",[MI]:"fire-rc",[FI]:"fire-rc-compat",[UI]:"fire-gcs",[$I]:"fire-gcs-compat",[BI]:"fire-fst",[qI]:"fire-fst-compat",[zI]:"fire-vertex","fire-js":"fire-js",[HI]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tu=new Map,GI=new Map,uh=new Map;function ag(t,e){try{t.container.addComponent(e)}catch(n){kr.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Hi(t){const e=t.name;if(uh.has(e))return kr.debug(`There were multiple attempts to register component ${e}.`),!1;uh.set(e,t);for(const n of Tu.values())ag(n,t);for(const n of GI.values())ag(n,t);return!0}function kf(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Xn(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QI={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ps=new Pa("app","Firebase",QI);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YI{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Ws("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ps.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const no=WI;function Ov(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:lh,automaticDataCollectionEnabled:!1},e),s=r.name;if(typeof s!="string"||!s)throw ps.create("bad-app-name",{appName:String(s)});if(n||(n=Dv()),!n)throw ps.create("no-options");const i=Tu.get(s);if(i){if(Eu(n,i.options)&&Eu(r,i.config))return i;throw ps.create("duplicate-app",{appName:s})}const o=new nI(s);for(const c of uh.values())o.addComponent(c);const l=new YI(n,r,o);return Tu.set(s,l),l}function Mv(t=lh){const e=Tu.get(t);if(!e&&t===lh&&Dv())return Ov();if(!e)throw ps.create("no-app",{appName:t});return e}function ms(t,e,n){var r;let s=(r=KI[t])!==null&&r!==void 0?r:t;n&&(s+=`-${n}`);const i=s.match(/\s|\//),o=e.match(/\s|\//);if(i||o){const l=[`Unable to register library "${s}" with version "${e}":`];i&&l.push(`library name "${s}" contains illegal characters (whitespace or "/")`),i&&o&&l.push("and"),o&&l.push(`version name "${e}" contains illegal characters (whitespace or "/")`),kr.warn(l.join(" "));return}Hi(new Ws(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XI="firebase-heartbeat-database",JI=1,ya="firebase-heartbeat-store";let id=null;function Fv(){return id||(id=mI(XI,JI,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(ya)}catch(n){console.warn(n)}}}}).catch(t=>{throw ps.create("idb-open",{originalErrorMessage:t.message})})),id}async function ZI(t){try{const n=(await Fv()).transaction(ya),r=await n.objectStore(ya).get(Uv(t));return await n.done,r}catch(e){if(e instanceof Vr)kr.warn(e.message);else{const n=ps.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});kr.warn(n.message)}}}async function lg(t,e){try{const r=(await Fv()).transaction(ya,"readwrite");await r.objectStore(ya).put(e,Uv(t)),await r.done}catch(n){if(n instanceof Vr)kr.warn(n.message);else{const r=ps.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});kr.warn(r.message)}}}function Uv(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eS=1024,tS=30*24*60*60*1e3;class nS{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new sS(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=ug();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i)?void 0:(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const l=new Date(o.date).valueOf();return Date.now()-l<=tS}),this._storage.overwrite(this._heartbeatsCache))}catch(r){kr.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=ug(),{heartbeatsToSend:r,unsentEntries:s}=rS(this._heartbeatsCache.heartbeats),i=xu(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return kr.warn(n),""}}}function ug(){return new Date().toISOString().substring(0,10)}function rS(t,e=eS){const n=[];let r=t.slice();for(const s of t){const i=n.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),cg(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),cg(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class sS{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return qT()?HT().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await ZI(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return lg(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return lg(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function cg(t){return xu(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iS(t){Hi(new Ws("platform-logger",e=>new vI(e),"PRIVATE")),Hi(new Ws("heartbeat",e=>new nS(e),"PRIVATE")),ms(ah,og,t),ms(ah,og,"esm2017"),ms("fire-js","")}iS("");var oS="firebase",aS="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ms(oS,aS,"app");function Af(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function $v(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const lS=$v,Bv=new Pa("auth","Firebase",$v());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Iu=new Sf("@firebase/auth");function uS(t,...e){Iu.logLevel<=de.WARN&&Iu.warn(`Auth (${no}): ${t}`,...e)}function Bl(t,...e){Iu.logLevel<=de.ERROR&&Iu.error(`Auth (${no}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ar(t,...e){throw Cf(t,...e)}function er(t,...e){return Cf(t,...e)}function zv(t,e,n){const r=Object.assign(Object.assign({},lS()),{[e]:n});return new Pa("auth","Firebase",r).create(e,{appName:t.name})}function xr(t){return zv(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Cf(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return Bv.create(t,...e)}function re(t,e,...n){if(!t)throw Cf(e,...n)}function pr(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Bl(e),new Error(e)}function Cr(t,e){t||pr(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ch(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function cS(){return dg()==="http:"||dg()==="https:"}function dg(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dS(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(cS()||UT()||"connection"in navigator)?navigator.onLine:!0}function hS(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ra{constructor(e,n){this.shortDelay=e,this.longDelay=n,Cr(n>e,"Short delay should be less than long delay!"),this.isMobile=OT()||$T()}get(){return dS()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pf(t,e){Cr(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qv{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;pr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;pr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;pr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fS={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pS=new Ra(3e4,6e4);function Da(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function ro(t,e,n,r,s={}){return Hv(t,s,async()=>{let i={},o={};r&&(e==="GET"?o=r:i={body:JSON.stringify(r)});const l=ba(Object.assign({key:t.config.apiKey},o)).slice(1),c=await t._getAdditionalHeaders();c["Content-Type"]="application/json",t.languageCode&&(c["X-Firebase-Locale"]=t.languageCode);const h=Object.assign({method:e,headers:c},i);return FT()||(h.referrerPolicy="no-referrer"),qv.fetch()(Wv(t,t.config.apiHost,n,l),h)})}async function Hv(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},fS),e);try{const s=new mS(t),i=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw Sl(t,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const l=i.ok?o.errorMessage:o.error.message,[c,h]=l.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw Sl(t,"credential-already-in-use",o);if(c==="EMAIL_EXISTS")throw Sl(t,"email-already-in-use",o);if(c==="USER_DISABLED")throw Sl(t,"user-disabled",o);const p=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(h)throw zv(t,p,h);Ar(t,p)}}catch(s){if(s instanceof Vr)throw s;Ar(t,"network-request-failed",{message:String(s)})}}async function bf(t,e,n,r,s={}){const i=await ro(t,e,n,r,s);return"mfaPendingCredential"in i&&Ar(t,"multi-factor-auth-required",{_serverResponse:i}),i}function Wv(t,e,n,r){const s=`${e}${n}?${r}`;return t.config.emulator?Pf(t.config,s):`${t.config.apiScheme}://${s}`}class mS{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(er(this.auth,"network-request-failed")),pS.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Sl(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=er(t,e,r);return s.customData._tokenResponse=n,s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gS(t,e){return ro(t,"POST","/v1/accounts:delete",e)}async function Kv(t,e){return ro(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qo(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function yS(t,e=!1){const n=Nt(t),r=await n.getIdToken(e),s=Rf(r);re(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const i=typeof s.firebase=="object"?s.firebase:void 0,o=i==null?void 0:i.sign_in_provider;return{claims:s,token:r,authTime:Qo(od(s.auth_time)),issuedAtTime:Qo(od(s.iat)),expirationTime:Qo(od(s.exp)),signInProvider:o||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function od(t){return Number(t)*1e3}function Rf(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Bl("JWT malformed, contained fewer than 3 sections"),null;try{const s=bv(n);return s?JSON.parse(s):(Bl("Failed to decode base64 JWT payload"),null)}catch(s){return Bl("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function hg(t){const e=Rf(t);return re(e,"internal-error"),re(typeof e.exp<"u","internal-error"),re(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function va(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof Vr&&vS(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function vS({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _S{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const s=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dh{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Qo(this.lastLoginAt),this.creationTime=Qo(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Su(t){var e;const n=t.auth,r=await t.getIdToken(),s=await va(t,Kv(n,{idToken:r}));re(s==null?void 0:s.users.length,n,"internal-error");const i=s.users[0];t._notifyReloadListener(i);const o=!((e=i.providerUserInfo)===null||e===void 0)&&e.length?Gv(i.providerUserInfo):[],l=xS(t.providerData,o),c=t.isAnonymous,h=!(t.email&&i.passwordHash)&&!(l!=null&&l.length),p=c?h:!1,m={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:l,metadata:new dh(i.createdAt,i.lastLoginAt),isAnonymous:p};Object.assign(t,m)}async function wS(t){const e=Nt(t);await Su(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function xS(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function Gv(t){return t.map(e=>{var{providerId:n}=e,r=Af(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ES(t,e){const n=await Hv(t,{},async()=>{const r=ba({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:i}=t.config,o=Wv(t,s,"/v1/token",`key=${i}`),l=await t._getAdditionalHeaders();return l["Content-Type"]="application/x-www-form-urlencoded",qv.fetch()(o,{method:"POST",headers:l,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function TS(t,e){return ro(t,"POST","/v2/accounts:revokeToken",Da(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ji{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){re(e.idToken,"internal-error"),re(typeof e.idToken<"u","internal-error"),re(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):hg(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){re(e.length!==0,"internal-error");const n=hg(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(re(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:i}=await ES(e,n);this.updateTokensAndExpiration(r,s,Number(i))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:i}=n,o=new ji;return r&&(re(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),s&&(re(typeof s=="string","internal-error",{appName:e}),o.accessToken=s),i&&(re(typeof i=="number","internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new ji,this.toJSON())}_performRefresh(){return pr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qr(t,e){re(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class mr{constructor(e){var{uid:n,auth:r,stsTokenManager:s}=e,i=Af(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new _S(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new dh(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const n=await va(this,this.stsTokenManager.getToken(this.auth,e));return re(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return yS(this,e)}reload(){return wS(this)}_assign(e){this!==e&&(re(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new mr(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){re(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Su(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Xn(this.auth.app))return Promise.reject(xr(this.auth));const e=await this.getIdToken();return await va(this,gS(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,s,i,o,l,c,h,p;const m=(r=n.displayName)!==null&&r!==void 0?r:void 0,g=(s=n.email)!==null&&s!==void 0?s:void 0,k=(i=n.phoneNumber)!==null&&i!==void 0?i:void 0,b=(o=n.photoURL)!==null&&o!==void 0?o:void 0,P=(l=n.tenantId)!==null&&l!==void 0?l:void 0,j=(c=n._redirectEventId)!==null&&c!==void 0?c:void 0,S=(h=n.createdAt)!==null&&h!==void 0?h:void 0,_=(p=n.lastLoginAt)!==null&&p!==void 0?p:void 0,{uid:N,emailVerified:D,isAnonymous:$,providerData:F,stsTokenManager:w}=n;re(N&&w,e,"internal-error");const v=ji.fromJSON(this.name,w);re(typeof N=="string",e,"internal-error"),qr(m,e.name),qr(g,e.name),re(typeof D=="boolean",e,"internal-error"),re(typeof $=="boolean",e,"internal-error"),qr(k,e.name),qr(b,e.name),qr(P,e.name),qr(j,e.name),qr(S,e.name),qr(_,e.name);const x=new mr({uid:N,auth:e,email:g,emailVerified:D,displayName:m,isAnonymous:$,photoURL:b,phoneNumber:k,tenantId:P,stsTokenManager:v,createdAt:S,lastLoginAt:_});return F&&Array.isArray(F)&&(x.providerData=F.map(T=>Object.assign({},T))),j&&(x._redirectEventId=j),x}static async _fromIdTokenResponse(e,n,r=!1){const s=new ji;s.updateFromServerResponse(n);const i=new mr({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await Su(i),i}static async _fromGetAccountInfoResponse(e,n,r){const s=n.users[0];re(s.localId!==void 0,"internal-error");const i=s.providerUserInfo!==void 0?Gv(s.providerUserInfo):[],o=!(s.email&&s.passwordHash)&&!(i!=null&&i.length),l=new ji;l.updateFromIdToken(r);const c=new mr({uid:s.localId,auth:e,stsTokenManager:l,isAnonymous:o}),h={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:i,metadata:new dh(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(i!=null&&i.length)};return Object.assign(c,h),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fg=new Map;function gr(t){Cr(t instanceof Function,"Expected a class definition");let e=fg.get(t);return e?(Cr(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,fg.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qv{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}Qv.type="NONE";const pg=Qv;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zl(t,e,n){return`firebase:${t}:${e}:${n}`}class Vi{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:i}=this.auth;this.fullUserKey=zl(this.userKey,s.apiKey,i),this.fullPersistenceKey=zl("persistence",s.apiKey,i),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?mr._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new Vi(gr(pg),e,r);const s=(await Promise.all(n.map(async h=>{if(await h._isAvailable())return h}))).filter(h=>h);let i=s[0]||gr(pg);const o=zl(r,e.config.apiKey,e.name);let l=null;for(const h of n)try{const p=await h._get(o);if(p){const m=mr._fromJSON(e,p);h!==i&&(l=m),i=h;break}}catch{}const c=s.filter(h=>h._shouldAllowMigration);return!i._shouldAllowMigration||!c.length?new Vi(i,e,r):(i=c[0],l&&await i._set(o,l.toJSON()),await Promise.all(n.map(async h=>{if(h!==i)try{await h._remove(o)}catch{}})),new Vi(i,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mg(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Zv(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Yv(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(t_(e))return"Blackberry";if(n_(e))return"Webos";if(Xv(e))return"Safari";if((e.includes("chrome/")||Jv(e))&&!e.includes("edge/"))return"Chrome";if(e_(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function Yv(t=$t()){return/firefox\//i.test(t)}function Xv(t=$t()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Jv(t=$t()){return/crios\//i.test(t)}function Zv(t=$t()){return/iemobile/i.test(t)}function e_(t=$t()){return/android/i.test(t)}function t_(t=$t()){return/blackberry/i.test(t)}function n_(t=$t()){return/webos/i.test(t)}function Df(t=$t()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function IS(t=$t()){var e;return Df(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function SS(){return BT()&&document.documentMode===10}function r_(t=$t()){return Df(t)||e_(t)||n_(t)||t_(t)||/windows phone/i.test(t)||Zv(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function s_(t,e=[]){let n;switch(t){case"Browser":n=mg($t());break;case"Worker":n=`${mg($t())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${no}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NS{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=i=>new Promise((o,l)=>{try{const c=e(i);o(c)}catch(c){l(c)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kS(t,e={}){return ro(t,"GET","/v2/passwordPolicy",Da(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AS=6;class CS{constructor(e){var n,r,s,i;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:AS,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(i=e.forceUpgradeOnSignin)!==null&&i!==void 0?i:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,s,i,o,l;const c={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,c),this.validatePasswordCharacterOptions(e,c),c.isValid&&(c.isValid=(n=c.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),c.isValid&&(c.isValid=(r=c.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),c.isValid&&(c.isValid=(s=c.containsLowercaseLetter)!==null&&s!==void 0?s:!0),c.isValid&&(c.isValid=(i=c.containsUppercaseLetter)!==null&&i!==void 0?i:!0),c.isValid&&(c.isValid=(o=c.containsNumericCharacter)!==null&&o!==void 0?o:!0),c.isValid&&(c.isValid=(l=c.containsNonAlphanumericCharacter)!==null&&l!==void 0?l:!0),c}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,s,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PS{constructor(e,n,r,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new gg(this),this.idTokenSubscription=new gg(this),this.beforeStateQueue=new NS(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Bv,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=gr(n)),this._initializationPromise=this.queue(async()=>{var r,s;if(!this._deleted&&(this.persistenceManager=await Vi.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((s=this.currentUser)===null||s===void 0?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Kv(this,{idToken:e}),r=await mr._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(Xn(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(l=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(l,l))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let s=r,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,l=s==null?void 0:s._redirectEventId,c=await this.tryRedirectSignIn(e);(!o||o===l)&&(c!=null&&c.user)&&(s=c.user,i=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(s)}catch(o){s=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return re(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Su(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=hS()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Xn(this.app))return Promise.reject(xr(this));const n=e?Nt(e):null;return n&&re(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&re(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Xn(this.app)?Promise.reject(xr(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Xn(this.app)?Promise.reject(xr(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(gr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await kS(this),n=new CS(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Pa("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await TS(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&gr(e)||this._popupRedirectResolver;re(n,this,"argument-error"),this.redirectPersistenceManager=await Vi.create(this,[gr(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const i=typeof n=="function"?n:n.next.bind(n);let o=!1;const l=this._isInitialized?Promise.resolve():this._initializationPromise;if(re(l,this,"internal-error"),l.then(()=>{o||i(this.currentUser)}),typeof n=="function"){const c=e.addObserver(n,r,s);return()=>{o=!0,c()}}else{const c=e.addObserver(n);return()=>{o=!0,c()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return re(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=s_(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const s=await this._getAppCheckToken();return s&&(n["X-Firebase-AppCheck"]=s),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&uS(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function ja(t){return Nt(t)}class gg{constructor(e){this.auth=e,this.observer=null,this.addObserver=YT(n=>this.observer=n)}get next(){return re(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let jf={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function bS(t){jf=t}function RS(t){return jf.loadJS(t)}function DS(){return jf.gapiScript}function jS(t){return`__${t}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VS(t,e){const n=kf(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),i=n.getOptions();if(Eu(i,e??{}))return s;Ar(s,"already-initialized")}return n.initialize({options:e})}function LS(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(gr);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function OS(t,e,n){const r=ja(t);re(r._canInitEmulator,r,"emulator-config-failed"),re(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!1,i=i_(e),{host:o,port:l}=MS(e),c=l===null?"":`:${l}`;r.config.emulator={url:`${i}//${o}${c}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:l,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:s})}),FS()}function i_(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function MS(t){const e=i_(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const i=s[1];return{host:i,port:yg(r.substr(i.length+1))}}else{const[i,o]=r.split(":");return{host:i,port:yg(o)}}}function yg(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function FS(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o_{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return pr("not implemented")}_getIdTokenResponse(e){return pr("not implemented")}_linkToIdToken(e,n){return pr("not implemented")}_getReauthenticationResolver(e){return pr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Li(t,e){return bf(t,"POST","/v1/accounts:signInWithIdp",Da(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const US="http://localhost";class Ks extends o_{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Ks(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Ar("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s}=n,i=Af(n,["providerId","signInMethod"]);if(!r||!s)return null;const o=new Ks(r,s);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return Li(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Li(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Li(e,n)}buildRequest(){const e={requestUri:US,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=ba(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a_{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Va extends a_{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qr extends Va{constructor(){super("facebook.com")}static credential(e){return Ks._fromParams({providerId:Qr.PROVIDER_ID,signInMethod:Qr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Qr.credentialFromTaggedObject(e)}static credentialFromError(e){return Qr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Qr.credential(e.oauthAccessToken)}catch{return null}}}Qr.FACEBOOK_SIGN_IN_METHOD="facebook.com";Qr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yr extends Va{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Ks._fromParams({providerId:Yr.PROVIDER_ID,signInMethod:Yr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Yr.credentialFromTaggedObject(e)}static credentialFromError(e){return Yr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return Yr.credential(n,r)}catch{return null}}}Yr.GOOGLE_SIGN_IN_METHOD="google.com";Yr.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xr extends Va{constructor(){super("github.com")}static credential(e){return Ks._fromParams({providerId:Xr.PROVIDER_ID,signInMethod:Xr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Xr.credentialFromTaggedObject(e)}static credentialFromError(e){return Xr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Xr.credential(e.oauthAccessToken)}catch{return null}}}Xr.GITHUB_SIGN_IN_METHOD="github.com";Xr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jr extends Va{constructor(){super("twitter.com")}static credential(e,n){return Ks._fromParams({providerId:Jr.PROVIDER_ID,signInMethod:Jr.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Jr.credentialFromTaggedObject(e)}static credentialFromError(e){return Jr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return Jr.credential(n,r)}catch{return null}}}Jr.TWITTER_SIGN_IN_METHOD="twitter.com";Jr.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $S(t,e){return bf(t,"POST","/v1/accounts:signUp",Da(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pr{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const i=await mr._fromIdTokenResponse(e,r,s),o=vg(r);return new Pr({user:i,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=vg(r);return new Pr({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function vg(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function BS(t){var e;if(Xn(t.app))return Promise.reject(xr(t));const n=ja(t);if(await n._initializationPromise,!((e=n.currentUser)===null||e===void 0)&&e.isAnonymous)return new Pr({user:n.currentUser,providerId:null,operationType:"signIn"});const r=await $S(n,{returnSecureToken:!0}),s=await Pr._fromIdTokenResponse(n,"signIn",r,!0);return await n._updateCurrentUser(s.user),s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nu extends Vr{constructor(e,n,r,s){var i;super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,Nu.prototype),this.customData={appName:e.name,tenantId:(i=e.tenantId)!==null&&i!==void 0?i:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new Nu(e,n,r,s)}}function l_(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?Nu._fromErrorAndOperation(t,i,e,r):i})}async function zS(t,e,n=!1){const r=await va(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Pr._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qS(t,e,n=!1){const{auth:r}=t;if(Xn(r.app))return Promise.reject(xr(r));const s="reauthenticate";try{const i=await va(t,l_(r,s,e,t),n);re(i.idToken,r,"internal-error");const o=Rf(i.idToken);re(o,r,"internal-error");const{sub:l}=o;return re(t.uid===l,r,"user-mismatch"),Pr._forOperation(t,s,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&Ar(r,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function HS(t,e,n=!1){if(Xn(t.app))return Promise.reject(xr(t));const r="signIn",s=await l_(t,r,e),i=await Pr._fromIdTokenResponse(t,r,s);return n||await t._updateCurrentUser(i.user),i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function WS(t,e){return bf(t,"POST","/v1/accounts:signInWithCustomToken",Da(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function KS(t,e){if(Xn(t.app))return Promise.reject(xr(t));const n=ja(t),r=await WS(n,{token:e,returnSecureToken:!0}),s=await Pr._fromIdTokenResponse(n,"signIn",r);return await n._updateCurrentUser(s.user),s}function GS(t,e,n,r){return Nt(t).onIdTokenChanged(e,n,r)}function QS(t,e,n){return Nt(t).beforeAuthStateChanged(e,n)}function YS(t,e,n,r){return Nt(t).onAuthStateChanged(e,n,r)}const ku="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u_{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(ku,"1"),this.storage.removeItem(ku),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XS=1e3,JS=10;class c_ extends u_{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=r_(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,l,c)=>{this.notifyListeners(o,c)});return}const r=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},i=this.storage.getItem(r);SS()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,JS):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},XS)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}c_.type="LOCAL";const ZS=c_;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d_ extends u_{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}d_.type="SESSION";const h_=d_;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eN(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nc{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const r=new nc(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:s,data:i}=n.data,o=this.handlersMap[s];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const l=Array.from(o).map(async h=>h(n.origin,i)),c=await eN(l);n.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:c})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}nc.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vf(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tN{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let i,o;return new Promise((l,c)=>{const h=Vf("",20);s.port1.start();const p=setTimeout(()=>{c(new Error("unsupported_event"))},r);o={messageChannel:s,onMessage(m){const g=m;if(g.data.eventId===h)switch(g.data.status){case"ack":clearTimeout(p),i=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),l(g.data.response);break;default:clearTimeout(p),clearTimeout(i),c(new Error("invalid_response"));break}}},this.handlers.add(o),s.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:h,data:n},[s.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tr(){return window}function nN(t){tr().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function f_(){return typeof tr().WorkerGlobalScope<"u"&&typeof tr().importScripts=="function"}async function rN(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function sN(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function iN(){return f_()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p_="firebaseLocalStorageDb",oN=1,Au="firebaseLocalStorage",m_="fbase_key";class La{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function rc(t,e){return t.transaction([Au],e?"readwrite":"readonly").objectStore(Au)}function aN(){const t=indexedDB.deleteDatabase(p_);return new La(t).toPromise()}function hh(){const t=indexedDB.open(p_,oN);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(Au,{keyPath:m_})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(Au)?e(r):(r.close(),await aN(),e(await hh()))})})}async function _g(t,e,n){const r=rc(t,!0).put({[m_]:e,value:n});return new La(r).toPromise()}async function lN(t,e){const n=rc(t,!1).get(e),r=await new La(n).toPromise();return r===void 0?null:r.value}function wg(t,e){const n=rc(t,!0).delete(e);return new La(n).toPromise()}const uN=800,cN=3;class g_{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await hh(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>cN)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return f_()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=nc._getInstance(iN()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await rN(),!this.activeServiceWorker)return;this.sender=new tN(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||sN()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await hh();return await _g(e,ku,"1"),await wg(e,ku),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>_g(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>lN(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>wg(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const i=rc(s,!1).getAll();return new La(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:i}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(i)&&(this.notifyListeners(s,i),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),uN)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}g_.type="LOCAL";const dN=g_;new Ra(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hN(t,e){return e?gr(e):(re(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lf extends o_{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Li(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Li(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Li(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function fN(t){return HS(t.auth,new Lf(t),t.bypassAuthState)}function pN(t){const{auth:e,user:n}=t;return re(n,e,"internal-error"),qS(n,new Lf(t),t.bypassAuthState)}async function mN(t){const{auth:e,user:n}=t;return re(n,e,"internal-error"),zS(n,new Lf(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y_{constructor(e,n,r,s,i=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:s,tenantId:i,error:o,type:l}=e;if(o){this.reject(o);return}const c={auth:this.auth,requestUri:n,sessionId:r,tenantId:i||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(l)(c))}catch(h){this.reject(h)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return fN;case"linkViaPopup":case"linkViaRedirect":return mN;case"reauthViaPopup":case"reauthViaRedirect":return pN;default:Ar(this.auth,"internal-error")}}resolve(e){Cr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Cr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gN=new Ra(2e3,1e4);class Ni extends y_{constructor(e,n,r,s,i){super(e,n,s,i),this.provider=r,this.authWindow=null,this.pollId=null,Ni.currentPopupAction&&Ni.currentPopupAction.cancel(),Ni.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return re(e,this.auth,"internal-error"),e}async onExecution(){Cr(this.filter.length===1,"Popup operations only handle one event");const e=Vf();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(er(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(er(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Ni.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(er(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,gN.get())};e()}}Ni.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yN="pendingRedirect",ql=new Map;class vN extends y_{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=ql.get(this.auth._key());if(!e){try{const r=await _N(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}ql.set(this.auth._key(),e)}return this.bypassAuthState||ql.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function _N(t,e){const n=EN(e),r=xN(t);if(!await r._isAvailable())return!1;const s=await r._get(n)==="true";return await r._remove(n),s}function wN(t,e){ql.set(t._key(),e)}function xN(t){return gr(t._redirectPersistence)}function EN(t){return zl(yN,t.config.apiKey,t.name)}async function TN(t,e,n=!1){if(Xn(t.app))return Promise.reject(xr(t));const r=ja(t),s=hN(r,e),o=await new vN(r,s,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IN=10*60*1e3;class SN{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!NN(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!v_(e)){const s=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(er(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=IN&&this.cachedEventUids.clear(),this.cachedEventUids.has(xg(e))}saveEventToCache(e){this.cachedEventUids.add(xg(e)),this.lastProcessedEventTime=Date.now()}}function xg(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function v_({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function NN(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return v_(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kN(t,e={}){return ro(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AN=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,CN=/^https?/;async function PN(t){if(t.config.emulator)return;const{authorizedDomains:e}=await kN(t);for(const n of e)try{if(bN(n))return}catch{}Ar(t,"unauthorized-domain")}function bN(t){const e=ch(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!CN.test(n))return!1;if(AN.test(t))return r===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RN=new Ra(3e4,6e4);function Eg(){const t=tr().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function DN(t){return new Promise((e,n)=>{var r,s,i;function o(){Eg(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Eg(),n(er(t,"network-request-failed"))},timeout:RN.get()})}if(!((s=(r=tr().gapi)===null||r===void 0?void 0:r.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((i=tr().gapi)===null||i===void 0)&&i.load)o();else{const l=jS("iframefcb");return tr()[l]=()=>{gapi.load?o():n(er(t,"network-request-failed"))},RS(`${DS()}?onload=${l}`).catch(c=>n(c))}}).catch(e=>{throw Hl=null,e})}let Hl=null;function jN(t){return Hl=Hl||DN(t),Hl}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VN=new Ra(5e3,15e3),LN="__/auth/iframe",ON="emulator/auth/iframe",MN={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},FN=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function UN(t){const e=t.config;re(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?Pf(e,ON):`https://${t.config.authDomain}/${LN}`,r={apiKey:e.apiKey,appName:t.name,v:no},s=FN.get(t.config.apiHost);s&&(r.eid=s);const i=t._getFrameworks();return i.length&&(r.fw=i.join(",")),`${n}?${ba(r).slice(1)}`}async function $N(t){const e=await jN(t),n=tr().gapi;return re(n,t,"internal-error"),e.open({where:document.body,url:UN(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:MN,dontclear:!0},r=>new Promise(async(s,i)=>{await r.restyle({setHideOnLeave:!1});const o=er(t,"network-request-failed"),l=tr().setTimeout(()=>{i(o)},VN.get());function c(){tr().clearTimeout(l),s(r)}r.ping(c).then(c,()=>{i(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BN={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},zN=500,qN=600,HN="_blank",WN="http://localhost";class Tg{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function KN(t,e,n,r=zN,s=qN){const i=Math.max((window.screen.availHeight-s)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let l="";const c=Object.assign(Object.assign({},BN),{width:r.toString(),height:s.toString(),top:i,left:o}),h=$t().toLowerCase();n&&(l=Jv(h)?HN:n),Yv(h)&&(e=e||WN,c.scrollbars="yes");const p=Object.entries(c).reduce((g,[k,b])=>`${g}${k}=${b},`,"");if(IS(h)&&l!=="_self")return GN(e||"",l),new Tg(null);const m=window.open(e||"",l,p);re(m,t,"popup-blocked");try{m.focus()}catch{}return new Tg(m)}function GN(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QN="__/auth/handler",YN="emulator/auth/handler",XN=encodeURIComponent("fac");async function Ig(t,e,n,r,s,i){re(t.config.authDomain,t,"auth-domain-config-required"),re(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:no,eventId:s};if(e instanceof a_){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",QT(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[p,m]of Object.entries({}))o[p]=m}if(e instanceof Va){const p=e.getScopes().filter(m=>m!=="");p.length>0&&(o.scopes=p.join(","))}t.tenantId&&(o.tid=t.tenantId);const l=o;for(const p of Object.keys(l))l[p]===void 0&&delete l[p];const c=await t._getAppCheckToken(),h=c?`#${XN}=${encodeURIComponent(c)}`:"";return`${JN(t)}?${ba(l).slice(1)}${h}`}function JN({config:t}){return t.emulator?Pf(t,YN):`https://${t.authDomain}/${QN}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ad="webStorageSupport";class ZN{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=h_,this._completeRedirectFn=TN,this._overrideRedirectResult=wN}async _openPopup(e,n,r,s){var i;Cr((i=this.eventManagers[e._key()])===null||i===void 0?void 0:i.manager,"_initialize() not called before _openPopup()");const o=await Ig(e,n,r,ch(),s);return KN(e,o,Vf())}async _openRedirect(e,n,r,s){await this._originValidation(e);const i=await Ig(e,n,r,ch(),s);return nN(i),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:i}=this.eventManagers[n];return s?Promise.resolve(s):(Cr(i,"If manager is not set, promise should be"),i)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await $N(e),r=new SN(e);return n.register("authEvent",s=>(re(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(ad,{type:ad},s=>{var i;const o=(i=s==null?void 0:s[0])===null||i===void 0?void 0:i[ad];o!==void 0&&n(!!o),Ar(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=PN(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return r_()||Xv()||Df()}}const ek=ZN;var Sg="@firebase/auth",Ng="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tk{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){re(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nk(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function rk(t){Hi(new Ws("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:o,authDomain:l}=r.options;re(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const c={apiKey:o,authDomain:l,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:s_(t)},h=new PS(r,s,i,c);return LS(h,n),h},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Hi(new Ws("auth-internal",e=>{const n=ja(e.getProvider("auth").getImmediate());return(r=>new tk(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),ms(Sg,Ng,nk(t)),ms(Sg,Ng,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sk=5*60,ik=jv("authIdTokenMaxAge")||sk;let kg=null;const ok=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>ik)return;const s=n==null?void 0:n.token;kg!==s&&(kg=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function ak(t=Mv()){const e=kf(t,"auth");if(e.isInitialized())return e.getImmediate();const n=VS(t,{popupRedirectResolver:ek,persistence:[dN,ZS,h_]}),r=jv("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(r,location.origin);if(location.origin===i.origin){const o=ok(i.toString());QS(n,o,()=>o(n.currentUser)),GS(n,l=>o(l))}}const s=Rv("auth");return s&&OS(n,`http://${s}`),n}function lk(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}bS({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const i=er("internal-error");i.customData=s,n(i)},r.type="text/javascript",r.charset="UTF-8",lk().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});rk("Browser");var Ag=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Us,__;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(w,v){function x(){}x.prototype=v.prototype,w.D=v.prototype,w.prototype=new x,w.prototype.constructor=w,w.C=function(T,A,C){for(var I=Array(arguments.length-2),Qe=2;Qe<arguments.length;Qe++)I[Qe-2]=arguments[Qe];return v.prototype[A].apply(T,I)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(w,v,x){x||(x=0);var T=Array(16);if(typeof v=="string")for(var A=0;16>A;++A)T[A]=v.charCodeAt(x++)|v.charCodeAt(x++)<<8|v.charCodeAt(x++)<<16|v.charCodeAt(x++)<<24;else for(A=0;16>A;++A)T[A]=v[x++]|v[x++]<<8|v[x++]<<16|v[x++]<<24;v=w.g[0],x=w.g[1],A=w.g[2];var C=w.g[3],I=v+(C^x&(A^C))+T[0]+3614090360&4294967295;v=x+(I<<7&4294967295|I>>>25),I=C+(A^v&(x^A))+T[1]+3905402710&4294967295,C=v+(I<<12&4294967295|I>>>20),I=A+(x^C&(v^x))+T[2]+606105819&4294967295,A=C+(I<<17&4294967295|I>>>15),I=x+(v^A&(C^v))+T[3]+3250441966&4294967295,x=A+(I<<22&4294967295|I>>>10),I=v+(C^x&(A^C))+T[4]+4118548399&4294967295,v=x+(I<<7&4294967295|I>>>25),I=C+(A^v&(x^A))+T[5]+1200080426&4294967295,C=v+(I<<12&4294967295|I>>>20),I=A+(x^C&(v^x))+T[6]+2821735955&4294967295,A=C+(I<<17&4294967295|I>>>15),I=x+(v^A&(C^v))+T[7]+4249261313&4294967295,x=A+(I<<22&4294967295|I>>>10),I=v+(C^x&(A^C))+T[8]+1770035416&4294967295,v=x+(I<<7&4294967295|I>>>25),I=C+(A^v&(x^A))+T[9]+2336552879&4294967295,C=v+(I<<12&4294967295|I>>>20),I=A+(x^C&(v^x))+T[10]+4294925233&4294967295,A=C+(I<<17&4294967295|I>>>15),I=x+(v^A&(C^v))+T[11]+2304563134&4294967295,x=A+(I<<22&4294967295|I>>>10),I=v+(C^x&(A^C))+T[12]+1804603682&4294967295,v=x+(I<<7&4294967295|I>>>25),I=C+(A^v&(x^A))+T[13]+4254626195&4294967295,C=v+(I<<12&4294967295|I>>>20),I=A+(x^C&(v^x))+T[14]+2792965006&4294967295,A=C+(I<<17&4294967295|I>>>15),I=x+(v^A&(C^v))+T[15]+1236535329&4294967295,x=A+(I<<22&4294967295|I>>>10),I=v+(A^C&(x^A))+T[1]+4129170786&4294967295,v=x+(I<<5&4294967295|I>>>27),I=C+(x^A&(v^x))+T[6]+3225465664&4294967295,C=v+(I<<9&4294967295|I>>>23),I=A+(v^x&(C^v))+T[11]+643717713&4294967295,A=C+(I<<14&4294967295|I>>>18),I=x+(C^v&(A^C))+T[0]+3921069994&4294967295,x=A+(I<<20&4294967295|I>>>12),I=v+(A^C&(x^A))+T[5]+3593408605&4294967295,v=x+(I<<5&4294967295|I>>>27),I=C+(x^A&(v^x))+T[10]+38016083&4294967295,C=v+(I<<9&4294967295|I>>>23),I=A+(v^x&(C^v))+T[15]+3634488961&4294967295,A=C+(I<<14&4294967295|I>>>18),I=x+(C^v&(A^C))+T[4]+3889429448&4294967295,x=A+(I<<20&4294967295|I>>>12),I=v+(A^C&(x^A))+T[9]+568446438&4294967295,v=x+(I<<5&4294967295|I>>>27),I=C+(x^A&(v^x))+T[14]+3275163606&4294967295,C=v+(I<<9&4294967295|I>>>23),I=A+(v^x&(C^v))+T[3]+4107603335&4294967295,A=C+(I<<14&4294967295|I>>>18),I=x+(C^v&(A^C))+T[8]+1163531501&4294967295,x=A+(I<<20&4294967295|I>>>12),I=v+(A^C&(x^A))+T[13]+2850285829&4294967295,v=x+(I<<5&4294967295|I>>>27),I=C+(x^A&(v^x))+T[2]+4243563512&4294967295,C=v+(I<<9&4294967295|I>>>23),I=A+(v^x&(C^v))+T[7]+1735328473&4294967295,A=C+(I<<14&4294967295|I>>>18),I=x+(C^v&(A^C))+T[12]+2368359562&4294967295,x=A+(I<<20&4294967295|I>>>12),I=v+(x^A^C)+T[5]+4294588738&4294967295,v=x+(I<<4&4294967295|I>>>28),I=C+(v^x^A)+T[8]+2272392833&4294967295,C=v+(I<<11&4294967295|I>>>21),I=A+(C^v^x)+T[11]+1839030562&4294967295,A=C+(I<<16&4294967295|I>>>16),I=x+(A^C^v)+T[14]+4259657740&4294967295,x=A+(I<<23&4294967295|I>>>9),I=v+(x^A^C)+T[1]+2763975236&4294967295,v=x+(I<<4&4294967295|I>>>28),I=C+(v^x^A)+T[4]+1272893353&4294967295,C=v+(I<<11&4294967295|I>>>21),I=A+(C^v^x)+T[7]+4139469664&4294967295,A=C+(I<<16&4294967295|I>>>16),I=x+(A^C^v)+T[10]+3200236656&4294967295,x=A+(I<<23&4294967295|I>>>9),I=v+(x^A^C)+T[13]+681279174&4294967295,v=x+(I<<4&4294967295|I>>>28),I=C+(v^x^A)+T[0]+3936430074&4294967295,C=v+(I<<11&4294967295|I>>>21),I=A+(C^v^x)+T[3]+3572445317&4294967295,A=C+(I<<16&4294967295|I>>>16),I=x+(A^C^v)+T[6]+76029189&4294967295,x=A+(I<<23&4294967295|I>>>9),I=v+(x^A^C)+T[9]+3654602809&4294967295,v=x+(I<<4&4294967295|I>>>28),I=C+(v^x^A)+T[12]+3873151461&4294967295,C=v+(I<<11&4294967295|I>>>21),I=A+(C^v^x)+T[15]+530742520&4294967295,A=C+(I<<16&4294967295|I>>>16),I=x+(A^C^v)+T[2]+3299628645&4294967295,x=A+(I<<23&4294967295|I>>>9),I=v+(A^(x|~C))+T[0]+4096336452&4294967295,v=x+(I<<6&4294967295|I>>>26),I=C+(x^(v|~A))+T[7]+1126891415&4294967295,C=v+(I<<10&4294967295|I>>>22),I=A+(v^(C|~x))+T[14]+2878612391&4294967295,A=C+(I<<15&4294967295|I>>>17),I=x+(C^(A|~v))+T[5]+4237533241&4294967295,x=A+(I<<21&4294967295|I>>>11),I=v+(A^(x|~C))+T[12]+1700485571&4294967295,v=x+(I<<6&4294967295|I>>>26),I=C+(x^(v|~A))+T[3]+2399980690&4294967295,C=v+(I<<10&4294967295|I>>>22),I=A+(v^(C|~x))+T[10]+4293915773&4294967295,A=C+(I<<15&4294967295|I>>>17),I=x+(C^(A|~v))+T[1]+2240044497&4294967295,x=A+(I<<21&4294967295|I>>>11),I=v+(A^(x|~C))+T[8]+1873313359&4294967295,v=x+(I<<6&4294967295|I>>>26),I=C+(x^(v|~A))+T[15]+4264355552&4294967295,C=v+(I<<10&4294967295|I>>>22),I=A+(v^(C|~x))+T[6]+2734768916&4294967295,A=C+(I<<15&4294967295|I>>>17),I=x+(C^(A|~v))+T[13]+1309151649&4294967295,x=A+(I<<21&4294967295|I>>>11),I=v+(A^(x|~C))+T[4]+4149444226&4294967295,v=x+(I<<6&4294967295|I>>>26),I=C+(x^(v|~A))+T[11]+3174756917&4294967295,C=v+(I<<10&4294967295|I>>>22),I=A+(v^(C|~x))+T[2]+718787259&4294967295,A=C+(I<<15&4294967295|I>>>17),I=x+(C^(A|~v))+T[9]+3951481745&4294967295,w.g[0]=w.g[0]+v&4294967295,w.g[1]=w.g[1]+(A+(I<<21&4294967295|I>>>11))&4294967295,w.g[2]=w.g[2]+A&4294967295,w.g[3]=w.g[3]+C&4294967295}r.prototype.u=function(w,v){v===void 0&&(v=w.length);for(var x=v-this.blockSize,T=this.B,A=this.h,C=0;C<v;){if(A==0)for(;C<=x;)s(this,w,C),C+=this.blockSize;if(typeof w=="string"){for(;C<v;)if(T[A++]=w.charCodeAt(C++),A==this.blockSize){s(this,T),A=0;break}}else for(;C<v;)if(T[A++]=w[C++],A==this.blockSize){s(this,T),A=0;break}}this.h=A,this.o+=v},r.prototype.v=function(){var w=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);w[0]=128;for(var v=1;v<w.length-8;++v)w[v]=0;var x=8*this.o;for(v=w.length-8;v<w.length;++v)w[v]=x&255,x/=256;for(this.u(w),w=Array(16),v=x=0;4>v;++v)for(var T=0;32>T;T+=8)w[x++]=this.g[v]>>>T&255;return w};function i(w,v){var x=l;return Object.prototype.hasOwnProperty.call(x,w)?x[w]:x[w]=v(w)}function o(w,v){this.h=v;for(var x=[],T=!0,A=w.length-1;0<=A;A--){var C=w[A]|0;T&&C==v||(x[A]=C,T=!1)}this.g=x}var l={};function c(w){return-128<=w&&128>w?i(w,function(v){return new o([v|0],0>v?-1:0)}):new o([w|0],0>w?-1:0)}function h(w){if(isNaN(w)||!isFinite(w))return m;if(0>w)return j(h(-w));for(var v=[],x=1,T=0;w>=x;T++)v[T]=w/x|0,x*=4294967296;return new o(v,0)}function p(w,v){if(w.length==0)throw Error("number format error: empty string");if(v=v||10,2>v||36<v)throw Error("radix out of range: "+v);if(w.charAt(0)=="-")return j(p(w.substring(1),v));if(0<=w.indexOf("-"))throw Error('number format error: interior "-" character');for(var x=h(Math.pow(v,8)),T=m,A=0;A<w.length;A+=8){var C=Math.min(8,w.length-A),I=parseInt(w.substring(A,A+C),v);8>C?(C=h(Math.pow(v,C)),T=T.j(C).add(h(I))):(T=T.j(x),T=T.add(h(I)))}return T}var m=c(0),g=c(1),k=c(16777216);t=o.prototype,t.m=function(){if(P(this))return-j(this).m();for(var w=0,v=1,x=0;x<this.g.length;x++){var T=this.i(x);w+=(0<=T?T:4294967296+T)*v,v*=4294967296}return w},t.toString=function(w){if(w=w||10,2>w||36<w)throw Error("radix out of range: "+w);if(b(this))return"0";if(P(this))return"-"+j(this).toString(w);for(var v=h(Math.pow(w,6)),x=this,T="";;){var A=D(x,v).g;x=S(x,A.j(v));var C=((0<x.g.length?x.g[0]:x.h)>>>0).toString(w);if(x=A,b(x))return C+T;for(;6>C.length;)C="0"+C;T=C+T}},t.i=function(w){return 0>w?0:w<this.g.length?this.g[w]:this.h};function b(w){if(w.h!=0)return!1;for(var v=0;v<w.g.length;v++)if(w.g[v]!=0)return!1;return!0}function P(w){return w.h==-1}t.l=function(w){return w=S(this,w),P(w)?-1:b(w)?0:1};function j(w){for(var v=w.g.length,x=[],T=0;T<v;T++)x[T]=~w.g[T];return new o(x,~w.h).add(g)}t.abs=function(){return P(this)?j(this):this},t.add=function(w){for(var v=Math.max(this.g.length,w.g.length),x=[],T=0,A=0;A<=v;A++){var C=T+(this.i(A)&65535)+(w.i(A)&65535),I=(C>>>16)+(this.i(A)>>>16)+(w.i(A)>>>16);T=I>>>16,C&=65535,I&=65535,x[A]=I<<16|C}return new o(x,x[x.length-1]&-2147483648?-1:0)};function S(w,v){return w.add(j(v))}t.j=function(w){if(b(this)||b(w))return m;if(P(this))return P(w)?j(this).j(j(w)):j(j(this).j(w));if(P(w))return j(this.j(j(w)));if(0>this.l(k)&&0>w.l(k))return h(this.m()*w.m());for(var v=this.g.length+w.g.length,x=[],T=0;T<2*v;T++)x[T]=0;for(T=0;T<this.g.length;T++)for(var A=0;A<w.g.length;A++){var C=this.i(T)>>>16,I=this.i(T)&65535,Qe=w.i(A)>>>16,sn=w.i(A)&65535;x[2*T+2*A]+=I*sn,_(x,2*T+2*A),x[2*T+2*A+1]+=C*sn,_(x,2*T+2*A+1),x[2*T+2*A+1]+=I*Qe,_(x,2*T+2*A+1),x[2*T+2*A+2]+=C*Qe,_(x,2*T+2*A+2)}for(T=0;T<v;T++)x[T]=x[2*T+1]<<16|x[2*T];for(T=v;T<2*v;T++)x[T]=0;return new o(x,0)};function _(w,v){for(;(w[v]&65535)!=w[v];)w[v+1]+=w[v]>>>16,w[v]&=65535,v++}function N(w,v){this.g=w,this.h=v}function D(w,v){if(b(v))throw Error("division by zero");if(b(w))return new N(m,m);if(P(w))return v=D(j(w),v),new N(j(v.g),j(v.h));if(P(v))return v=D(w,j(v)),new N(j(v.g),v.h);if(30<w.g.length){if(P(w)||P(v))throw Error("slowDivide_ only works with positive integers.");for(var x=g,T=v;0>=T.l(w);)x=$(x),T=$(T);var A=F(x,1),C=F(T,1);for(T=F(T,2),x=F(x,2);!b(T);){var I=C.add(T);0>=I.l(w)&&(A=A.add(x),C=I),T=F(T,1),x=F(x,1)}return v=S(w,A.j(v)),new N(A,v)}for(A=m;0<=w.l(v);){for(x=Math.max(1,Math.floor(w.m()/v.m())),T=Math.ceil(Math.log(x)/Math.LN2),T=48>=T?1:Math.pow(2,T-48),C=h(x),I=C.j(v);P(I)||0<I.l(w);)x-=T,C=h(x),I=C.j(v);b(C)&&(C=g),A=A.add(C),w=S(w,I)}return new N(A,w)}t.A=function(w){return D(this,w).h},t.and=function(w){for(var v=Math.max(this.g.length,w.g.length),x=[],T=0;T<v;T++)x[T]=this.i(T)&w.i(T);return new o(x,this.h&w.h)},t.or=function(w){for(var v=Math.max(this.g.length,w.g.length),x=[],T=0;T<v;T++)x[T]=this.i(T)|w.i(T);return new o(x,this.h|w.h)},t.xor=function(w){for(var v=Math.max(this.g.length,w.g.length),x=[],T=0;T<v;T++)x[T]=this.i(T)^w.i(T);return new o(x,this.h^w.h)};function $(w){for(var v=w.g.length+1,x=[],T=0;T<v;T++)x[T]=w.i(T)<<1|w.i(T-1)>>>31;return new o(x,w.h)}function F(w,v){var x=v>>5;v%=32;for(var T=w.g.length-x,A=[],C=0;C<T;C++)A[C]=0<v?w.i(C+x)>>>v|w.i(C+x+1)<<32-v:w.i(C+x);return new o(A,w.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,__=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=h,o.fromString=p,Us=o}).apply(typeof Ag<"u"?Ag:typeof self<"u"?self:typeof window<"u"?window:{});var Nl=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var w_,Lo,x_,Wl,fh,E_,T_,I_;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(a,d,f){return a==Array.prototype||a==Object.prototype||(a[d]=f.value),a};function n(a){a=[typeof globalThis=="object"&&globalThis,a,typeof window=="object"&&window,typeof self=="object"&&self,typeof Nl=="object"&&Nl];for(var d=0;d<a.length;++d){var f=a[d];if(f&&f.Math==Math)return f}throw Error("Cannot find global object")}var r=n(this);function s(a,d){if(d)e:{var f=r;a=a.split(".");for(var y=0;y<a.length-1;y++){var R=a[y];if(!(R in f))break e;f=f[R]}a=a[a.length-1],y=f[a],d=d(y),d!=y&&d!=null&&e(f,a,{configurable:!0,writable:!0,value:d})}}function i(a,d){a instanceof String&&(a+="");var f=0,y=!1,R={next:function(){if(!y&&f<a.length){var V=f++;return{value:d(V,a[V]),done:!1}}return y=!0,{done:!0,value:void 0}}};return R[Symbol.iterator]=function(){return R},R}s("Array.prototype.values",function(a){return a||function(){return i(this,function(d,f){return f})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},l=this||self;function c(a){var d=typeof a;return d=d!="object"?d:a?Array.isArray(a)?"array":d:"null",d=="array"||d=="object"&&typeof a.length=="number"}function h(a){var d=typeof a;return d=="object"&&a!=null||d=="function"}function p(a,d,f){return a.call.apply(a.bind,arguments)}function m(a,d,f){if(!a)throw Error();if(2<arguments.length){var y=Array.prototype.slice.call(arguments,2);return function(){var R=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(R,y),a.apply(d,R)}}return function(){return a.apply(d,arguments)}}function g(a,d,f){return g=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?p:m,g.apply(null,arguments)}function k(a,d){var f=Array.prototype.slice.call(arguments,1);return function(){var y=f.slice();return y.push.apply(y,arguments),a.apply(this,y)}}function b(a,d){function f(){}f.prototype=d.prototype,a.aa=d.prototype,a.prototype=new f,a.prototype.constructor=a,a.Qb=function(y,R,V){for(var z=Array(arguments.length-2),Ne=2;Ne<arguments.length;Ne++)z[Ne-2]=arguments[Ne];return d.prototype[R].apply(y,z)}}function P(a){const d=a.length;if(0<d){const f=Array(d);for(let y=0;y<d;y++)f[y]=a[y];return f}return[]}function j(a,d){for(let f=1;f<arguments.length;f++){const y=arguments[f];if(c(y)){const R=a.length||0,V=y.length||0;a.length=R+V;for(let z=0;z<V;z++)a[R+z]=y[z]}else a.push(y)}}class S{constructor(d,f){this.i=d,this.j=f,this.h=0,this.g=null}get(){let d;return 0<this.h?(this.h--,d=this.g,this.g=d.next,d.next=null):d=this.i(),d}}function _(a){return/^[\s\xa0]*$/.test(a)}function N(){var a=l.navigator;return a&&(a=a.userAgent)?a:""}function D(a){return D[" "](a),a}D[" "]=function(){};var $=N().indexOf("Gecko")!=-1&&!(N().toLowerCase().indexOf("webkit")!=-1&&N().indexOf("Edge")==-1)&&!(N().indexOf("Trident")!=-1||N().indexOf("MSIE")!=-1)&&N().indexOf("Edge")==-1;function F(a,d,f){for(const y in a)d.call(f,a[y],y,a)}function w(a,d){for(const f in a)d.call(void 0,a[f],f,a)}function v(a){const d={};for(const f in a)d[f]=a[f];return d}const x="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function T(a,d){let f,y;for(let R=1;R<arguments.length;R++){y=arguments[R];for(f in y)a[f]=y[f];for(let V=0;V<x.length;V++)f=x[V],Object.prototype.hasOwnProperty.call(y,f)&&(a[f]=y[f])}}function A(a){var d=1;a=a.split(":");const f=[];for(;0<d&&a.length;)f.push(a.shift()),d--;return a.length&&f.push(a.join(":")),f}function C(a){l.setTimeout(()=>{throw a},0)}function I(){var a=X;let d=null;return a.g&&(d=a.g,a.g=a.g.next,a.g||(a.h=null),d.next=null),d}class Qe{constructor(){this.h=this.g=null}add(d,f){const y=sn.get();y.set(d,f),this.h?this.h.next=y:this.g=y,this.h=y}}var sn=new S(()=>new on,a=>a.reset());class on{constructor(){this.next=this.g=this.h=null}set(d,f){this.h=d,this.g=f,this.next=null}reset(){this.next=this.g=this.h=null}}let Bt,q=!1,X=new Qe,Z=()=>{const a=l.Promise.resolve(void 0);Bt=()=>{a.then(we)}};var we=()=>{for(var a;a=I();){try{a.h.call(a.g)}catch(f){C(f)}var d=sn;d.j(a),100>d.h&&(d.h++,a.next=d.g,d.g=a)}q=!1};function me(){this.s=this.s,this.C=this.C}me.prototype.s=!1,me.prototype.ma=function(){this.s||(this.s=!0,this.N())},me.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Se(a,d){this.type=a,this.g=this.target=d,this.defaultPrevented=!1}Se.prototype.h=function(){this.defaultPrevented=!0};var Ye=function(){if(!l.addEventListener||!Object.defineProperty)return!1;var a=!1,d=Object.defineProperty({},"passive",{get:function(){a=!0}});try{const f=()=>{};l.addEventListener("test",f,d),l.removeEventListener("test",f,d)}catch{}return a}();function yt(a,d){if(Se.call(this,a?a.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,a){var f=this.type=a.type,y=a.changedTouches&&a.changedTouches.length?a.changedTouches[0]:null;if(this.target=a.target||a.srcElement,this.g=d,d=a.relatedTarget){if($){e:{try{D(d.nodeName);var R=!0;break e}catch{}R=!1}R||(d=null)}}else f=="mouseover"?d=a.fromElement:f=="mouseout"&&(d=a.toElement);this.relatedTarget=d,y?(this.clientX=y.clientX!==void 0?y.clientX:y.pageX,this.clientY=y.clientY!==void 0?y.clientY:y.pageY,this.screenX=y.screenX||0,this.screenY=y.screenY||0):(this.clientX=a.clientX!==void 0?a.clientX:a.pageX,this.clientY=a.clientY!==void 0?a.clientY:a.pageY,this.screenX=a.screenX||0,this.screenY=a.screenY||0),this.button=a.button,this.key=a.key||"",this.ctrlKey=a.ctrlKey,this.altKey=a.altKey,this.shiftKey=a.shiftKey,this.metaKey=a.metaKey,this.pointerId=a.pointerId||0,this.pointerType=typeof a.pointerType=="string"?a.pointerType:At[a.pointerType]||"",this.state=a.state,this.i=a,a.defaultPrevented&&yt.aa.h.call(this)}}b(yt,Se);var At={2:"touch",3:"pen",4:"mouse"};yt.prototype.h=function(){yt.aa.h.call(this);var a=this.i;a.preventDefault?a.preventDefault():a.returnValue=!1};var Xe="closure_listenable_"+(1e6*Math.random()|0),Ns=0;function ir(a,d,f,y,R){this.listener=a,this.proxy=null,this.src=d,this.type=f,this.capture=!!y,this.ha=R,this.key=++Ns,this.da=this.fa=!1}function an(a){a.da=!0,a.listener=null,a.proxy=null,a.src=null,a.ha=null}function _n(a){this.src=a,this.g={},this.h=0}_n.prototype.add=function(a,d,f,y,R){var V=a.toString();a=this.g[V],a||(a=this.g[V]=[],this.h++);var z=un(a,d,y,R);return-1<z?(d=a[z],f||(d.fa=!1)):(d=new ir(d,this.src,V,!!y,R),d.fa=f,a.push(d)),d};function ln(a,d){var f=d.type;if(f in a.g){var y=a.g[f],R=Array.prototype.indexOf.call(y,d,void 0),V;(V=0<=R)&&Array.prototype.splice.call(y,R,1),V&&(an(d),a.g[f].length==0&&(delete a.g[f],a.h--))}}function un(a,d,f,y){for(var R=0;R<a.length;++R){var V=a[R];if(!V.da&&V.listener==d&&V.capture==!!f&&V.ha==y)return R}return-1}var dt="closure_lm_"+(1e6*Math.random()|0),wn={};function Qt(a,d,f,y,R){if(Array.isArray(d)){for(var V=0;V<d.length;V++)Qt(a,d[V],f,y,R);return null}return f=Lr(f),a&&a[Xe]?a.K(d,f,h(y)?!!y.capture:!1,R):or(a,d,f,!1,y,R)}function or(a,d,f,y,R,V){if(!d)throw Error("Invalid event type");var z=h(R)?!!R.capture:!!R,Ne=We(a);if(Ne||(a[dt]=Ne=new _n(a)),f=Ne.add(d,f,y,z,V),f.proxy)return f;if(y=ht(),f.proxy=y,y.src=a,y.listener=f,a.addEventListener)Ye||(R=z),R===void 0&&(R=!1),a.addEventListener(d.toString(),y,R);else if(a.attachEvent)a.attachEvent(Ct(d.toString()),y);else if(a.addListener&&a.removeListener)a.addListener(y);else throw Error("addEventListener and attachEvent are unavailable.");return f}function ht(){function a(f){return d.call(a.src,a.listener,f)}const d=En;return a}function zn(a,d,f,y,R){if(Array.isArray(d))for(var V=0;V<d.length;V++)zn(a,d[V],f,y,R);else y=h(y)?!!y.capture:!!y,f=Lr(f),a&&a[Xe]?(a=a.i,d=String(d).toString(),d in a.g&&(V=a.g[d],f=un(V,f,y,R),-1<f&&(an(V[f]),Array.prototype.splice.call(V,f,1),V.length==0&&(delete a.g[d],a.h--)))):a&&(a=We(a))&&(d=a.g[d.toString()],a=-1,d&&(a=un(d,f,y,R)),(f=-1<a?d[a]:null)&&xn(f))}function xn(a){if(typeof a!="number"&&a&&!a.da){var d=a.src;if(d&&d[Xe])ln(d.i,a);else{var f=a.type,y=a.proxy;d.removeEventListener?d.removeEventListener(f,y,a.capture):d.detachEvent?d.detachEvent(Ct(f),y):d.addListener&&d.removeListener&&d.removeListener(y),(f=We(d))?(ln(f,a),f.h==0&&(f.src=null,d[dt]=null)):an(a)}}}function Ct(a){return a in wn?wn[a]:wn[a]="on"+a}function En(a,d){if(a.da)a=!0;else{d=new yt(d,this);var f=a.listener,y=a.ha||a.src;a.fa&&xn(a),a=f.call(y,d)}return a}function We(a){return a=a[dt],a instanceof _n?a:null}var Be="__closure_events_fn_"+(1e9*Math.random()>>>0);function Lr(a){return typeof a=="function"?a:(a[Be]||(a[Be]=function(d){return a.handleEvent(d)}),a[Be])}function ze(){me.call(this),this.i=new _n(this),this.M=this,this.F=null}b(ze,me),ze.prototype[Xe]=!0,ze.prototype.removeEventListener=function(a,d,f,y){zn(this,a,d,f,y)};function it(a,d){var f,y=a.F;if(y)for(f=[];y;y=y.F)f.push(y);if(a=a.M,y=d.type||d,typeof d=="string")d=new Se(d,a);else if(d instanceof Se)d.target=d.target||a;else{var R=d;d=new Se(y,a),T(d,R)}if(R=!0,f)for(var V=f.length-1;0<=V;V--){var z=d.g=f[V];R=ar(z,y,!0,d)&&R}if(z=d.g=a,R=ar(z,y,!0,d)&&R,R=ar(z,y,!1,d)&&R,f)for(V=0;V<f.length;V++)z=d.g=f[V],R=ar(z,y,!1,d)&&R}ze.prototype.N=function(){if(ze.aa.N.call(this),this.i){var a=this.i,d;for(d in a.g){for(var f=a.g[d],y=0;y<f.length;y++)an(f[y]);delete a.g[d],a.h--}}this.F=null},ze.prototype.K=function(a,d,f,y){return this.i.add(String(a),d,!1,f,y)},ze.prototype.L=function(a,d,f,y){return this.i.add(String(a),d,!0,f,y)};function ar(a,d,f,y){if(d=a.i.g[String(d)],!d)return!0;d=d.concat();for(var R=!0,V=0;V<d.length;++V){var z=d[V];if(z&&!z.da&&z.capture==f){var Ne=z.listener,_t=z.ha||z.src;z.fa&&ln(a.i,z),R=Ne.call(_t,y)!==!1&&R}}return R&&!y.defaultPrevented}function Or(a,d,f){if(typeof a=="function")f&&(a=g(a,f));else if(a&&typeof a.handleEvent=="function")a=g(a.handleEvent,a);else throw Error("Invalid listener argument");return 2147483647<Number(d)?-1:l.setTimeout(a,d||0)}function ks(a){a.g=Or(()=>{a.g=null,a.i&&(a.i=!1,ks(a))},a.l);const d=a.h;a.h=null,a.m.apply(null,d)}class Mr extends me{constructor(d,f){super(),this.m=d,this.l=f,this.h=null,this.i=!1,this.g=null}j(d){this.h=arguments,this.g?this.i=!0:ks(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ot(a){me.call(this),this.h=a,this.g={}}b(ot,me);var As=[];function lr(a){F(a.g,function(d,f){this.g.hasOwnProperty(f)&&xn(d)},a),a.g={}}ot.prototype.N=function(){ot.aa.N.call(this),lr(this)},ot.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var M=l.JSON.stringify,Q=l.JSON.parse,le=class{stringify(a){return l.JSON.stringify(a,void 0)}parse(a){return l.JSON.parse(a,void 0)}};function he(){}he.prototype.h=null;function Je(a){return a.h||(a.h=a.i())}function Le(){}var cn={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Pt(){Se.call(this,"d")}b(Pt,Se);function xe(){Se.call(this,"c")}b(xe,Se);var ke={},Ze=null;function Oe(){return Ze=Ze||new ze}ke.La="serverreachability";function Pe(a){Se.call(this,ke.La,a)}b(Pe,Se);function et(a){const d=Oe();it(d,new Pe(d))}ke.STAT_EVENT="statevent";function tt(a,d){Se.call(this,ke.STAT_EVENT,a),this.stat=d}b(tt,Se);function Ae(a){const d=Oe();it(d,new tt(d,a))}ke.Ma="timingevent";function zt(a,d){Se.call(this,ke.Ma,a),this.size=d}b(zt,Se);function qt(a,d){if(typeof a!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){a()},d)}function qn(){this.g=!0}qn.prototype.xa=function(){this.g=!1};function ao(a,d,f,y,R,V){a.info(function(){if(a.g)if(V)for(var z="",Ne=V.split("&"),_t=0;_t<Ne.length;_t++){var ve=Ne[_t].split("=");if(1<ve.length){var bt=ve[0];ve=ve[1];var Rt=bt.split("_");z=2<=Rt.length&&Rt[1]=="type"?z+(bt+"="+ve+"&"):z+(bt+"=redacted&")}}else z=null;else z=V;return"XMLHTTP REQ ("+y+") [attempt "+R+"]: "+d+`
`+f+`
`+z})}function Tn(a,d,f,y,R,V,z){a.info(function(){return"XMLHTTP RESP ("+y+") [ attempt "+R+"]: "+d+`
`+f+`
`+V+" "+z})}function Yt(a,d,f,y){a.info(function(){return"XMLHTTP TEXT ("+d+"): "+Ec(a,f)+(y?" "+y:"")})}function lo(a,d){a.info(function(){return"TIMEOUT: "+d})}qn.prototype.info=function(){};function Ec(a,d){if(!a.g)return d;if(!d)return null;try{var f=JSON.parse(d);if(f){for(a=0;a<f.length;a++)if(Array.isArray(f[a])){var y=f[a];if(!(2>y.length)){var R=y[1];if(Array.isArray(R)&&!(1>R.length)){var V=R[0];if(V!="noop"&&V!="stop"&&V!="close")for(var z=1;z<R.length;z++)R[z]=""}}}}return M(f)}catch{return d}}var ni={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},uo={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},co;function ri(){}b(ri,he),ri.prototype.g=function(){return new XMLHttpRequest},ri.prototype.i=function(){return{}},co=new ri;function Hn(a,d,f,y){this.j=a,this.i=d,this.l=f,this.R=y||1,this.U=new ot(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Ha}function Ha(){this.i=null,this.g="",this.h=!1}var Wa={},ho={};function fo(a,d,f){a.L=1,a.v=Za(fe(d)),a.m=f,a.P=!0,Ka(a,null)}function Ka(a,d){a.F=Date.now(),Cs(a),a.A=fe(a.v);var f=a.A,y=a.R;Array.isArray(y)||(y=[String(y)]),Ip(f.i,"t",y),a.C=0,f=a.j.J,a.h=new Ha,a.g=Bp(a.j,f?d:null,!a.m),0<a.O&&(a.M=new Mr(g(a.Y,a,a.g),a.O)),d=a.U,f=a.g,y=a.ca;var R="readystatechange";Array.isArray(R)||(R&&(As[0]=R.toString()),R=As);for(var V=0;V<R.length;V++){var z=Qt(f,R[V],y||d.handleEvent,!1,d.h||d);if(!z)break;d.g[z.key]=z}d=a.H?v(a.H):{},a.m?(a.u||(a.u="POST"),d["Content-Type"]="application/x-www-form-urlencoded",a.g.ea(a.A,a.u,a.m,d)):(a.u="GET",a.g.ea(a.A,a.u,null,d)),et(),ao(a.i,a.u,a.A,a.l,a.R,a.m)}Hn.prototype.ca=function(a){a=a.target;const d=this.M;d&&ur(a)==3?d.j():this.Y(a)},Hn.prototype.Y=function(a){try{if(a==this.g)e:{const Rt=ur(this.g);var d=this.g.Ba();const ui=this.g.Z();if(!(3>Rt)&&(Rt!=3||this.g&&(this.h.h||this.g.oa()||bp(this.g)))){this.J||Rt!=4||d==7||(d==8||0>=ui?et(3):et(2)),si(this);var f=this.g.Z();this.X=f;t:if(Ga(this)){var y=bp(this.g);a="";var R=y.length,V=ur(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Wn(this),Fr(this);var z="";break t}this.h.i=new l.TextDecoder}for(d=0;d<R;d++)this.h.h=!0,a+=this.h.i.decode(y[d],{stream:!(V&&d==R-1)});y.length=0,this.h.g+=a,this.C=0,z=this.h.g}else z=this.g.oa();if(this.o=f==200,Tn(this.i,this.u,this.A,this.l,this.R,Rt,f),this.o){if(this.T&&!this.K){t:{if(this.g){var Ne,_t=this.g;if((Ne=_t.g?_t.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!_(Ne)){var ve=Ne;break t}}ve=null}if(f=ve)Yt(this.i,this.l,f,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,ii(this,f);else{this.o=!1,this.s=3,Ae(12),Wn(this),Fr(this);break e}}if(this.P){f=!0;let Dn;for(;!this.J&&this.C<z.length;)if(Dn=Qa(this,z),Dn==ho){Rt==4&&(this.s=4,Ae(14),f=!1),Yt(this.i,this.l,null,"[Incomplete Response]");break}else if(Dn==Wa){this.s=4,Ae(15),Yt(this.i,this.l,z,"[Invalid Chunk]"),f=!1;break}else Yt(this.i,this.l,Dn,null),ii(this,Dn);if(Ga(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Rt!=4||z.length!=0||this.h.h||(this.s=1,Ae(16),f=!1),this.o=this.o&&f,!f)Yt(this.i,this.l,z,"[Invalid Chunked Response]"),Wn(this),Fr(this);else if(0<z.length&&!this.W){this.W=!0;var bt=this.j;bt.g==this&&bt.ba&&!bt.M&&(bt.j.info("Great, no buffering proxy detected. Bytes received: "+z.length),kc(bt),bt.M=!0,Ae(11))}}else Yt(this.i,this.l,z,null),ii(this,z);Rt==4&&Wn(this),this.o&&!this.J&&(Rt==4?Mp(this.j,this):(this.o=!1,Cs(this)))}else Xw(this.g),f==400&&0<z.indexOf("Unknown SID")?(this.s=3,Ae(12)):(this.s=0,Ae(13)),Wn(this),Fr(this)}}}catch{}finally{}};function Ga(a){return a.g?a.u=="GET"&&a.L!=2&&a.j.Ca:!1}function Qa(a,d){var f=a.C,y=d.indexOf(`
`,f);return y==-1?ho:(f=Number(d.substring(f,y)),isNaN(f)?Wa:(y+=1,y+f>d.length?ho:(d=d.slice(y,y+f),a.C=y+f,d)))}Hn.prototype.cancel=function(){this.J=!0,Wn(this)};function Cs(a){a.S=Date.now()+a.I,po(a,a.I)}function po(a,d){if(a.B!=null)throw Error("WatchDog timer not null");a.B=qt(g(a.ba,a),d)}function si(a){a.B&&(l.clearTimeout(a.B),a.B=null)}Hn.prototype.ba=function(){this.B=null;const a=Date.now();0<=a-this.S?(lo(this.i,this.A),this.L!=2&&(et(),Ae(17)),Wn(this),this.s=2,Fr(this)):po(this,this.S-a)};function Fr(a){a.j.G==0||a.J||Mp(a.j,a)}function Wn(a){si(a);var d=a.M;d&&typeof d.ma=="function"&&d.ma(),a.M=null,lr(a.U),a.g&&(d=a.g,a.g=null,d.abort(),d.ma())}function ii(a,d){try{var f=a.j;if(f.G!=0&&(f.g==a||oi(f.h,a))){if(!a.K&&oi(f.h,a)&&f.G==3){try{var y=f.Da.g.parse(d)}catch{y=null}if(Array.isArray(y)&&y.length==3){var R=y;if(R[0]==0){e:if(!f.u){if(f.g)if(f.g.F+3e3<a.F)il(f),rl(f);else break e;Nc(f),Ae(18)}}else f.za=R[1],0<f.za-f.T&&37500>R[2]&&f.F&&f.v==0&&!f.C&&(f.C=qt(g(f.Za,f),6e3));if(1>=mo(f.h)&&f.ca){try{f.ca()}catch{}f.ca=void 0}}else Ps(f,11)}else if((a.K||f.g==a)&&il(f),!_(d))for(R=f.Da.g.parse(d),d=0;d<R.length;d++){let ve=R[d];if(f.T=ve[0],ve=ve[1],f.G==2)if(ve[0]=="c"){f.K=ve[1],f.ia=ve[2];const bt=ve[3];bt!=null&&(f.la=bt,f.j.info("VER="+f.la));const Rt=ve[4];Rt!=null&&(f.Aa=Rt,f.j.info("SVER="+f.Aa));const ui=ve[5];ui!=null&&typeof ui=="number"&&0<ui&&(y=1.5*ui,f.L=y,f.j.info("backChannelRequestTimeoutMs_="+y)),y=f;const Dn=a.g;if(Dn){const al=Dn.g?Dn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(al){var V=y.h;V.g||al.indexOf("spdy")==-1&&al.indexOf("quic")==-1&&al.indexOf("h2")==-1||(V.j=V.l,V.g=new Set,V.h&&(E(V,V.h),V.h=null))}if(y.D){const Ac=Dn.g?Dn.g.getResponseHeader("X-HTTP-Session-Id"):null;Ac&&(y.ya=Ac,be(y.I,y.D,Ac))}}f.G=3,f.l&&f.l.ua(),f.ba&&(f.R=Date.now()-a.F,f.j.info("Handshake RTT: "+f.R+"ms")),y=f;var z=a;if(y.qa=$p(y,y.J?y.ia:null,y.W),z.K){H(y.h,z);var Ne=z,_t=y.L;_t&&(Ne.I=_t),Ne.B&&(si(Ne),Cs(Ne)),y.g=z}else Lp(y);0<f.i.length&&sl(f)}else ve[0]!="stop"&&ve[0]!="close"||Ps(f,7);else f.G==3&&(ve[0]=="stop"||ve[0]=="close"?ve[0]=="stop"?Ps(f,7):Sc(f):ve[0]!="noop"&&f.l&&f.l.ta(ve),f.v=0)}}et(4)}catch{}}var Tc=class{constructor(a,d){this.g=a,this.map=d}};function Ya(a){this.l=a||10,l.PerformanceNavigationTiming?(a=l.performance.getEntriesByType("navigation"),a=0<a.length&&(a[0].nextHopProtocol=="hq"||a[0].nextHopProtocol=="h2")):a=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=a?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Xa(a){return a.h?!0:a.g?a.g.size>=a.j:!1}function mo(a){return a.h?1:a.g?a.g.size:0}function oi(a,d){return a.h?a.h==d:a.g?a.g.has(d):!1}function E(a,d){a.g?a.g.add(d):a.h=d}function H(a,d){a.h&&a.h==d?a.h=null:a.g&&a.g.has(d)&&a.g.delete(d)}Ya.prototype.cancel=function(){if(this.i=ne(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const a of this.g.values())a.cancel();this.g.clear()}};function ne(a){if(a.h!=null)return a.i.concat(a.h.D);if(a.g!=null&&a.g.size!==0){let d=a.i;for(const f of a.g.values())d=d.concat(f.D);return d}return P(a.i)}function Ee(a){if(a.V&&typeof a.V=="function")return a.V();if(typeof Map<"u"&&a instanceof Map||typeof Set<"u"&&a instanceof Set)return Array.from(a.values());if(typeof a=="string")return a.split("");if(c(a)){for(var d=[],f=a.length,y=0;y<f;y++)d.push(a[y]);return d}d=[],f=0;for(y in a)d[f++]=a[y];return d}function ge(a){if(a.na&&typeof a.na=="function")return a.na();if(!a.V||typeof a.V!="function"){if(typeof Map<"u"&&a instanceof Map)return Array.from(a.keys());if(!(typeof Set<"u"&&a instanceof Set)){if(c(a)||typeof a=="string"){var d=[];a=a.length;for(var f=0;f<a;f++)d.push(f);return d}d=[],f=0;for(const y in a)d[f++]=y;return d}}}function In(a,d){if(a.forEach&&typeof a.forEach=="function")a.forEach(d,void 0);else if(c(a)||typeof a=="string")Array.prototype.forEach.call(a,d,void 0);else for(var f=ge(a),y=Ee(a),R=y.length,V=0;V<R;V++)d.call(void 0,y[V],f&&f[V],a)}var Kn=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ur(a,d){if(a){a=a.split("&");for(var f=0;f<a.length;f++){var y=a[f].indexOf("="),R=null;if(0<=y){var V=a[f].substring(0,y);R=a[f].substring(y+1)}else V=a[f];d(V,R?decodeURIComponent(R.replace(/\+/g," ")):"")}}}function ee(a){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,a instanceof ee){this.h=a.h,te(this,a.j),this.o=a.o,this.g=a.g,vt(this,a.s),this.l=a.l;var d=a.i,f=new vo;f.i=d.i,d.g&&(f.g=new Map(d.g),f.h=d.h),Ja(this,f),this.m=a.m}else a&&(d=String(a).match(Kn))?(this.h=!1,te(this,d[1]||"",!0),this.o=go(d[2]||""),this.g=go(d[3]||"",!0),vt(this,d[4]),this.l=go(d[5]||"",!0),Ja(this,d[6]||"",!0),this.m=go(d[7]||"")):(this.h=!1,this.i=new vo(null,this.h))}ee.prototype.toString=function(){var a=[],d=this.j;d&&a.push(yo(d,xp,!0),":");var f=this.g;return(f||d=="file")&&(a.push("//"),(d=this.o)&&a.push(yo(d,xp,!0),"@"),a.push(encodeURIComponent(String(f)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f=this.s,f!=null&&a.push(":",String(f))),(f=this.l)&&(this.g&&f.charAt(0)!="/"&&a.push("/"),a.push(yo(f,f.charAt(0)=="/"?$w:Uw,!0))),(f=this.i.toString())&&a.push("?",f),(f=this.m)&&a.push("#",yo(f,zw)),a.join("")};function fe(a){return new ee(a)}function te(a,d,f){a.j=f?go(d,!0):d,a.j&&(a.j=a.j.replace(/:$/,""))}function vt(a,d){if(d){if(d=Number(d),isNaN(d)||0>d)throw Error("Bad port number "+d);a.s=d}else a.s=null}function Ja(a,d,f){d instanceof vo?(a.i=d,qw(a.i,a.h)):(f||(d=yo(d,Bw)),a.i=new vo(d,a.h))}function be(a,d,f){a.i.set(d,f)}function Za(a){return be(a,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),a}function go(a,d){return a?d?decodeURI(a.replace(/%25/g,"%2525")):decodeURIComponent(a):""}function yo(a,d,f){return typeof a=="string"?(a=encodeURI(a).replace(d,Fw),f&&(a=a.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),a):null}function Fw(a){return a=a.charCodeAt(0),"%"+(a>>4&15).toString(16)+(a&15).toString(16)}var xp=/[#\/\?@]/g,Uw=/[#\?:]/g,$w=/[#\?]/g,Bw=/[#\?@]/g,zw=/#/g;function vo(a,d){this.h=this.g=null,this.i=a||null,this.j=!!d}function $r(a){a.g||(a.g=new Map,a.h=0,a.i&&Ur(a.i,function(d,f){a.add(decodeURIComponent(d.replace(/\+/g," ")),f)}))}t=vo.prototype,t.add=function(a,d){$r(this),this.i=null,a=ai(this,a);var f=this.g.get(a);return f||this.g.set(a,f=[]),f.push(d),this.h+=1,this};function Ep(a,d){$r(a),d=ai(a,d),a.g.has(d)&&(a.i=null,a.h-=a.g.get(d).length,a.g.delete(d))}function Tp(a,d){return $r(a),d=ai(a,d),a.g.has(d)}t.forEach=function(a,d){$r(this),this.g.forEach(function(f,y){f.forEach(function(R){a.call(d,R,y,this)},this)},this)},t.na=function(){$r(this);const a=Array.from(this.g.values()),d=Array.from(this.g.keys()),f=[];for(let y=0;y<d.length;y++){const R=a[y];for(let V=0;V<R.length;V++)f.push(d[y])}return f},t.V=function(a){$r(this);let d=[];if(typeof a=="string")Tp(this,a)&&(d=d.concat(this.g.get(ai(this,a))));else{a=Array.from(this.g.values());for(let f=0;f<a.length;f++)d=d.concat(a[f])}return d},t.set=function(a,d){return $r(this),this.i=null,a=ai(this,a),Tp(this,a)&&(this.h-=this.g.get(a).length),this.g.set(a,[d]),this.h+=1,this},t.get=function(a,d){return a?(a=this.V(a),0<a.length?String(a[0]):d):d};function Ip(a,d,f){Ep(a,d),0<f.length&&(a.i=null,a.g.set(ai(a,d),P(f)),a.h+=f.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const a=[],d=Array.from(this.g.keys());for(var f=0;f<d.length;f++){var y=d[f];const V=encodeURIComponent(String(y)),z=this.V(y);for(y=0;y<z.length;y++){var R=V;z[y]!==""&&(R+="="+encodeURIComponent(String(z[y]))),a.push(R)}}return this.i=a.join("&")};function ai(a,d){return d=String(d),a.j&&(d=d.toLowerCase()),d}function qw(a,d){d&&!a.j&&($r(a),a.i=null,a.g.forEach(function(f,y){var R=y.toLowerCase();y!=R&&(Ep(this,y),Ip(this,R,f))},a)),a.j=d}function Hw(a,d){const f=new qn;if(l.Image){const y=new Image;y.onload=k(Br,f,"TestLoadImage: loaded",!0,d,y),y.onerror=k(Br,f,"TestLoadImage: error",!1,d,y),y.onabort=k(Br,f,"TestLoadImage: abort",!1,d,y),y.ontimeout=k(Br,f,"TestLoadImage: timeout",!1,d,y),l.setTimeout(function(){y.ontimeout&&y.ontimeout()},1e4),y.src=a}else d(!1)}function Ww(a,d){const f=new qn,y=new AbortController,R=setTimeout(()=>{y.abort(),Br(f,"TestPingServer: timeout",!1,d)},1e4);fetch(a,{signal:y.signal}).then(V=>{clearTimeout(R),V.ok?Br(f,"TestPingServer: ok",!0,d):Br(f,"TestPingServer: server error",!1,d)}).catch(()=>{clearTimeout(R),Br(f,"TestPingServer: error",!1,d)})}function Br(a,d,f,y,R){try{R&&(R.onload=null,R.onerror=null,R.onabort=null,R.ontimeout=null),y(f)}catch{}}function Kw(){this.g=new le}function Gw(a,d,f){const y=f||"";try{In(a,function(R,V){let z=R;h(R)&&(z=M(R)),d.push(y+V+"="+encodeURIComponent(z))})}catch(R){throw d.push(y+"type="+encodeURIComponent("_badmap")),R}}function el(a){this.l=a.Ub||null,this.j=a.eb||!1}b(el,he),el.prototype.g=function(){return new tl(this.l,this.j)},el.prototype.i=function(a){return function(){return a}}({});function tl(a,d){ze.call(this),this.D=a,this.o=d,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}b(tl,ze),t=tl.prototype,t.open=function(a,d){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=a,this.A=d,this.readyState=1,wo(this)},t.send=function(a){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const d={headers:this.u,method:this.B,credentials:this.m,cache:void 0};a&&(d.body=a),(this.D||l).fetch(new Request(this.A,d)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,_o(this)),this.readyState=0},t.Sa=function(a){if(this.g&&(this.l=a,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=a.headers,this.readyState=2,wo(this)),this.g&&(this.readyState=3,wo(this),this.g)))if(this.responseType==="arraybuffer")a.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in a){if(this.j=a.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Sp(this)}else a.text().then(this.Ra.bind(this),this.ga.bind(this))};function Sp(a){a.j.read().then(a.Pa.bind(a)).catch(a.ga.bind(a))}t.Pa=function(a){if(this.g){if(this.o&&a.value)this.response.push(a.value);else if(!this.o){var d=a.value?a.value:new Uint8Array(0);(d=this.v.decode(d,{stream:!a.done}))&&(this.response=this.responseText+=d)}a.done?_o(this):wo(this),this.readyState==3&&Sp(this)}},t.Ra=function(a){this.g&&(this.response=this.responseText=a,_o(this))},t.Qa=function(a){this.g&&(this.response=a,_o(this))},t.ga=function(){this.g&&_o(this)};function _o(a){a.readyState=4,a.l=null,a.j=null,a.v=null,wo(a)}t.setRequestHeader=function(a,d){this.u.append(a,d)},t.getResponseHeader=function(a){return this.h&&this.h.get(a.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const a=[],d=this.h.entries();for(var f=d.next();!f.done;)f=f.value,a.push(f[0]+": "+f[1]),f=d.next();return a.join(`\r
`)};function wo(a){a.onreadystatechange&&a.onreadystatechange.call(a)}Object.defineProperty(tl.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(a){this.m=a?"include":"same-origin"}});function Np(a){let d="";return F(a,function(f,y){d+=y,d+=":",d+=f,d+=`\r
`}),d}function Ic(a,d,f){e:{for(y in f){var y=!1;break e}y=!0}y||(f=Np(f),typeof a=="string"?f!=null&&encodeURIComponent(String(f)):be(a,d,f))}function qe(a){ze.call(this),this.headers=new Map,this.o=a||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}b(qe,ze);var Qw=/^https?$/i,Yw=["POST","PUT"];t=qe.prototype,t.Ha=function(a){this.J=a},t.ea=function(a,d,f,y){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+a);d=d?d.toUpperCase():"GET",this.D=a,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():co.g(),this.v=this.o?Je(this.o):Je(co),this.g.onreadystatechange=g(this.Ea,this);try{this.B=!0,this.g.open(d,String(a),!0),this.B=!1}catch(V){kp(this,V);return}if(a=f||"",f=new Map(this.headers),y)if(Object.getPrototypeOf(y)===Object.prototype)for(var R in y)f.set(R,y[R]);else if(typeof y.keys=="function"&&typeof y.get=="function")for(const V of y.keys())f.set(V,y.get(V));else throw Error("Unknown input type for opt_headers: "+String(y));y=Array.from(f.keys()).find(V=>V.toLowerCase()=="content-type"),R=l.FormData&&a instanceof l.FormData,!(0<=Array.prototype.indexOf.call(Yw,d,void 0))||y||R||f.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[V,z]of f)this.g.setRequestHeader(V,z);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Pp(this),this.u=!0,this.g.send(a),this.u=!1}catch(V){kp(this,V)}};function kp(a,d){a.h=!1,a.g&&(a.j=!0,a.g.abort(),a.j=!1),a.l=d,a.m=5,Ap(a),nl(a)}function Ap(a){a.A||(a.A=!0,it(a,"complete"),it(a,"error"))}t.abort=function(a){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=a||7,it(this,"complete"),it(this,"abort"),nl(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),nl(this,!0)),qe.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?Cp(this):this.bb())},t.bb=function(){Cp(this)};function Cp(a){if(a.h&&typeof o<"u"&&(!a.v[1]||ur(a)!=4||a.Z()!=2)){if(a.u&&ur(a)==4)Or(a.Ea,0,a);else if(it(a,"readystatechange"),ur(a)==4){a.h=!1;try{const z=a.Z();e:switch(z){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var d=!0;break e;default:d=!1}var f;if(!(f=d)){var y;if(y=z===0){var R=String(a.D).match(Kn)[1]||null;!R&&l.self&&l.self.location&&(R=l.self.location.protocol.slice(0,-1)),y=!Qw.test(R?R.toLowerCase():"")}f=y}if(f)it(a,"complete"),it(a,"success");else{a.m=6;try{var V=2<ur(a)?a.g.statusText:""}catch{V=""}a.l=V+" ["+a.Z()+"]",Ap(a)}}finally{nl(a)}}}}function nl(a,d){if(a.g){Pp(a);const f=a.g,y=a.v[0]?()=>{}:null;a.g=null,a.v=null,d||it(a,"ready");try{f.onreadystatechange=y}catch{}}}function Pp(a){a.I&&(l.clearTimeout(a.I),a.I=null)}t.isActive=function(){return!!this.g};function ur(a){return a.g?a.g.readyState:0}t.Z=function(){try{return 2<ur(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(a){if(this.g){var d=this.g.responseText;return a&&d.indexOf(a)==0&&(d=d.substring(a.length)),Q(d)}};function bp(a){try{if(!a.g)return null;if("response"in a.g)return a.g.response;switch(a.H){case"":case"text":return a.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in a.g)return a.g.mozResponseArrayBuffer}return null}catch{return null}}function Xw(a){const d={};a=(a.g&&2<=ur(a)&&a.g.getAllResponseHeaders()||"").split(`\r
`);for(let y=0;y<a.length;y++){if(_(a[y]))continue;var f=A(a[y]);const R=f[0];if(f=f[1],typeof f!="string")continue;f=f.trim();const V=d[R]||[];d[R]=V,V.push(f)}w(d,function(y){return y.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function xo(a,d,f){return f&&f.internalChannelParams&&f.internalChannelParams[a]||d}function Rp(a){this.Aa=0,this.i=[],this.j=new qn,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=xo("failFast",!1,a),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=xo("baseRetryDelayMs",5e3,a),this.cb=xo("retryDelaySeedMs",1e4,a),this.Wa=xo("forwardChannelMaxRetries",2,a),this.wa=xo("forwardChannelRequestTimeoutMs",2e4,a),this.pa=a&&a.xmlHttpFactory||void 0,this.Xa=a&&a.Tb||void 0,this.Ca=a&&a.useFetchStreams||!1,this.L=void 0,this.J=a&&a.supportsCrossDomainXhr||!1,this.K="",this.h=new Ya(a&&a.concurrentRequestLimit),this.Da=new Kw,this.P=a&&a.fastHandshake||!1,this.O=a&&a.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=a&&a.Rb||!1,a&&a.xa&&this.j.xa(),a&&a.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&a&&a.detectBufferingProxy||!1,this.ja=void 0,a&&a.longPollingTimeout&&0<a.longPollingTimeout&&(this.ja=a.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=Rp.prototype,t.la=8,t.G=1,t.connect=function(a,d,f,y){Ae(0),this.W=a,this.H=d||{},f&&y!==void 0&&(this.H.OSID=f,this.H.OAID=y),this.F=this.X,this.I=$p(this,null,this.W),sl(this)};function Sc(a){if(Dp(a),a.G==3){var d=a.U++,f=fe(a.I);if(be(f,"SID",a.K),be(f,"RID",d),be(f,"TYPE","terminate"),Eo(a,f),d=new Hn(a,a.j,d),d.L=2,d.v=Za(fe(f)),f=!1,l.navigator&&l.navigator.sendBeacon)try{f=l.navigator.sendBeacon(d.v.toString(),"")}catch{}!f&&l.Image&&(new Image().src=d.v,f=!0),f||(d.g=Bp(d.j,null),d.g.ea(d.v)),d.F=Date.now(),Cs(d)}Up(a)}function rl(a){a.g&&(kc(a),a.g.cancel(),a.g=null)}function Dp(a){rl(a),a.u&&(l.clearTimeout(a.u),a.u=null),il(a),a.h.cancel(),a.s&&(typeof a.s=="number"&&l.clearTimeout(a.s),a.s=null)}function sl(a){if(!Xa(a.h)&&!a.s){a.s=!0;var d=a.Ga;Bt||Z(),q||(Bt(),q=!0),X.add(d,a),a.B=0}}function Jw(a,d){return mo(a.h)>=a.h.j-(a.s?1:0)?!1:a.s?(a.i=d.D.concat(a.i),!0):a.G==1||a.G==2||a.B>=(a.Va?0:a.Wa)?!1:(a.s=qt(g(a.Ga,a,d),Fp(a,a.B)),a.B++,!0)}t.Ga=function(a){if(this.s)if(this.s=null,this.G==1){if(!a){this.U=Math.floor(1e5*Math.random()),a=this.U++;const R=new Hn(this,this.j,a);let V=this.o;if(this.S&&(V?(V=v(V),T(V,this.S)):V=this.S),this.m!==null||this.O||(R.H=V,V=null),this.P)e:{for(var d=0,f=0;f<this.i.length;f++){t:{var y=this.i[f];if("__data__"in y.map&&(y=y.map.__data__,typeof y=="string")){y=y.length;break t}y=void 0}if(y===void 0)break;if(d+=y,4096<d){d=f;break e}if(d===4096||f===this.i.length-1){d=f+1;break e}}d=1e3}else d=1e3;d=Vp(this,R,d),f=fe(this.I),be(f,"RID",a),be(f,"CVER",22),this.D&&be(f,"X-HTTP-Session-Id",this.D),Eo(this,f),V&&(this.O?d="headers="+encodeURIComponent(String(Np(V)))+"&"+d:this.m&&Ic(f,this.m,V)),E(this.h,R),this.Ua&&be(f,"TYPE","init"),this.P?(be(f,"$req",d),be(f,"SID","null"),R.T=!0,fo(R,f,null)):fo(R,f,d),this.G=2}}else this.G==3&&(a?jp(this,a):this.i.length==0||Xa(this.h)||jp(this))};function jp(a,d){var f;d?f=d.l:f=a.U++;const y=fe(a.I);be(y,"SID",a.K),be(y,"RID",f),be(y,"AID",a.T),Eo(a,y),a.m&&a.o&&Ic(y,a.m,a.o),f=new Hn(a,a.j,f,a.B+1),a.m===null&&(f.H=a.o),d&&(a.i=d.D.concat(a.i)),d=Vp(a,f,1e3),f.I=Math.round(.5*a.wa)+Math.round(.5*a.wa*Math.random()),E(a.h,f),fo(f,y,d)}function Eo(a,d){a.H&&F(a.H,function(f,y){be(d,y,f)}),a.l&&In({},function(f,y){be(d,y,f)})}function Vp(a,d,f){f=Math.min(a.i.length,f);var y=a.l?g(a.l.Na,a.l,a):null;e:{var R=a.i;let V=-1;for(;;){const z=["count="+f];V==-1?0<f?(V=R[0].g,z.push("ofs="+V)):V=0:z.push("ofs="+V);let Ne=!0;for(let _t=0;_t<f;_t++){let ve=R[_t].g;const bt=R[_t].map;if(ve-=V,0>ve)V=Math.max(0,R[_t].g-100),Ne=!1;else try{Gw(bt,z,"req"+ve+"_")}catch{y&&y(bt)}}if(Ne){y=z.join("&");break e}}}return a=a.i.splice(0,f),d.D=a,y}function Lp(a){if(!a.g&&!a.u){a.Y=1;var d=a.Fa;Bt||Z(),q||(Bt(),q=!0),X.add(d,a),a.v=0}}function Nc(a){return a.g||a.u||3<=a.v?!1:(a.Y++,a.u=qt(g(a.Fa,a),Fp(a,a.v)),a.v++,!0)}t.Fa=function(){if(this.u=null,Op(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var a=2*this.R;this.j.info("BP detection timer enabled: "+a),this.A=qt(g(this.ab,this),a)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Ae(10),rl(this),Op(this))};function kc(a){a.A!=null&&(l.clearTimeout(a.A),a.A=null)}function Op(a){a.g=new Hn(a,a.j,"rpc",a.Y),a.m===null&&(a.g.H=a.o),a.g.O=0;var d=fe(a.qa);be(d,"RID","rpc"),be(d,"SID",a.K),be(d,"AID",a.T),be(d,"CI",a.F?"0":"1"),!a.F&&a.ja&&be(d,"TO",a.ja),be(d,"TYPE","xmlhttp"),Eo(a,d),a.m&&a.o&&Ic(d,a.m,a.o),a.L&&(a.g.I=a.L);var f=a.g;a=a.ia,f.L=1,f.v=Za(fe(d)),f.m=null,f.P=!0,Ka(f,a)}t.Za=function(){this.C!=null&&(this.C=null,rl(this),Nc(this),Ae(19))};function il(a){a.C!=null&&(l.clearTimeout(a.C),a.C=null)}function Mp(a,d){var f=null;if(a.g==d){il(a),kc(a),a.g=null;var y=2}else if(oi(a.h,d))f=d.D,H(a.h,d),y=1;else return;if(a.G!=0){if(d.o)if(y==1){f=d.m?d.m.length:0,d=Date.now()-d.F;var R=a.B;y=Oe(),it(y,new zt(y,f)),sl(a)}else Lp(a);else if(R=d.s,R==3||R==0&&0<d.X||!(y==1&&Jw(a,d)||y==2&&Nc(a)))switch(f&&0<f.length&&(d=a.h,d.i=d.i.concat(f)),R){case 1:Ps(a,5);break;case 4:Ps(a,10);break;case 3:Ps(a,6);break;default:Ps(a,2)}}}function Fp(a,d){let f=a.Ta+Math.floor(Math.random()*a.cb);return a.isActive()||(f*=2),f*d}function Ps(a,d){if(a.j.info("Error code "+d),d==2){var f=g(a.fb,a),y=a.Xa;const R=!y;y=new ee(y||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||te(y,"https"),Za(y),R?Hw(y.toString(),f):Ww(y.toString(),f)}else Ae(2);a.G=0,a.l&&a.l.sa(d),Up(a),Dp(a)}t.fb=function(a){a?(this.j.info("Successfully pinged google.com"),Ae(2)):(this.j.info("Failed to ping google.com"),Ae(1))};function Up(a){if(a.G=0,a.ka=[],a.l){const d=ne(a.h);(d.length!=0||a.i.length!=0)&&(j(a.ka,d),j(a.ka,a.i),a.h.i.length=0,P(a.i),a.i.length=0),a.l.ra()}}function $p(a,d,f){var y=f instanceof ee?fe(f):new ee(f);if(y.g!="")d&&(y.g=d+"."+y.g),vt(y,y.s);else{var R=l.location;y=R.protocol,d=d?d+"."+R.hostname:R.hostname,R=+R.port;var V=new ee(null);y&&te(V,y),d&&(V.g=d),R&&vt(V,R),f&&(V.l=f),y=V}return f=a.D,d=a.ya,f&&d&&be(y,f,d),be(y,"VER",a.la),Eo(a,y),y}function Bp(a,d,f){if(d&&!a.J)throw Error("Can't create secondary domain capable XhrIo object.");return d=a.Ca&&!a.pa?new qe(new el({eb:f})):new qe(a.pa),d.Ha(a.J),d}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function zp(){}t=zp.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function ol(){}ol.prototype.g=function(a,d){return new dn(a,d)};function dn(a,d){ze.call(this),this.g=new Rp(d),this.l=a,this.h=d&&d.messageUrlParams||null,a=d&&d.messageHeaders||null,d&&d.clientProtocolHeaderRequired&&(a?a["X-Client-Protocol"]="webchannel":a={"X-Client-Protocol":"webchannel"}),this.g.o=a,a=d&&d.initMessageHeaders||null,d&&d.messageContentType&&(a?a["X-WebChannel-Content-Type"]=d.messageContentType:a={"X-WebChannel-Content-Type":d.messageContentType}),d&&d.va&&(a?a["X-WebChannel-Client-Profile"]=d.va:a={"X-WebChannel-Client-Profile":d.va}),this.g.S=a,(a=d&&d.Sb)&&!_(a)&&(this.g.m=a),this.v=d&&d.supportsCrossDomainXhr||!1,this.u=d&&d.sendRawJson||!1,(d=d&&d.httpSessionIdParam)&&!_(d)&&(this.g.D=d,a=this.h,a!==null&&d in a&&(a=this.h,d in a&&delete a[d])),this.j=new li(this)}b(dn,ze),dn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},dn.prototype.close=function(){Sc(this.g)},dn.prototype.o=function(a){var d=this.g;if(typeof a=="string"){var f={};f.__data__=a,a=f}else this.u&&(f={},f.__data__=M(a),a=f);d.i.push(new Tc(d.Ya++,a)),d.G==3&&sl(d)},dn.prototype.N=function(){this.g.l=null,delete this.j,Sc(this.g),delete this.g,dn.aa.N.call(this)};function qp(a){Pt.call(this),a.__headers__&&(this.headers=a.__headers__,this.statusCode=a.__status__,delete a.__headers__,delete a.__status__);var d=a.__sm__;if(d){e:{for(const f in d){a=f;break e}a=void 0}(this.i=a)&&(a=this.i,d=d!==null&&a in d?d[a]:void 0),this.data=d}else this.data=a}b(qp,Pt);function Hp(){xe.call(this),this.status=1}b(Hp,xe);function li(a){this.g=a}b(li,zp),li.prototype.ua=function(){it(this.g,"a")},li.prototype.ta=function(a){it(this.g,new qp(a))},li.prototype.sa=function(a){it(this.g,new Hp)},li.prototype.ra=function(){it(this.g,"b")},ol.prototype.createWebChannel=ol.prototype.g,dn.prototype.send=dn.prototype.o,dn.prototype.open=dn.prototype.m,dn.prototype.close=dn.prototype.close,I_=function(){return new ol},T_=function(){return Oe()},E_=ke,fh={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},ni.NO_ERROR=0,ni.TIMEOUT=8,ni.HTTP_ERROR=6,Wl=ni,uo.COMPLETE="complete",x_=uo,Le.EventType=cn,cn.OPEN="a",cn.CLOSE="b",cn.ERROR="c",cn.MESSAGE="d",ze.prototype.listen=ze.prototype.K,Lo=Le,qe.prototype.listenOnce=qe.prototype.L,qe.prototype.getLastError=qe.prototype.Ka,qe.prototype.getLastErrorCode=qe.prototype.Ba,qe.prototype.getStatus=qe.prototype.Z,qe.prototype.getResponseJson=qe.prototype.Oa,qe.prototype.getResponseText=qe.prototype.oa,qe.prototype.send=qe.prototype.ea,qe.prototype.setWithCredentials=qe.prototype.Ha,w_=qe}).apply(typeof Nl<"u"?Nl:typeof self<"u"?self:typeof window<"u"?window:{});const Cg="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Lt.UNAUTHENTICATED=new Lt(null),Lt.GOOGLE_CREDENTIALS=new Lt("google-credentials-uid"),Lt.FIRST_PARTY=new Lt("first-party-uid"),Lt.MOCK_USER=new Lt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let so="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gs=new Sf("@firebase/firestore");function bo(){return Gs.logLevel}function G(t,...e){if(Gs.logLevel<=de.DEBUG){const n=e.map(Of);Gs.debug(`Firestore (${so}): ${t}`,...n)}}function br(t,...e){if(Gs.logLevel<=de.ERROR){const n=e.map(Of);Gs.error(`Firestore (${so}): ${t}`,...n)}}function Wi(t,...e){if(Gs.logLevel<=de.WARN){const n=e.map(Of);Gs.warn(`Firestore (${so}): ${t}`,...n)}}function Of(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function se(t="Unexpected state"){const e=`FIRESTORE (${so}) INTERNAL ASSERTION FAILED: `+t;throw br(e),new Error(e)}function Ie(t,e){t||se()}function oe(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class K extends Vr{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Er{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S_{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class uk{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Lt.UNAUTHENTICATED))}shutdown(){}}class ck{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class dk{constructor(e){this.t=e,this.currentUser=Lt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Ie(this.o===void 0);let r=this.i;const s=c=>this.i!==r?(r=this.i,n(c)):Promise.resolve();let i=new Er;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new Er,e.enqueueRetryable(()=>s(this.currentUser))};const o=()=>{const c=i;e.enqueueRetryable(async()=>{await c.promise,await s(this.currentUser)})},l=c=>{G("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(c=>l(c)),setTimeout(()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?l(c):(G("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new Er)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(G("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Ie(typeof r.accessToken=="string"),new S_(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Ie(e===null||typeof e=="string"),new Lt(e)}}class hk{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=Lt.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class fk{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new hk(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(Lt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class pk{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class mk{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){Ie(this.o===void 0);const r=i=>{i.error!=null&&G("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.R;return this.R=i.token,G("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>r(i))};const s=i=>{G("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.A.getImmediate({optional:!0});i?s(i):G("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Ie(typeof n.token=="string"),this.R=n.token,new pk(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gk(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N_{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const s=gk(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=e.charAt(s[i]%e.length))}return r}}function _e(t,e){return t<e?-1:t>e?1:0}function Ki(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ct{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new K(O.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new K(O.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new K(O.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new K(O.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return ct.fromMillis(Date.now())}static fromDate(e){return ct.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new ct(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?_e(this.nanoseconds,e.nanoseconds):_e(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ie{constructor(e){this.timestamp=e}static fromTimestamp(e){return new ie(e)}static min(){return new ie(new ct(0,0))}static max(){return new ie(new ct(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _a{constructor(e,n,r){n===void 0?n=0:n>e.length&&se(),r===void 0?r=e.length-n:r>e.length-n&&se(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return _a.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof _a?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const i=e.get(s),o=n.get(s);if(i<o)return-1;if(i>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class De extends _a{construct(e,n,r){return new De(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new K(O.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new De(n)}static emptyPath(){return new De([])}}const yk=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Et extends _a{construct(e,n,r){return new Et(e,n,r)}static isValidIdentifier(e){return yk.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Et.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Et(["__name__"])}static fromServerFormat(e){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new K(O.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;s<e.length;){const l=e[s];if(l==="\\"){if(s+1===e.length)throw new K(O.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const c=e[s+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new K(O.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,s+=2}else l==="`"?(o=!o,s++):l!=="."||o?(r+=l,s++):(i(),s++)}if(i(),o)throw new K(O.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Et(n)}static emptyPath(){return new Et([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J{constructor(e){this.path=e}static fromPath(e){return new J(De.fromString(e))}static fromName(e){return new J(De.fromString(e).popFirst(5))}static empty(){return new J(De.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&De.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return De.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new J(new De(e.slice()))}}function vk(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=ie.fromTimestamp(r===1e9?new ct(n+1,0):new ct(n,r));return new _s(s,J.empty(),e)}function _k(t){return new _s(t.readTime,t.key,-1)}class _s{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new _s(ie.min(),J.empty(),-1)}static max(){return new _s(ie.max(),J.empty(),-1)}}function wk(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=J.comparator(t.documentKey,e.documentKey),n!==0?n:_e(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xk="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Ek{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Oa(t){if(t.code!==O.FAILED_PRECONDITION||t.message!==xk)throw t;G("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&se(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new U((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof U?n:U.resolve(n)}catch(n){return U.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):U.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):U.reject(n)}static resolve(e){return new U((n,r)=>{n(e)})}static reject(e){return new U((n,r)=>{r(e)})}static waitFor(e){return new U((n,r)=>{let s=0,i=0,o=!1;e.forEach(l=>{++s,l.next(()=>{++i,o&&i===s&&n()},c=>r(c))}),o=!0,i===s&&n()})}static or(e){let n=U.resolve(!1);for(const r of e)n=n.next(s=>s?U.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,i)=>{r.push(n.call(this,s,i))}),this.waitFor(r)}static mapArray(e,n){return new U((r,s)=>{const i=e.length,o=new Array(i);let l=0;for(let c=0;c<i;c++){const h=c;n(e[h]).next(p=>{o[h]=p,++l,l===i&&r(o)},p=>s(p))}})}static doWhile(e,n){return new U((r,s)=>{const i=()=>{e()===!0?n().next(()=>{i()},s):r()};i()})}}function Tk(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Ma(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mf{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}Mf.oe=-1;function sc(t){return t==null}function Cu(t){return t===0&&1/t==-1/0}function Ik(t){return typeof t=="number"&&Number.isInteger(t)&&!Cu(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pg(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Zs(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function k_(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $e{constructor(e,n){this.comparator=e,this.root=n||xt.EMPTY}insert(e,n){return new $e(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,xt.BLACK,null,null))}remove(e){return new $e(this.comparator,this.root.remove(e,this.comparator).copy(null,null,xt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new kl(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new kl(this.root,e,this.comparator,!1)}getReverseIterator(){return new kl(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new kl(this.root,e,this.comparator,!0)}}class kl{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?r(e.key,n):1,n&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class xt{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??xt.RED,this.left=s??xt.EMPTY,this.right=i??xt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,i){return new xt(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return xt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return xt.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,xt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,xt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw se();const e=this.left.check();if(e!==this.right.check())throw se();return e+(this.isRed()?0:1)}}xt.EMPTY=null,xt.RED=!0,xt.BLACK=!1;xt.EMPTY=new class{constructor(){this.size=0}get key(){throw se()}get value(){throw se()}get color(){throw se()}get left(){throw se()}get right(){throw se()}copy(e,n,r,s,i){return this}insert(e,n,r){return new xt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class It{constructor(e){this.comparator=e,this.data=new $e(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new bg(this.data.getIterator())}getIteratorFrom(e){return new bg(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof It)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new It(this.comparator);return n.data=e,n}}class bg{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pn{constructor(e){this.fields=e,e.sort(Et.comparator)}static empty(){return new pn([])}unionWith(e){let n=new It(Et.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new pn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Ki(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A_ extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new A_("Invalid base64 string: "+i):i}}(e);return new kt(n)}static fromUint8Array(e){const n=function(s){let i="";for(let o=0;o<s.length;++o)i+=String.fromCharCode(s[o]);return i}(e);return new kt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return _e(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}kt.EMPTY_BYTE_STRING=new kt("");const Sk=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ws(t){if(Ie(!!t),typeof t=="string"){let e=0;const n=Sk.exec(t);if(Ie(!!n),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Ke(t.seconds),nanos:Ke(t.nanos)}}function Ke(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Qs(t){return typeof t=="string"?kt.fromBase64String(t):kt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ff(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function Uf(t){const e=t.mapValue.fields.__previous_value__;return Ff(e)?Uf(e):e}function wa(t){const e=ws(t.mapValue.fields.__local_write_time__.timestampValue);return new ct(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nk{constructor(e,n,r,s,i,o,l,c,h){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=l,this.longPollingOptions=c,this.useFetchStreams=h}}class xa{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new xa("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof xa&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Al={mapValue:{}};function Ys(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Ff(t)?4:Ak(t)?9007199254740991:kk(t)?10:11:se()}function sr(t,e){if(t===e)return!0;const n=Ys(t);if(n!==Ys(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return wa(t).isEqual(wa(e));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const o=ws(s.timestampValue),l=ws(i.timestampValue);return o.seconds===l.seconds&&o.nanos===l.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,i){return Qs(s.bytesValue).isEqual(Qs(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,i){return Ke(s.geoPointValue.latitude)===Ke(i.geoPointValue.latitude)&&Ke(s.geoPointValue.longitude)===Ke(i.geoPointValue.longitude)}(t,e);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return Ke(s.integerValue)===Ke(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const o=Ke(s.doubleValue),l=Ke(i.doubleValue);return o===l?Cu(o)===Cu(l):isNaN(o)&&isNaN(l)}return!1}(t,e);case 9:return Ki(t.arrayValue.values||[],e.arrayValue.values||[],sr);case 10:case 11:return function(s,i){const o=s.mapValue.fields||{},l=i.mapValue.fields||{};if(Pg(o)!==Pg(l))return!1;for(const c in o)if(o.hasOwnProperty(c)&&(l[c]===void 0||!sr(o[c],l[c])))return!1;return!0}(t,e);default:return se()}}function Ea(t,e){return(t.values||[]).find(n=>sr(n,e))!==void 0}function Gi(t,e){if(t===e)return 0;const n=Ys(t),r=Ys(e);if(n!==r)return _e(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return _e(t.booleanValue,e.booleanValue);case 2:return function(i,o){const l=Ke(i.integerValue||i.doubleValue),c=Ke(o.integerValue||o.doubleValue);return l<c?-1:l>c?1:l===c?0:isNaN(l)?isNaN(c)?0:-1:1}(t,e);case 3:return Rg(t.timestampValue,e.timestampValue);case 4:return Rg(wa(t),wa(e));case 5:return _e(t.stringValue,e.stringValue);case 6:return function(i,o){const l=Qs(i),c=Qs(o);return l.compareTo(c)}(t.bytesValue,e.bytesValue);case 7:return function(i,o){const l=i.split("/"),c=o.split("/");for(let h=0;h<l.length&&h<c.length;h++){const p=_e(l[h],c[h]);if(p!==0)return p}return _e(l.length,c.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,o){const l=_e(Ke(i.latitude),Ke(o.latitude));return l!==0?l:_e(Ke(i.longitude),Ke(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return Dg(t.arrayValue,e.arrayValue);case 10:return function(i,o){var l,c,h,p;const m=i.fields||{},g=o.fields||{},k=(l=m.value)===null||l===void 0?void 0:l.arrayValue,b=(c=g.value)===null||c===void 0?void 0:c.arrayValue,P=_e(((h=k==null?void 0:k.values)===null||h===void 0?void 0:h.length)||0,((p=b==null?void 0:b.values)===null||p===void 0?void 0:p.length)||0);return P!==0?P:Dg(k,b)}(t.mapValue,e.mapValue);case 11:return function(i,o){if(i===Al.mapValue&&o===Al.mapValue)return 0;if(i===Al.mapValue)return 1;if(o===Al.mapValue)return-1;const l=i.fields||{},c=Object.keys(l),h=o.fields||{},p=Object.keys(h);c.sort(),p.sort();for(let m=0;m<c.length&&m<p.length;++m){const g=_e(c[m],p[m]);if(g!==0)return g;const k=Gi(l[c[m]],h[p[m]]);if(k!==0)return k}return _e(c.length,p.length)}(t.mapValue,e.mapValue);default:throw se()}}function Rg(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return _e(t,e);const n=ws(t),r=ws(e),s=_e(n.seconds,r.seconds);return s!==0?s:_e(n.nanos,r.nanos)}function Dg(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const i=Gi(n[s],r[s]);if(i)return i}return _e(n.length,r.length)}function Qi(t){return ph(t)}function ph(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=ws(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Qs(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return J.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",s=!0;for(const i of n.values||[])s?s=!1:r+=",",r+=ph(i);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",i=!0;for(const o of r)i?i=!1:s+=",",s+=`${o}:${ph(n.fields[o])}`;return s+"}"}(t.mapValue):se()}function jg(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function mh(t){return!!t&&"integerValue"in t}function $f(t){return!!t&&"arrayValue"in t}function Vg(t){return!!t&&"nullValue"in t}function Lg(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Kl(t){return!!t&&"mapValue"in t}function kk(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function Yo(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Zs(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Yo(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Yo(t.arrayValue.values[n]);return e}return Object.assign({},t)}function Ak(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jt{constructor(e){this.value=e}static empty(){return new Jt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Kl(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Yo(n)}setAll(e){let n=Et.emptyPath(),r={},s=[];e.forEach((o,l)=>{if(!n.isImmediateParentOf(l)){const c=this.getFieldsMap(n);this.applyChanges(c,r,s),r={},s=[],n=l.popLast()}o?r[l.lastSegment()]=Yo(o):s.push(l.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(e){const n=this.field(e.popLast());Kl(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return sr(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];Kl(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){Zs(n,(s,i)=>e[s]=i);for(const s of r)delete e[s]}clone(){return new Jt(Yo(this.value))}}function C_(t){const e=[];return Zs(t.fields,(n,r)=>{const s=new Et([n]);if(Kl(r)){const i=C_(r.mapValue).fields;if(i.length===0)e.push(s);else for(const o of i)e.push(s.child(o))}else e.push(s)}),new pn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mt{constructor(e,n,r,s,i,o,l){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=o,this.documentState=l}static newInvalidDocument(e){return new Mt(e,0,ie.min(),ie.min(),ie.min(),Jt.empty(),0)}static newFoundDocument(e,n,r,s){return new Mt(e,1,n,ie.min(),r,s,0)}static newNoDocument(e,n){return new Mt(e,2,n,ie.min(),ie.min(),Jt.empty(),0)}static newUnknownDocument(e,n){return new Mt(e,3,n,ie.min(),ie.min(),Jt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(ie.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Jt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Jt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ie.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Mt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Mt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pu{constructor(e,n){this.position=e,this.inclusive=n}}function Og(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const i=e[s],o=t.position[s];if(i.field.isKeyField()?r=J.comparator(J.fromName(o.referenceValue),n.key):r=Gi(o,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function Mg(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!sr(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bu{constructor(e,n="asc"){this.field=e,this.dir=n}}function Ck(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P_{}class st extends P_{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new bk(e,n,r):n==="array-contains"?new jk(e,r):n==="in"?new Vk(e,r):n==="not-in"?new Lk(e,r):n==="array-contains-any"?new Ok(e,r):new st(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new Rk(e,r):new Dk(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(Gi(n,this.value)):n!==null&&Ys(this.value)===Ys(n)&&this.matchesComparison(Gi(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return se()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class $n extends P_{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new $n(e,n)}matches(e){return b_(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function b_(t){return t.op==="and"}function R_(t){return Pk(t)&&b_(t)}function Pk(t){for(const e of t.filters)if(e instanceof $n)return!1;return!0}function gh(t){if(t instanceof st)return t.field.canonicalString()+t.op.toString()+Qi(t.value);if(R_(t))return t.filters.map(e=>gh(e)).join(",");{const e=t.filters.map(n=>gh(n)).join(",");return`${t.op}(${e})`}}function D_(t,e){return t instanceof st?function(r,s){return s instanceof st&&r.op===s.op&&r.field.isEqual(s.field)&&sr(r.value,s.value)}(t,e):t instanceof $n?function(r,s){return s instanceof $n&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((i,o,l)=>i&&D_(o,s.filters[l]),!0):!1}(t,e):void se()}function j_(t){return t instanceof st?function(n){return`${n.field.canonicalString()} ${n.op} ${Qi(n.value)}`}(t):t instanceof $n?function(n){return n.op.toString()+" {"+n.getFilters().map(j_).join(" ,")+"}"}(t):"Filter"}class bk extends st{constructor(e,n,r){super(e,n,r),this.key=J.fromName(r.referenceValue)}matches(e){const n=J.comparator(e.key,this.key);return this.matchesComparison(n)}}class Rk extends st{constructor(e,n){super(e,"in",n),this.keys=V_("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class Dk extends st{constructor(e,n){super(e,"not-in",n),this.keys=V_("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function V_(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>J.fromName(r.referenceValue))}class jk extends st{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return $f(n)&&Ea(n.arrayValue,this.value)}}class Vk extends st{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Ea(this.value.arrayValue,n)}}class Lk extends st{constructor(e,n){super(e,"not-in",n)}matches(e){if(Ea(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!Ea(this.value.arrayValue,n)}}class Ok extends st{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!$f(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Ea(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mk{constructor(e,n=null,r=[],s=[],i=null,o=null,l=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=o,this.endAt=l,this.ue=null}}function Fg(t,e=null,n=[],r=[],s=null,i=null,o=null){return new Mk(t,e,n,r,s,i,o)}function Bf(t){const e=oe(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>gh(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),sc(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Qi(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Qi(r)).join(",")),e.ue=n}return e.ue}function zf(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!Ck(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!D_(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Mg(t.startAt,e.startAt)&&Mg(t.endAt,e.endAt)}function yh(t){return J.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fa{constructor(e,n=null,r=[],s=[],i=null,o="F",l=null,c=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=o,this.startAt=l,this.endAt=c,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function Fk(t,e,n,r,s,i,o,l){return new Fa(t,e,n,r,s,i,o,l)}function ic(t){return new Fa(t)}function Ug(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function L_(t){return t.collectionGroup!==null}function Xo(t){const e=oe(t);if(e.ce===null){e.ce=[];const n=new Set;for(const i of e.explicitOrderBy)e.ce.push(i),n.add(i.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let l=new It(Et.comparator);return o.filters.forEach(c=>{c.getFlattenedFilters().forEach(h=>{h.isInequality()&&(l=l.add(h.field))})}),l})(e).forEach(i=>{n.has(i.canonicalString())||i.isKeyField()||e.ce.push(new bu(i,r))}),n.has(Et.keyField().canonicalString())||e.ce.push(new bu(Et.keyField(),r))}return e.ce}function nr(t){const e=oe(t);return e.le||(e.le=Uk(e,Xo(t))),e.le}function Uk(t,e){if(t.limitType==="F")return Fg(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new bu(s.field,i)});const n=t.endAt?new Pu(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Pu(t.startAt.position,t.startAt.inclusive):null;return Fg(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function vh(t,e){const n=t.filters.concat([e]);return new Fa(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function _h(t,e,n){return new Fa(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function oc(t,e){return zf(nr(t),nr(e))&&t.limitType===e.limitType}function O_(t){return`${Bf(nr(t))}|lt:${t.limitType}`}function di(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>j_(s)).join(", ")}]`),sc(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>Qi(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>Qi(s)).join(",")),`Target(${r})`}(nr(t))}; limitType=${t.limitType})`}function ac(t,e){return e.isFoundDocument()&&function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):J.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)}(t,e)&&function(r,s){for(const i of Xo(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(t,e)&&function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0}(t,e)&&function(r,s){return!(r.startAt&&!function(o,l,c){const h=Og(o,l,c);return o.inclusive?h<=0:h<0}(r.startAt,Xo(r),s)||r.endAt&&!function(o,l,c){const h=Og(o,l,c);return o.inclusive?h>=0:h>0}(r.endAt,Xo(r),s))}(t,e)}function $k(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function M_(t){return(e,n)=>{let r=!1;for(const s of Xo(t)){const i=Bk(s,e,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function Bk(t,e,n){const r=t.field.isKeyField()?J.comparator(e.key,n.key):function(i,o,l){const c=o.data.field(i),h=l.data.field(i);return c!==null&&h!==null?Gi(c,h):se()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return se()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class io{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){Zs(this.inner,(n,r)=>{for(const[s,i]of r)e(s,i)})}isEmpty(){return k_(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zk=new $e(J.comparator);function Rr(){return zk}const F_=new $e(J.comparator);function Oo(...t){let e=F_;for(const n of t)e=e.insert(n.key,n);return e}function U_(t){let e=F_;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Os(){return Jo()}function $_(){return Jo()}function Jo(){return new io(t=>t.toString(),(t,e)=>t.isEqual(e))}const qk=new $e(J.comparator),Hk=new It(J.comparator);function ce(...t){let e=Hk;for(const n of t)e=e.add(n);return e}const Wk=new It(_e);function Kk(){return Wk}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qf(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Cu(e)?"-0":e}}function B_(t){return{integerValue:""+t}}function Gk(t,e){return Ik(e)?B_(e):qf(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lc{constructor(){this._=void 0}}function Qk(t,e,n){return t instanceof Ru?function(s,i){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&Ff(i)&&(i=Uf(i)),i&&(o.fields.__previous_value__=i),{mapValue:o}}(n,e):t instanceof Ta?q_(t,e):t instanceof Ia?H_(t,e):function(s,i){const o=z_(s,i),l=$g(o)+$g(s.Pe);return mh(o)&&mh(s.Pe)?B_(l):qf(s.serializer,l)}(t,e)}function Yk(t,e,n){return t instanceof Ta?q_(t,e):t instanceof Ia?H_(t,e):n}function z_(t,e){return t instanceof Du?function(r){return mh(r)||function(i){return!!i&&"doubleValue"in i}(r)}(e)?e:{integerValue:0}:null}class Ru extends lc{}class Ta extends lc{constructor(e){super(),this.elements=e}}function q_(t,e){const n=W_(e);for(const r of t.elements)n.some(s=>sr(s,r))||n.push(r);return{arrayValue:{values:n}}}class Ia extends lc{constructor(e){super(),this.elements=e}}function H_(t,e){let n=W_(e);for(const r of t.elements)n=n.filter(s=>!sr(s,r));return{arrayValue:{values:n}}}class Du extends lc{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function $g(t){return Ke(t.integerValue||t.doubleValue)}function W_(t){return $f(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function Xk(t,e){return t.field.isEqual(e.field)&&function(r,s){return r instanceof Ta&&s instanceof Ta||r instanceof Ia&&s instanceof Ia?Ki(r.elements,s.elements,sr):r instanceof Du&&s instanceof Du?sr(r.Pe,s.Pe):r instanceof Ru&&s instanceof Ru}(t.transform,e.transform)}class Jk{constructor(e,n){this.version=e,this.transformResults=n}}class Pn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Pn}static exists(e){return new Pn(void 0,e)}static updateTime(e){return new Pn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Gl(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class uc{}function K_(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Hf(t.key,Pn.none()):new Ua(t.key,t.data,Pn.none());{const n=t.data,r=Jt.empty();let s=new It(Et.comparator);for(let i of e.fields)if(!s.has(i)){let o=n.field(i);o===null&&i.length>1&&(i=i.popLast(),o=n.field(i)),o===null?r.delete(i):r.set(i,o),s=s.add(i)}return new Ss(t.key,r,new pn(s.toArray()),Pn.none())}}function Zk(t,e,n){t instanceof Ua?function(s,i,o){const l=s.value.clone(),c=zg(s.fieldTransforms,i,o.transformResults);l.setAll(c),i.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):t instanceof Ss?function(s,i,o){if(!Gl(s.precondition,i))return void i.convertToUnknownDocument(o.version);const l=zg(s.fieldTransforms,i,o.transformResults),c=i.data;c.setAll(G_(s)),c.setAll(l),i.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(t,e,n):function(s,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function Zo(t,e,n,r){return t instanceof Ua?function(i,o,l,c){if(!Gl(i.precondition,o))return l;const h=i.value.clone(),p=qg(i.fieldTransforms,c,o);return h.setAll(p),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),null}(t,e,n,r):t instanceof Ss?function(i,o,l,c){if(!Gl(i.precondition,o))return l;const h=qg(i.fieldTransforms,c,o),p=o.data;return p.setAll(G_(i)),p.setAll(h),o.convertToFoundDocument(o.version,p).setHasLocalMutations(),l===null?null:l.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(m=>m.field))}(t,e,n,r):function(i,o,l){return Gl(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):l}(t,e,n)}function e1(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),i=z_(r.transform,s||null);i!=null&&(n===null&&(n=Jt.empty()),n.set(r.field,i))}return n||null}function Bg(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&Ki(r,s,(i,o)=>Xk(i,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Ua extends uc{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Ss extends uc{constructor(e,n,r,s,i=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function G_(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function zg(t,e,n){const r=new Map;Ie(t.length===n.length);for(let s=0;s<n.length;s++){const i=t[s],o=i.transform,l=e.data.field(i.field);r.set(i.field,Yk(o,l,n[s]))}return r}function qg(t,e,n){const r=new Map;for(const s of t){const i=s.transform,o=n.data.field(s.field);r.set(s.field,Qk(i,o,e))}return r}class Hf extends uc{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class t1 extends uc{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n1{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&Zk(i,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Zo(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Zo(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=$_();return this.mutations.forEach(s=>{const i=e.get(s.key),o=i.overlayedDocument;let l=this.applyToLocalView(o,i.mutatedFields);l=n.has(s.key)?null:l;const c=K_(o,l);c!==null&&r.set(s.key,c),o.isValidDocument()||o.convertToNoDocument(ie.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),ce())}isEqual(e){return this.batchId===e.batchId&&Ki(this.mutations,e.mutations,(n,r)=>Bg(n,r))&&Ki(this.baseMutations,e.baseMutations,(n,r)=>Bg(n,r))}}class Wf{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){Ie(e.mutations.length===r.length);let s=function(){return qk}();const i=e.mutations;for(let o=0;o<i.length;o++)s=s.insert(i[o].key,r[o].version);return new Wf(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r1{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s1{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var nt,pe;function i1(t){switch(t){default:return se();case O.CANCELLED:case O.UNKNOWN:case O.DEADLINE_EXCEEDED:case O.RESOURCE_EXHAUSTED:case O.INTERNAL:case O.UNAVAILABLE:case O.UNAUTHENTICATED:return!1;case O.INVALID_ARGUMENT:case O.NOT_FOUND:case O.ALREADY_EXISTS:case O.PERMISSION_DENIED:case O.FAILED_PRECONDITION:case O.ABORTED:case O.OUT_OF_RANGE:case O.UNIMPLEMENTED:case O.DATA_LOSS:return!0}}function Q_(t){if(t===void 0)return br("GRPC error has no .code"),O.UNKNOWN;switch(t){case nt.OK:return O.OK;case nt.CANCELLED:return O.CANCELLED;case nt.UNKNOWN:return O.UNKNOWN;case nt.DEADLINE_EXCEEDED:return O.DEADLINE_EXCEEDED;case nt.RESOURCE_EXHAUSTED:return O.RESOURCE_EXHAUSTED;case nt.INTERNAL:return O.INTERNAL;case nt.UNAVAILABLE:return O.UNAVAILABLE;case nt.UNAUTHENTICATED:return O.UNAUTHENTICATED;case nt.INVALID_ARGUMENT:return O.INVALID_ARGUMENT;case nt.NOT_FOUND:return O.NOT_FOUND;case nt.ALREADY_EXISTS:return O.ALREADY_EXISTS;case nt.PERMISSION_DENIED:return O.PERMISSION_DENIED;case nt.FAILED_PRECONDITION:return O.FAILED_PRECONDITION;case nt.ABORTED:return O.ABORTED;case nt.OUT_OF_RANGE:return O.OUT_OF_RANGE;case nt.UNIMPLEMENTED:return O.UNIMPLEMENTED;case nt.DATA_LOSS:return O.DATA_LOSS;default:return se()}}(pe=nt||(nt={}))[pe.OK=0]="OK",pe[pe.CANCELLED=1]="CANCELLED",pe[pe.UNKNOWN=2]="UNKNOWN",pe[pe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",pe[pe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",pe[pe.NOT_FOUND=5]="NOT_FOUND",pe[pe.ALREADY_EXISTS=6]="ALREADY_EXISTS",pe[pe.PERMISSION_DENIED=7]="PERMISSION_DENIED",pe[pe.UNAUTHENTICATED=16]="UNAUTHENTICATED",pe[pe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",pe[pe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",pe[pe.ABORTED=10]="ABORTED",pe[pe.OUT_OF_RANGE=11]="OUT_OF_RANGE",pe[pe.UNIMPLEMENTED=12]="UNIMPLEMENTED",pe[pe.INTERNAL=13]="INTERNAL",pe[pe.UNAVAILABLE=14]="UNAVAILABLE",pe[pe.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function o1(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a1=new Us([4294967295,4294967295],0);function Hg(t){const e=o1().encode(t),n=new __;return n.update(e),new Uint8Array(n.digest())}function Wg(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new Us([n,r],0),new Us([s,i],0)]}class Kf{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Mo(`Invalid padding: ${n}`);if(r<0)throw new Mo(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Mo(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Mo(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=Us.fromNumber(this.Ie)}Ee(e,n,r){let s=e.add(n.multiply(Us.fromNumber(r)));return s.compare(a1)===1&&(s=new Us([s.getBits(0),s.getBits(1)],0)),s.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=Hg(e),[r,s]=Wg(n);for(let i=0;i<this.hashCount;i++){const o=this.Ee(r,s,i);if(!this.de(o))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new Kf(i,s,n);return r.forEach(l=>o.insert(l)),o}insert(e){if(this.Ie===0)return;const n=Hg(e),[r,s]=Wg(n);for(let i=0;i<this.hashCount;i++){const o=this.Ee(r,s,i);this.Ae(o)}}Ae(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Mo extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cc{constructor(e,n,r,s,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,$a.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new cc(ie.min(),s,new $e(_e),Rr(),ce())}}class $a{constructor(e,n,r,s,i){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new $a(r,n,ce(),ce(),ce())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ql{constructor(e,n,r,s){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=s}}class Y_{constructor(e,n){this.targetId=e,this.me=n}}class X_{constructor(e,n,r=kt.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class Kg{constructor(){this.fe=0,this.ge=Qg(),this.pe=kt.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=ce(),n=ce(),r=ce();return this.ge.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:se()}}),new $a(this.pe,this.ye,e,n,r)}Ce(){this.we=!1,this.ge=Qg()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Ie(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class l1{constructor(e){this.Le=e,this.Be=new Map,this.ke=Rr(),this.qe=Gg(),this.Qe=new $e(_e)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{const r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:se()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,s)=>{this.ze(s)&&n(s)})}He(e){const n=e.targetId,r=e.me.count,s=this.Je(n);if(s){const i=s.target;if(yh(i))if(r===0){const o=new J(i.path);this.Ue(n,o,Mt.newNoDocument(o,ie.min()))}else Ie(r===1);else{const o=this.Ye(n);if(o!==r){const l=this.Ze(e),c=l?this.Xe(l,e,o):1;if(c!==0){this.je(n);const h=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,h)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=n;let o,l;try{o=Qs(r).toUint8Array()}catch(c){if(c instanceof A_)return Wi("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{l=new Kf(o,s,i)}catch(c){return Wi(c instanceof Mo?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return l.Ie===0?null:l}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){const r=this.Le.getRemoteKeysForTarget(n);let s=0;return r.forEach(i=>{const o=this.Le.tt(),l=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;e.mightContain(l)||(this.Ue(n,i,null),s++)}),s}rt(e){const n=new Map;this.Be.forEach((i,o)=>{const l=this.Je(o);if(l){if(i.current&&yh(l.target)){const c=new J(l.target.path);this.ke.get(c)!==null||this.it(o,c)||this.Ue(o,c,Mt.newNoDocument(c,e))}i.be&&(n.set(o,i.ve()),i.Ce())}});let r=ce();this.qe.forEach((i,o)=>{let l=!0;o.forEachWhile(c=>{const h=this.Je(c);return!h||h.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(r=r.add(i))}),this.ke.forEach((i,o)=>o.setReadTime(e));const s=new cc(e,n,this.Qe,this.ke,r);return this.ke=Rr(),this.qe=Gg(),this.Qe=new $e(_e),s}$e(e,n){if(!this.ze(e))return;const r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;const s=this.Ge(e);this.it(e,n)?s.Fe(n,1):s.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new Kg,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new It(_e),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||G("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new Kg),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function Gg(){return new $e(J.comparator)}function Qg(){return new $e(J.comparator)}const u1={asc:"ASCENDING",desc:"DESCENDING"},c1={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},d1={and:"AND",or:"OR"};class h1{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function wh(t,e){return t.useProto3Json||sc(e)?e:{value:e}}function ju(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function J_(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function f1(t,e){return ju(t,e.toTimestamp())}function rr(t){return Ie(!!t),ie.fromTimestamp(function(n){const r=ws(n);return new ct(r.seconds,r.nanos)}(t))}function Gf(t,e){return xh(t,e).canonicalString()}function xh(t,e){const n=function(s){return new De(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function Z_(t){const e=De.fromString(t);return Ie(sw(e)),e}function Eh(t,e){return Gf(t.databaseId,e.path)}function ld(t,e){const n=Z_(e);if(n.get(1)!==t.databaseId.projectId)throw new K(O.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new K(O.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new J(tw(n))}function ew(t,e){return Gf(t.databaseId,e)}function p1(t){const e=Z_(t);return e.length===4?De.emptyPath():tw(e)}function Th(t){return new De(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function tw(t){return Ie(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function Yg(t,e,n){return{name:Eh(t,e),fields:n.value.mapValue.fields}}function m1(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(h){return h==="NO_CHANGE"?0:h==="ADD"?1:h==="REMOVE"?2:h==="CURRENT"?3:h==="RESET"?4:se()}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(h,p){return h.useProto3Json?(Ie(p===void 0||typeof p=="string"),kt.fromBase64String(p||"")):(Ie(p===void 0||p instanceof Buffer||p instanceof Uint8Array),kt.fromUint8Array(p||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,l=o&&function(h){const p=h.code===void 0?O.UNKNOWN:Q_(h.code);return new K(p,h.message||"")}(o);n=new X_(r,s,i,l||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=ld(t,r.document.name),i=rr(r.document.updateTime),o=r.document.createTime?rr(r.document.createTime):ie.min(),l=new Jt({mapValue:{fields:r.document.fields}}),c=Mt.newFoundDocument(s,i,o,l),h=r.targetIds||[],p=r.removedTargetIds||[];n=new Ql(h,p,c.key,c)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=ld(t,r.document),i=r.readTime?rr(r.readTime):ie.min(),o=Mt.newNoDocument(s,i),l=r.removedTargetIds||[];n=new Ql([],l,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=ld(t,r.document),i=r.removedTargetIds||[];n=new Ql([],i,s,null)}else{if(!("filter"in e))return se();{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,o=new s1(s,i),l=r.targetId;n=new Y_(l,o)}}return n}function g1(t,e){let n;if(e instanceof Ua)n={update:Yg(t,e.key,e.value)};else if(e instanceof Hf)n={delete:Eh(t,e.key)};else if(e instanceof Ss)n={update:Yg(t,e.key,e.data),updateMask:S1(e.fieldMask)};else{if(!(e instanceof t1))return se();n={verify:Eh(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(i,o){const l=o.transform;if(l instanceof Ru)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof Ta)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof Ia)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof Du)return{fieldPath:o.field.canonicalString(),increment:l.Pe};throw se()}(0,r))),e.precondition.isNone||(n.currentDocument=function(s,i){return i.updateTime!==void 0?{updateTime:f1(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:se()}(t,e.precondition)),n}function y1(t,e){return t&&t.length>0?(Ie(e!==void 0),t.map(n=>function(s,i){let o=s.updateTime?rr(s.updateTime):rr(i);return o.isEqual(ie.min())&&(o=rr(i)),new Jk(o,s.transformResults||[])}(n,e))):[]}function v1(t,e){return{documents:[ew(t,e.path)]}}function _1(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=ew(t,s);const i=function(h){if(h.length!==0)return rw($n.create(h,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const o=function(h){if(h.length!==0)return h.map(p=>function(g){return{field:hi(g.field),direction:E1(g.dir)}}(p))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const l=wh(t,e.limit);return l!==null&&(n.structuredQuery.limit=l),e.startAt&&(n.structuredQuery.startAt=function(h){return{before:h.inclusive,values:h.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(h){return{before:!h.inclusive,values:h.position}}(e.endAt)),{_t:n,parent:s}}function w1(t){let e=p1(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){Ie(r===1);const p=n.from[0];p.allDescendants?s=p.collectionId:e=e.child(p.collectionId)}let i=[];n.where&&(i=function(m){const g=nw(m);return g instanceof $n&&R_(g)?g.getFilters():[g]}(n.where));let o=[];n.orderBy&&(o=function(m){return m.map(g=>function(b){return new bu(fi(b.field),function(j){switch(j){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(b.direction))}(g))}(n.orderBy));let l=null;n.limit&&(l=function(m){let g;return g=typeof m=="object"?m.value:m,sc(g)?null:g}(n.limit));let c=null;n.startAt&&(c=function(m){const g=!!m.before,k=m.values||[];return new Pu(k,g)}(n.startAt));let h=null;return n.endAt&&(h=function(m){const g=!m.before,k=m.values||[];return new Pu(k,g)}(n.endAt)),Fk(e,s,o,i,l,"F",c,h)}function x1(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return se()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function nw(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=fi(n.unaryFilter.field);return st.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=fi(n.unaryFilter.field);return st.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=fi(n.unaryFilter.field);return st.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=fi(n.unaryFilter.field);return st.create(o,"!=",{nullValue:"NULL_VALUE"});default:return se()}}(t):t.fieldFilter!==void 0?function(n){return st.create(fi(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return se()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return $n.create(n.compositeFilter.filters.map(r=>nw(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return se()}}(n.compositeFilter.op))}(t):se()}function E1(t){return u1[t]}function T1(t){return c1[t]}function I1(t){return d1[t]}function hi(t){return{fieldPath:t.canonicalString()}}function fi(t){return Et.fromServerFormat(t.fieldPath)}function rw(t){return t instanceof st?function(n){if(n.op==="=="){if(Lg(n.value))return{unaryFilter:{field:hi(n.field),op:"IS_NAN"}};if(Vg(n.value))return{unaryFilter:{field:hi(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Lg(n.value))return{unaryFilter:{field:hi(n.field),op:"IS_NOT_NAN"}};if(Vg(n.value))return{unaryFilter:{field:hi(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:hi(n.field),op:T1(n.op),value:n.value}}}(t):t instanceof $n?function(n){const r=n.getFilters().map(s=>rw(s));return r.length===1?r[0]:{compositeFilter:{op:I1(n.op),filters:r}}}(t):se()}function S1(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function sw(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ns{constructor(e,n,r,s,i=ie.min(),o=ie.min(),l=kt.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=l,this.expectedCount=c}withSequenceNumber(e){return new ns(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new ns(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new ns(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new ns(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N1{constructor(e){this.ct=e}}function k1(t){const e=w1({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?_h(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A1{constructor(){this.un=new C1}addToCollectionParentIndex(e,n){return this.un.add(n),U.resolve()}getCollectionParents(e,n){return U.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return U.resolve()}deleteFieldIndex(e,n){return U.resolve()}deleteAllFieldIndexes(e){return U.resolve()}createTargetIndexes(e,n){return U.resolve()}getDocumentsMatchingTarget(e,n){return U.resolve(null)}getIndexType(e,n){return U.resolve(0)}getFieldIndexes(e,n){return U.resolve([])}getNextCollectionGroupToUpdate(e){return U.resolve(null)}getMinOffset(e,n){return U.resolve(_s.min())}getMinOffsetFromCollectionGroup(e,n){return U.resolve(_s.min())}updateCollectionGroup(e,n,r){return U.resolve()}updateIndexEntries(e,n){return U.resolve()}}class C1{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new It(De.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new It(De.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yi{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new Yi(0)}static kn(){return new Yi(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P1{constructor(){this.changes=new io(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Mt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?U.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b1{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R1{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&Zo(r.mutation,s,pn.empty(),ct.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,ce()).next(()=>r))}getLocalViewOfDocuments(e,n,r=ce()){const s=Os();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(i=>{let o=Oo();return i.forEach((l,c)=>{o=o.insert(l,c.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=Os();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,ce()))}populateOverlays(e,n,r){const s=[];return r.forEach(i=>{n.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((o,l)=>{n.set(o,l)})})}computeViews(e,n,r,s){let i=Rr();const o=Jo(),l=function(){return Jo()}();return n.forEach((c,h)=>{const p=r.get(h.key);s.has(h.key)&&(p===void 0||p.mutation instanceof Ss)?i=i.insert(h.key,h):p!==void 0?(o.set(h.key,p.mutation.getFieldMask()),Zo(p.mutation,h,p.mutation.getFieldMask(),ct.now())):o.set(h.key,pn.empty())}),this.recalculateAndSaveOverlays(e,i).next(c=>(c.forEach((h,p)=>o.set(h,p)),n.forEach((h,p)=>{var m;return l.set(h,new b1(p,(m=o.get(h))!==null&&m!==void 0?m:null))}),l))}recalculateAndSaveOverlays(e,n){const r=Jo();let s=new $e((o,l)=>o-l),i=ce();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const l of o)l.keys().forEach(c=>{const h=n.get(c);if(h===null)return;let p=r.get(c)||pn.empty();p=l.applyToLocalView(h,p),r.set(c,p);const m=(s.get(l.batchId)||ce()).add(c);s=s.insert(l.batchId,m)})}).next(()=>{const o=[],l=s.getReverseIterator();for(;l.hasNext();){const c=l.getNext(),h=c.key,p=c.value,m=$_();p.forEach(g=>{if(!i.has(g)){const k=K_(n.get(g),r.get(g));k!==null&&m.set(g,k),i=i.add(g)}}),o.push(this.documentOverlayCache.saveOverlays(e,h,m))}return U.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,s){return function(o){return J.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):L_(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(i=>{const o=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-i.size):U.resolve(Os());let l=-1,c=i;return o.next(h=>U.forEach(h,(p,m)=>(l<m.largestBatchId&&(l=m.largestBatchId),i.get(p)?U.resolve():this.remoteDocumentCache.getEntry(e,p).next(g=>{c=c.insert(p,g)}))).next(()=>this.populateOverlays(e,h,i)).next(()=>this.computeViews(e,c,h,ce())).next(p=>({batchId:l,changes:U_(p)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new J(n)).next(r=>{let s=Oo();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const i=n.collectionGroup;let o=Oo();return this.indexManager.getCollectionParents(e,i).next(l=>U.forEach(l,c=>{const h=function(m,g){return new Fa(g,null,m.explicitOrderBy.slice(),m.filters.slice(),m.limit,m.limitType,m.startAt,m.endAt)}(n,c.child(i));return this.getDocumentsMatchingCollectionQuery(e,h,r,s).next(p=>{p.forEach((m,g)=>{o=o.insert(m,g)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,i,s))).next(o=>{i.forEach((c,h)=>{const p=h.getKey();o.get(p)===null&&(o=o.insert(p,Mt.newInvalidDocument(p)))});let l=Oo();return o.forEach((c,h)=>{const p=i.get(c);p!==void 0&&Zo(p.mutation,h,pn.empty(),ct.now()),ac(n,h)&&(l=l.insert(c,h))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D1{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return U.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:rr(s.createTime)}}(n)),U.resolve()}getNamedQuery(e,n){return U.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(s){return{name:s.name,query:k1(s.bundledQuery),readTime:rr(s.readTime)}}(n)),U.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j1{constructor(){this.overlays=new $e(J.comparator),this.Ir=new Map}getOverlay(e,n){return U.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Os();return U.forEach(n,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,i)=>{this.ht(e,n,i)}),U.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.Ir.get(r);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.Ir.delete(r)),U.resolve()}getOverlaysForCollection(e,n,r){const s=Os(),i=n.length+1,o=new J(n.child("")),l=this.overlays.getIteratorFrom(o);for(;l.hasNext();){const c=l.getNext().value,h=c.getKey();if(!n.isPrefixOf(h.path))break;h.path.length===i&&c.largestBatchId>r&&s.set(c.getKey(),c)}return U.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let i=new $e((h,p)=>h-p);const o=this.overlays.getIterator();for(;o.hasNext();){const h=o.getNext().value;if(h.getKey().getCollectionGroup()===n&&h.largestBatchId>r){let p=i.get(h.largestBatchId);p===null&&(p=Os(),i=i.insert(h.largestBatchId,p)),p.set(h.getKey(),h)}}const l=Os(),c=i.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((h,p)=>l.set(h,p)),!(l.size()>=s)););return U.resolve(l)}ht(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const o=this.Ir.get(s.largestBatchId).delete(r.key);this.Ir.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new r1(n,r));let i=this.Ir.get(n);i===void 0&&(i=ce(),this.Ir.set(n,i)),this.Ir.set(n,i.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V1{constructor(){this.sessionToken=kt.EMPTY_BYTE_STRING}getSessionToken(e){return U.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,U.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qf{constructor(){this.Tr=new It(ft.Er),this.dr=new It(ft.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const r=new ft(e,n);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Vr(new ft(e,n))}mr(e,n){e.forEach(r=>this.removeReference(r,n))}gr(e){const n=new J(new De([])),r=new ft(n,e),s=new ft(n,e+1),i=[];return this.dr.forEachInRange([r,s],o=>{this.Vr(o),i.push(o.key)}),i}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new J(new De([])),r=new ft(n,e),s=new ft(n,e+1);let i=ce();return this.dr.forEachInRange([r,s],o=>{i=i.add(o.key)}),i}containsKey(e){const n=new ft(e,0),r=this.Tr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class ft{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return J.comparator(e.key,n.key)||_e(e.wr,n.wr)}static Ar(e,n){return _e(e.wr,n.wr)||J.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L1{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new It(ft.Er)}checkEmpty(e){return U.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const i=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new n1(i,n,r,s);this.mutationQueue.push(o);for(const l of s)this.br=this.br.add(new ft(l.key,i)),this.indexManager.addToCollectionParentIndex(e,l.key.path.popLast());return U.resolve(o)}lookupMutationBatch(e,n){return U.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.vr(r),i=s<0?0:s;return U.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return U.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return U.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new ft(n,0),s=new ft(n,Number.POSITIVE_INFINITY),i=[];return this.br.forEachInRange([r,s],o=>{const l=this.Dr(o.wr);i.push(l)}),U.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new It(_e);return n.forEach(s=>{const i=new ft(s,0),o=new ft(s,Number.POSITIVE_INFINITY);this.br.forEachInRange([i,o],l=>{r=r.add(l.wr)})}),U.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let i=r;J.isDocumentKey(i)||(i=i.child(""));const o=new ft(new J(i),0);let l=new It(_e);return this.br.forEachWhile(c=>{const h=c.key.path;return!!r.isPrefixOf(h)&&(h.length===s&&(l=l.add(c.wr)),!0)},o),U.resolve(this.Cr(l))}Cr(e){const n=[];return e.forEach(r=>{const s=this.Dr(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){Ie(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return U.forEach(n.mutations,s=>{const i=new ft(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,n){const r=new ft(n,0),s=this.br.firstAfterOrEqual(r);return U.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,U.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O1{constructor(e){this.Mr=e,this.docs=function(){return new $e(J.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,o=this.Mr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return U.resolve(r?r.document.mutableCopy():Mt.newInvalidDocument(n))}getEntries(e,n){let r=Rr();return n.forEach(s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():Mt.newInvalidDocument(s))}),U.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let i=Rr();const o=n.path,l=new J(o.child("")),c=this.docs.getIteratorFrom(l);for(;c.hasNext();){const{key:h,value:{document:p}}=c.getNext();if(!o.isPrefixOf(h.path))break;h.path.length>o.length+1||wk(_k(p),r)<=0||(s.has(p.key)||ac(n,p))&&(i=i.insert(p.key,p.mutableCopy()))}return U.resolve(i)}getAllFromCollectionGroup(e,n,r,s){se()}Or(e,n){return U.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new M1(this)}getSize(e){return U.resolve(this.size)}}class M1 extends P1{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.cr.addEntry(e,s)):this.cr.removeEntry(r)}),U.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F1{constructor(e){this.persistence=e,this.Nr=new io(n=>Bf(n),zf),this.lastRemoteSnapshotVersion=ie.min(),this.highestTargetId=0,this.Lr=0,this.Br=new Qf,this.targetCount=0,this.kr=Yi.Bn()}forEachTarget(e,n){return this.Nr.forEach((r,s)=>n(s)),U.resolve()}getLastRemoteSnapshotVersion(e){return U.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return U.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),U.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Lr&&(this.Lr=n),U.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new Yi(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,U.resolve()}updateTargetData(e,n){return this.Kn(n),U.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,U.resolve()}removeTargets(e,n,r){let s=0;const i=[];return this.Nr.forEach((o,l)=>{l.sequenceNumber<=n&&r.get(l.targetId)===null&&(this.Nr.delete(o),i.push(this.removeMatchingKeysForTargetId(e,l.targetId)),s++)}),U.waitFor(i).next(()=>s)}getTargetCount(e){return U.resolve(this.targetCount)}getTargetData(e,n){const r=this.Nr.get(n)||null;return U.resolve(r)}addMatchingKeys(e,n,r){return this.Br.Rr(n,r),U.resolve()}removeMatchingKeys(e,n,r){this.Br.mr(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach(o=>{i.push(s.markPotentiallyOrphaned(e,o))}),U.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),U.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Br.yr(n);return U.resolve(r)}containsKey(e,n){return U.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U1{constructor(e,n){this.qr={},this.overlays={},this.Qr=new Mf(0),this.Kr=!1,this.Kr=!0,this.$r=new V1,this.referenceDelegate=e(this),this.Ur=new F1(this),this.indexManager=new A1,this.remoteDocumentCache=function(s){return new O1(s)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new N1(n),this.Gr=new D1(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new j1,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.qr[e.toKey()];return r||(r=new L1(n,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,r){G("MemoryPersistence","Starting transaction:",e);const s=new $1(this.Qr.next());return this.referenceDelegate.zr(),r(s).next(i=>this.referenceDelegate.jr(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Hr(e,n){return U.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,n)))}}class $1 extends Ek{constructor(e){super(),this.currentSequenceNumber=e}}class Yf{constructor(e){this.persistence=e,this.Jr=new Qf,this.Yr=null}static Zr(e){return new Yf(e)}get Xr(){if(this.Yr)return this.Yr;throw se()}addReference(e,n,r){return this.Jr.addReference(r,n),this.Xr.delete(r.toString()),U.resolve()}removeReference(e,n,r){return this.Jr.removeReference(r,n),this.Xr.add(r.toString()),U.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),U.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(s=>this.Xr.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(i=>this.Xr.add(i.toString()))}).next(()=>r.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return U.forEach(this.Xr,r=>{const s=J.fromPath(r);return this.ei(e,s).next(i=>{i||n.removeEntry(s,ie.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(r=>{r?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return U.or([()=>U.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xf{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.$i=r,this.Ui=s}static Wi(e,n){let r=ce(),s=ce();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new Xf(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B1{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z1{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return zT()?8:Tk($t())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,r,s){const i={result:null};return this.Yi(e,n).next(o=>{i.result=o}).next(()=>{if(!i.result)return this.Zi(e,n,s,r).next(o=>{i.result=o})}).next(()=>{if(i.result)return;const o=new B1;return this.Xi(e,n,o).next(l=>{if(i.result=l,this.zi)return this.es(e,n,o,l.size)})}).next(()=>i.result)}es(e,n,r,s){return r.documentReadCount<this.ji?(bo()<=de.DEBUG&&G("QueryEngine","SDK will not create cache indexes for query:",di(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),U.resolve()):(bo()<=de.DEBUG&&G("QueryEngine","Query:",di(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.Hi*s?(bo()<=de.DEBUG&&G("QueryEngine","The SDK decides to create cache indexes for query:",di(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,nr(n))):U.resolve())}Yi(e,n){if(Ug(n))return U.resolve(null);let r=nr(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=_h(n,null,"F"),r=nr(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(i=>{const o=ce(...i);return this.Ji.getDocuments(e,o).next(l=>this.indexManager.getMinOffset(e,r).next(c=>{const h=this.ts(n,l);return this.ns(n,h,o,c.readTime)?this.Yi(e,_h(n,null,"F")):this.rs(e,h,n,c)}))})))}Zi(e,n,r,s){return Ug(n)||s.isEqual(ie.min())?U.resolve(null):this.Ji.getDocuments(e,r).next(i=>{const o=this.ts(n,i);return this.ns(n,o,r,s)?U.resolve(null):(bo()<=de.DEBUG&&G("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),di(n)),this.rs(e,o,n,vk(s,-1)).next(l=>l))})}ts(e,n){let r=new It(M_(e));return n.forEach((s,i)=>{ac(e,i)&&(r=r.add(i))}),r}ns(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}Xi(e,n,r){return bo()<=de.DEBUG&&G("QueryEngine","Using full collection scan to execute query:",di(n)),this.Ji.getDocumentsMatchingQuery(e,n,_s.min(),r)}rs(e,n,r,s){return this.Ji.getDocumentsMatchingQuery(e,r,s).next(i=>(n.forEach(o=>{i=i.insert(o.key,o)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q1{constructor(e,n,r,s){this.persistence=e,this.ss=n,this.serializer=s,this.os=new $e(_e),this._s=new io(i=>Bf(i),zf),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new R1(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}}function H1(t,e,n,r){return new q1(t,e,n,r)}async function iw(t,e){const n=oe(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(i=>(s=i,n.ls(e),n.mutationQueue.getAllMutationBatches(r))).next(i=>{const o=[],l=[];let c=ce();for(const h of s){o.push(h.batchId);for(const p of h.mutations)c=c.add(p.key)}for(const h of i){l.push(h.batchId);for(const p of h.mutations)c=c.add(p.key)}return n.localDocuments.getDocuments(r,c).next(h=>({hs:h,removedBatchIds:o,addedBatchIds:l}))})})}function W1(t,e){const n=oe(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),i=n.cs.newChangeBuffer({trackRemovals:!0});return function(l,c,h,p){const m=h.batch,g=m.keys();let k=U.resolve();return g.forEach(b=>{k=k.next(()=>p.getEntry(c,b)).next(P=>{const j=h.docVersions.get(b);Ie(j!==null),P.version.compareTo(j)<0&&(m.applyToRemoteDocument(P,h),P.isValidDocument()&&(P.setReadTime(h.commitVersion),p.addEntry(P)))})}),k.next(()=>l.mutationQueue.removeMutationBatch(c,m))}(n,r,e,i).next(()=>i.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(l){let c=ce();for(let h=0;h<l.mutationResults.length;++h)l.mutationResults[h].transformResults.length>0&&(c=c.add(l.batch.mutations[h].key));return c}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function ow(t){const e=oe(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function K1(t,e){const n=oe(t),r=e.snapshotVersion;let s=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const o=n.cs.newChangeBuffer({trackRemovals:!0});s=n.os;const l=[];e.targetChanges.forEach((p,m)=>{const g=s.get(m);if(!g)return;l.push(n.Ur.removeMatchingKeys(i,p.removedDocuments,m).next(()=>n.Ur.addMatchingKeys(i,p.addedDocuments,m)));let k=g.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(m)!==null?k=k.withResumeToken(kt.EMPTY_BYTE_STRING,ie.min()).withLastLimboFreeSnapshotVersion(ie.min()):p.resumeToken.approximateByteSize()>0&&(k=k.withResumeToken(p.resumeToken,r)),s=s.insert(m,k),function(P,j,S){return P.resumeToken.approximateByteSize()===0||j.snapshotVersion.toMicroseconds()-P.snapshotVersion.toMicroseconds()>=3e8?!0:S.addedDocuments.size+S.modifiedDocuments.size+S.removedDocuments.size>0}(g,k,p)&&l.push(n.Ur.updateTargetData(i,k))});let c=Rr(),h=ce();if(e.documentUpdates.forEach(p=>{e.resolvedLimboDocuments.has(p)&&l.push(n.persistence.referenceDelegate.updateLimboDocument(i,p))}),l.push(G1(i,o,e.documentUpdates).next(p=>{c=p.Ps,h=p.Is})),!r.isEqual(ie.min())){const p=n.Ur.getLastRemoteSnapshotVersion(i).next(m=>n.Ur.setTargetsMetadata(i,i.currentSequenceNumber,r));l.push(p)}return U.waitFor(l).next(()=>o.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,c,h)).next(()=>c)}).then(i=>(n.os=s,i))}function G1(t,e,n){let r=ce(),s=ce();return n.forEach(i=>r=r.add(i)),e.getEntries(t,r).next(i=>{let o=Rr();return n.forEach((l,c)=>{const h=i.get(l);c.isFoundDocument()!==h.isFoundDocument()&&(s=s.add(l)),c.isNoDocument()&&c.version.isEqual(ie.min())?(e.removeEntry(l,c.readTime),o=o.insert(l,c)):!h.isValidDocument()||c.version.compareTo(h.version)>0||c.version.compareTo(h.version)===0&&h.hasPendingWrites?(e.addEntry(c),o=o.insert(l,c)):G("LocalStore","Ignoring outdated watch update for ",l,". Current version:",h.version," Watch version:",c.version)}),{Ps:o,Is:s}})}function Q1(t,e){const n=oe(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Y1(t,e){const n=oe(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.Ur.getTargetData(r,e).next(i=>i?(s=i,U.resolve(s)):n.Ur.allocateTargetId(r).next(o=>(s=new ns(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Ur.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.os.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.os=n.os.insert(r.targetId,r),n._s.set(e,r.targetId)),r})}async function Ih(t,e,n){const r=oe(t),s=r.os.get(e),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,o=>r.persistence.referenceDelegate.removeTarget(o,s))}catch(o){if(!Ma(o))throw o;G("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.os=r.os.remove(e),r._s.delete(s.target)}function Xg(t,e,n){const r=oe(t);let s=ie.min(),i=ce();return r.persistence.runTransaction("Execute query","readwrite",o=>function(c,h,p){const m=oe(c),g=m._s.get(p);return g!==void 0?U.resolve(m.os.get(g)):m.Ur.getTargetData(h,p)}(r,o,nr(e)).next(l=>{if(l)return s=l.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(o,l.targetId).next(c=>{i=c})}).next(()=>r.ss.getDocumentsMatchingQuery(o,e,n?s:ie.min(),n?i:ce())).next(l=>(X1(r,$k(e),l),{documents:l,Ts:i})))}function X1(t,e,n){let r=t.us.get(e)||ie.min();n.forEach((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)}),t.us.set(e,r)}class Jg{constructor(){this.activeTargetIds=Kk()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class J1{constructor(){this.so=new Jg,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,r){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new Jg,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z1{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zg{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){G("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){G("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Cl=null;function ud(){return Cl===null?Cl=function(){return 268435456+Math.round(2147483648*Math.random())}():Cl++,"0x"+Cl.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eA={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tA{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vt="WebChannelConnection";class nA extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+n.host,this.vo=`projects/${s}/databases/${i}`,this.Co=this.databaseId.database==="(default)"?`project_id=${s}`:`project_id=${s}&database_id=${i}`}get Fo(){return!1}Mo(n,r,s,i,o){const l=ud(),c=this.xo(n,r.toUriEncodedString());G("RestConnection",`Sending RPC '${n}' ${l}:`,c,s);const h={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(h,i,o),this.No(n,c,h,s).then(p=>(G("RestConnection",`Received RPC '${n}' ${l}: `,p),p),p=>{throw Wi("RestConnection",`RPC '${n}' ${l} failed with error: `,p,"url: ",c,"request:",s),p})}Lo(n,r,s,i,o,l){return this.Mo(n,r,s,i,o)}Oo(n,r,s){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+so}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((i,o)=>n[o]=i),s&&s.headers.forEach((i,o)=>n[o]=i)}xo(n,r){const s=eA[n];return`${this.Do}/v1/${r}:${s}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,r,s){const i=ud();return new Promise((o,l)=>{const c=new w_;c.setWithCredentials(!0),c.listenOnce(x_.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case Wl.NO_ERROR:const p=c.getResponseJson();G(Vt,`XHR for RPC '${e}' ${i} received:`,JSON.stringify(p)),o(p);break;case Wl.TIMEOUT:G(Vt,`RPC '${e}' ${i} timed out`),l(new K(O.DEADLINE_EXCEEDED,"Request time out"));break;case Wl.HTTP_ERROR:const m=c.getStatus();if(G(Vt,`RPC '${e}' ${i} failed with status:`,m,"response text:",c.getResponseText()),m>0){let g=c.getResponseJson();Array.isArray(g)&&(g=g[0]);const k=g==null?void 0:g.error;if(k&&k.status&&k.message){const b=function(j){const S=j.toLowerCase().replace(/_/g,"-");return Object.values(O).indexOf(S)>=0?S:O.UNKNOWN}(k.status);l(new K(b,k.message))}else l(new K(O.UNKNOWN,"Server responded with status "+c.getStatus()))}else l(new K(O.UNAVAILABLE,"Connection failed."));break;default:se()}}finally{G(Vt,`RPC '${e}' ${i} completed.`)}});const h=JSON.stringify(s);G(Vt,`RPC '${e}' ${i} sending request:`,s),c.send(n,"POST",h,r,15)})}Bo(e,n,r){const s=ud(),i=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=I_(),l=T_(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},h=this.longPollingOptions.timeoutSeconds;h!==void 0&&(c.longPollingTimeout=Math.round(1e3*h)),this.useFetchStreams&&(c.useFetchStreams=!0),this.Oo(c.initMessageHeaders,n,r),c.encodeInitMessageHeaders=!0;const p=i.join("");G(Vt,`Creating RPC '${e}' stream ${s}: ${p}`,c);const m=o.createWebChannel(p,c);let g=!1,k=!1;const b=new tA({Io:j=>{k?G(Vt,`Not sending because RPC '${e}' stream ${s} is closed:`,j):(g||(G(Vt,`Opening RPC '${e}' stream ${s} transport.`),m.open(),g=!0),G(Vt,`RPC '${e}' stream ${s} sending:`,j),m.send(j))},To:()=>m.close()}),P=(j,S,_)=>{j.listen(S,N=>{try{_(N)}catch(D){setTimeout(()=>{throw D},0)}})};return P(m,Lo.EventType.OPEN,()=>{k||(G(Vt,`RPC '${e}' stream ${s} transport opened.`),b.yo())}),P(m,Lo.EventType.CLOSE,()=>{k||(k=!0,G(Vt,`RPC '${e}' stream ${s} transport closed`),b.So())}),P(m,Lo.EventType.ERROR,j=>{k||(k=!0,Wi(Vt,`RPC '${e}' stream ${s} transport errored:`,j),b.So(new K(O.UNAVAILABLE,"The operation could not be completed")))}),P(m,Lo.EventType.MESSAGE,j=>{var S;if(!k){const _=j.data[0];Ie(!!_);const N=_,D=N.error||((S=N[0])===null||S===void 0?void 0:S.error);if(D){G(Vt,`RPC '${e}' stream ${s} received error:`,D);const $=D.status;let F=function(x){const T=nt[x];if(T!==void 0)return Q_(T)}($),w=D.message;F===void 0&&(F=O.INTERNAL,w="Unknown error status: "+$+" with message "+D.message),k=!0,b.So(new K(F,w)),m.close()}else G(Vt,`RPC '${e}' stream ${s} received:`,_),b.bo(_)}}),P(l,E_.STAT_EVENT,j=>{j.stat===fh.PROXY?G(Vt,`RPC '${e}' stream ${s} detected buffering proxy`):j.stat===fh.NOPROXY&&G(Vt,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{b.wo()},0),b}}function cd(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dc(t){return new h1(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aw{constructor(e,n,r=1e3,s=1.5,i=6e4){this.ui=e,this.timerId=n,this.ko=r,this.qo=s,this.Qo=i,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),s=Math.max(0,n-r);s>0&&G("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,s,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lw{constructor(e,n,r,s,i,o,l,c){this.ui=e,this.Ho=r,this.Jo=s,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=l,this.listener=c,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new aw(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===O.RESOURCE_EXHAUSTED?(br(n.toString()),br("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===O.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(n)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.Yo===n&&this.P_(r,s)},r=>{e(()=>{const s=new K(O.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(s)})})}P_(e,n){const r=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(s=>{r(()=>this.I_(s))}),this.stream.onMessage(s=>{r(()=>++this.e_==1?this.E_(s):this.onNext(s))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return G("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(G("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class rA extends lw{constructor(e,n,r,s,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const n=m1(this.serializer,e),r=function(i){if(!("targetChange"in i))return ie.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?ie.min():o.readTime?rr(o.readTime):ie.min()}(e);return this.listener.d_(n,r)}A_(e){const n={};n.database=Th(this.serializer),n.addTarget=function(i,o){let l;const c=o.target;if(l=yh(c)?{documents:v1(i,c)}:{query:_1(i,c)._t},l.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){l.resumeToken=J_(i,o.resumeToken);const h=wh(i,o.expectedCount);h!==null&&(l.expectedCount=h)}else if(o.snapshotVersion.compareTo(ie.min())>0){l.readTime=ju(i,o.snapshotVersion.toTimestamp());const h=wh(i,o.expectedCount);h!==null&&(l.expectedCount=h)}return l}(this.serializer,e);const r=x1(this.serializer,e);r&&(n.labels=r),this.a_(n)}R_(e){const n={};n.database=Th(this.serializer),n.removeTarget=e,this.a_(n)}}class sA extends lw{constructor(e,n,r,s,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return Ie(!!e.streamToken),this.lastStreamToken=e.streamToken,Ie(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){Ie(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const n=y1(e.writeResults,e.commitTime),r=rr(e.commitTime);return this.listener.g_(r,n)}p_(){const e={};e.database=Th(this.serializer),this.a_(e)}m_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>g1(this.serializer,r))};this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iA extends class{}{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.y_=!1}w_(){if(this.y_)throw new K(O.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,r,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.Mo(e,xh(n,r),s,i,o)).catch(i=>{throw i.name==="FirebaseError"?(i.code===O.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new K(O.UNKNOWN,i.toString())})}Lo(e,n,r,s,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,l])=>this.connection.Lo(e,xh(n,r),s,o,l,i)).catch(o=>{throw o.name==="FirebaseError"?(o.code===O.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new K(O.UNKNOWN,o.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class oA{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(br(n),this.D_=!1):G("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aA{constructor(e,n,r,s,i){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=i,this.k_._o(o=>{r.enqueueAndForget(async()=>{ei(this)&&(G("RemoteStore","Restarting streams for network reachability change."),await async function(c){const h=oe(c);h.L_.add(4),await Ba(h),h.q_.set("Unknown"),h.L_.delete(4),await hc(h)}(this))})}),this.q_=new oA(r,s)}}async function hc(t){if(ei(t))for(const e of t.B_)await e(!0)}async function Ba(t){for(const e of t.B_)await e(!1)}function uw(t,e){const n=oe(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),tp(n)?ep(n):oo(n).r_()&&Zf(n,e))}function Jf(t,e){const n=oe(t),r=oo(n);n.N_.delete(e),r.r_()&&cw(n,e),n.N_.size===0&&(r.r_()?r.o_():ei(n)&&n.q_.set("Unknown"))}function Zf(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ie.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}oo(t).A_(e)}function cw(t,e){t.Q_.xe(e),oo(t).R_(e)}function ep(t){t.Q_=new l1({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),oo(t).start(),t.q_.v_()}function tp(t){return ei(t)&&!oo(t).n_()&&t.N_.size>0}function ei(t){return oe(t).L_.size===0}function dw(t){t.Q_=void 0}async function lA(t){t.q_.set("Online")}async function uA(t){t.N_.forEach((e,n)=>{Zf(t,e)})}async function cA(t,e){dw(t),tp(t)?(t.q_.M_(e),ep(t)):t.q_.set("Unknown")}async function dA(t,e,n){if(t.q_.set("Online"),e instanceof X_&&e.state===2&&e.cause)try{await async function(s,i){const o=i.cause;for(const l of i.targetIds)s.N_.has(l)&&(await s.remoteSyncer.rejectListen(l,o),s.N_.delete(l),s.Q_.removeTarget(l))}(t,e)}catch(r){G("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Vu(t,r)}else if(e instanceof Ql?t.Q_.Ke(e):e instanceof Y_?t.Q_.He(e):t.Q_.We(e),!n.isEqual(ie.min()))try{const r=await ow(t.localStore);n.compareTo(r)>=0&&await function(i,o){const l=i.Q_.rt(o);return l.targetChanges.forEach((c,h)=>{if(c.resumeToken.approximateByteSize()>0){const p=i.N_.get(h);p&&i.N_.set(h,p.withResumeToken(c.resumeToken,o))}}),l.targetMismatches.forEach((c,h)=>{const p=i.N_.get(c);if(!p)return;i.N_.set(c,p.withResumeToken(kt.EMPTY_BYTE_STRING,p.snapshotVersion)),cw(i,c);const m=new ns(p.target,c,h,p.sequenceNumber);Zf(i,m)}),i.remoteSyncer.applyRemoteEvent(l)}(t,n)}catch(r){G("RemoteStore","Failed to raise snapshot:",r),await Vu(t,r)}}async function Vu(t,e,n){if(!Ma(e))throw e;t.L_.add(1),await Ba(t),t.q_.set("Offline"),n||(n=()=>ow(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{G("RemoteStore","Retrying IndexedDB access"),await n(),t.L_.delete(1),await hc(t)})}function hw(t,e){return e().catch(n=>Vu(t,n,e))}async function fc(t){const e=oe(t),n=xs(e);let r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;hA(e);)try{const s=await Q1(e.localStore,r);if(s===null){e.O_.length===0&&n.o_();break}r=s.batchId,fA(e,s)}catch(s){await Vu(e,s)}fw(e)&&pw(e)}function hA(t){return ei(t)&&t.O_.length<10}function fA(t,e){t.O_.push(e);const n=xs(t);n.r_()&&n.V_&&n.m_(e.mutations)}function fw(t){return ei(t)&&!xs(t).n_()&&t.O_.length>0}function pw(t){xs(t).start()}async function pA(t){xs(t).p_()}async function mA(t){const e=xs(t);for(const n of t.O_)e.m_(n.mutations)}async function gA(t,e,n){const r=t.O_.shift(),s=Wf.from(r,e,n);await hw(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await fc(t)}async function yA(t,e){e&&xs(t).V_&&await async function(r,s){if(function(o){return i1(o)&&o!==O.ABORTED}(s.code)){const i=r.O_.shift();xs(r).s_(),await hw(r,()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s)),await fc(r)}}(t,e),fw(t)&&pw(t)}async function ey(t,e){const n=oe(t);n.asyncQueue.verifyOperationInProgress(),G("RemoteStore","RemoteStore received new credentials");const r=ei(n);n.L_.add(3),await Ba(n),r&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await hc(n)}async function vA(t,e){const n=oe(t);e?(n.L_.delete(2),await hc(n)):e||(n.L_.add(2),await Ba(n),n.q_.set("Unknown"))}function oo(t){return t.K_||(t.K_=function(n,r,s){const i=oe(n);return i.w_(),new rA(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Eo:lA.bind(null,t),Ro:uA.bind(null,t),mo:cA.bind(null,t),d_:dA.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),tp(t)?ep(t):t.q_.set("Unknown")):(await t.K_.stop(),dw(t))})),t.K_}function xs(t){return t.U_||(t.U_=function(n,r,s){const i=oe(n);return i.w_(),new sA(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:pA.bind(null,t),mo:yA.bind(null,t),f_:mA.bind(null,t),g_:gA.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await fc(t)):(await t.U_.stop(),t.O_.length>0&&(G("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class np{constructor(e,n,r,s,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new Er,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,i){const o=Date.now()+r,l=new np(e,n,o,s,i);return l.start(r),l}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new K(O.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function rp(t,e){if(br("AsyncQueue",`${e}: ${t}`),Ma(t))return new K(O.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oi{constructor(e){this.comparator=e?(n,r)=>e(n,r)||J.comparator(n.key,r.key):(n,r)=>J.comparator(n.key,r.key),this.keyedMap=Oo(),this.sortedSet=new $e(this.comparator)}static emptySet(e){return new Oi(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Oi)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Oi;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ty{constructor(){this.W_=new $e(J.comparator)}track(e){const n=e.doc.key,r=this.W_.get(n);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(n,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(n):e.type===1&&r.type===2?this.W_=this.W_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):se():this.W_=this.W_.insert(n,e)}G_(){const e=[];return this.W_.inorderTraversal((n,r)=>{e.push(r)}),e}}class Xi{constructor(e,n,r,s,i,o,l,c,h){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=l,this.excludesMetadataChanges=c,this.hasCachedResults=h}static fromInitialDocuments(e,n,r,s,i){const o=[];return n.forEach(l=>{o.push({type:0,doc:l})}),new Xi(e,n,Oi.emptySet(n),o,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&oc(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _A{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class wA{constructor(){this.queries=ny(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,r){const s=oe(n),i=s.queries;s.queries=ny(),i.forEach((o,l)=>{for(const c of l.j_)c.onError(r)})})(this,new K(O.ABORTED,"Firestore shutting down"))}}function ny(){return new io(t=>O_(t),oc)}async function sp(t,e){const n=oe(t);let r=3;const s=e.query;let i=n.queries.get(s);i?!i.H_()&&e.J_()&&(r=2):(i=new _A,r=e.J_()?0:1);try{switch(r){case 0:i.z_=await n.onListen(s,!0);break;case 1:i.z_=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(o){const l=rp(o,`Initialization of query '${di(e.query)}' failed`);return void e.onError(l)}n.queries.set(s,i),i.j_.push(e),e.Z_(n.onlineState),i.z_&&e.X_(i.z_)&&op(n)}async function ip(t,e){const n=oe(t),r=e.query;let s=3;const i=n.queries.get(r);if(i){const o=i.j_.indexOf(e);o>=0&&(i.j_.splice(o,1),i.j_.length===0?s=e.J_()?0:1:!i.H_()&&e.J_()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function xA(t,e){const n=oe(t);let r=!1;for(const s of e){const i=s.query,o=n.queries.get(i);if(o){for(const l of o.j_)l.X_(s)&&(r=!0);o.z_=s}}r&&op(n)}function EA(t,e,n){const r=oe(t),s=r.queries.get(e);if(s)for(const i of s.j_)i.onError(n);r.queries.delete(e)}function op(t){t.Y_.forEach(e=>{e.next()})}var Sh,ry;(ry=Sh||(Sh={})).ea="default",ry.Cache="cache";class ap{constructor(e,n,r){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new Xi(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;const r=n!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=Xi.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==Sh.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mw{constructor(e){this.key=e}}class gw{constructor(e){this.key=e}}class TA{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=ce(),this.mutatedKeys=ce(),this.Aa=M_(e),this.Ra=new Oi(this.Aa)}get Va(){return this.Ta}ma(e,n){const r=n?n.fa:new ty,s=n?n.Ra:this.Ra;let i=n?n.mutatedKeys:this.mutatedKeys,o=s,l=!1;const c=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,h=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((p,m)=>{const g=s.get(p),k=ac(this.query,m)?m:null,b=!!g&&this.mutatedKeys.has(g.key),P=!!k&&(k.hasLocalMutations||this.mutatedKeys.has(k.key)&&k.hasCommittedMutations);let j=!1;g&&k?g.data.isEqual(k.data)?b!==P&&(r.track({type:3,doc:k}),j=!0):this.ga(g,k)||(r.track({type:2,doc:k}),j=!0,(c&&this.Aa(k,c)>0||h&&this.Aa(k,h)<0)&&(l=!0)):!g&&k?(r.track({type:0,doc:k}),j=!0):g&&!k&&(r.track({type:1,doc:g}),j=!0,(c||h)&&(l=!0)),j&&(k?(o=o.add(k),i=P?i.add(p):i.delete(p)):(o=o.delete(p),i=i.delete(p)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const p=this.query.limitType==="F"?o.last():o.first();o=o.delete(p.key),i=i.delete(p.key),r.track({type:1,doc:p})}return{Ra:o,fa:r,ns:l,mutatedKeys:i}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const i=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const o=e.fa.G_();o.sort((p,m)=>function(k,b){const P=j=>{switch(j){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return se()}};return P(k)-P(b)}(p.type,m.type)||this.Aa(p.doc,m.doc)),this.pa(r),s=s!=null&&s;const l=n&&!s?this.ya():[],c=this.da.size===0&&this.current&&!s?1:0,h=c!==this.Ea;return this.Ea=c,o.length!==0||h?{snapshot:new Xi(this.query,e.Ra,i,o,e.mutatedKeys,c===0,h,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:l}:{wa:l}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new ty,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=ce(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});const n=[];return e.forEach(r=>{this.da.has(r)||n.push(new gw(r))}),this.da.forEach(r=>{e.has(r)||n.push(new mw(r))}),n}ba(e){this.Ta=e.Ts,this.da=ce();const n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return Xi.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class IA{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class SA{constructor(e){this.key=e,this.va=!1}}class NA{constructor(e,n,r,s,i,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new io(l=>O_(l),oc),this.Ma=new Map,this.xa=new Set,this.Oa=new $e(J.comparator),this.Na=new Map,this.La=new Qf,this.Ba={},this.ka=new Map,this.qa=Yi.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function kA(t,e,n=!0){const r=Ew(t);let s;const i=r.Fa.get(e);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.Da()):s=await yw(r,e,n,!0),s}async function AA(t,e){const n=Ew(t);await yw(n,e,!0,!1)}async function yw(t,e,n,r){const s=await Y1(t.localStore,nr(e)),i=s.targetId,o=t.sharedClientState.addLocalQueryTarget(i,n);let l;return r&&(l=await CA(t,e,i,o==="current",s.resumeToken)),t.isPrimaryClient&&n&&uw(t.remoteStore,s),l}async function CA(t,e,n,r,s){t.Ka=(m,g,k)=>async function(P,j,S,_){let N=j.view.ma(S);N.ns&&(N=await Xg(P.localStore,j.query,!1).then(({documents:w})=>j.view.ma(w,N)));const D=_&&_.targetChanges.get(j.targetId),$=_&&_.targetMismatches.get(j.targetId)!=null,F=j.view.applyChanges(N,P.isPrimaryClient,D,$);return iy(P,j.targetId,F.wa),F.snapshot}(t,m,g,k);const i=await Xg(t.localStore,e,!0),o=new TA(e,i.Ts),l=o.ma(i.documents),c=$a.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),h=o.applyChanges(l,t.isPrimaryClient,c);iy(t,n,h.wa);const p=new IA(e,n,o);return t.Fa.set(e,p),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),h.snapshot}async function PA(t,e,n){const r=oe(t),s=r.Fa.get(e),i=r.Ma.get(s.targetId);if(i.length>1)return r.Ma.set(s.targetId,i.filter(o=>!oc(o,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await Ih(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&Jf(r.remoteStore,s.targetId),Nh(r,s.targetId)}).catch(Oa)):(Nh(r,s.targetId),await Ih(r.localStore,s.targetId,!0))}async function bA(t,e){const n=oe(t),r=n.Fa.get(e),s=n.Ma.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Jf(n.remoteStore,r.targetId))}async function RA(t,e,n){const r=FA(t);try{const s=await function(o,l){const c=oe(o),h=ct.now(),p=l.reduce((k,b)=>k.add(b.key),ce());let m,g;return c.persistence.runTransaction("Locally write mutations","readwrite",k=>{let b=Rr(),P=ce();return c.cs.getEntries(k,p).next(j=>{b=j,b.forEach((S,_)=>{_.isValidDocument()||(P=P.add(S))})}).next(()=>c.localDocuments.getOverlayedDocuments(k,b)).next(j=>{m=j;const S=[];for(const _ of l){const N=e1(_,m.get(_.key).overlayedDocument);N!=null&&S.push(new Ss(_.key,N,C_(N.value.mapValue),Pn.exists(!0)))}return c.mutationQueue.addMutationBatch(k,h,S,l)}).next(j=>{g=j;const S=j.applyToLocalDocumentSet(m,P);return c.documentOverlayCache.saveOverlays(k,j.batchId,S)})}).then(()=>({batchId:g.batchId,changes:U_(m)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(o,l,c){let h=o.Ba[o.currentUser.toKey()];h||(h=new $e(_e)),h=h.insert(l,c),o.Ba[o.currentUser.toKey()]=h}(r,s.batchId,n),await za(r,s.changes),await fc(r.remoteStore)}catch(s){const i=rp(s,"Failed to persist write");n.reject(i)}}async function vw(t,e){const n=oe(t);try{const r=await K1(n.localStore,e);e.targetChanges.forEach((s,i)=>{const o=n.Na.get(i);o&&(Ie(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?o.va=!0:s.modifiedDocuments.size>0?Ie(o.va):s.removedDocuments.size>0&&(Ie(o.va),o.va=!1))}),await za(n,r,e)}catch(r){await Oa(r)}}function sy(t,e,n){const r=oe(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.Fa.forEach((i,o)=>{const l=o.view.Z_(e);l.snapshot&&s.push(l.snapshot)}),function(o,l){const c=oe(o);c.onlineState=l;let h=!1;c.queries.forEach((p,m)=>{for(const g of m.j_)g.Z_(l)&&(h=!0)}),h&&op(c)}(r.eventManager,e),s.length&&r.Ca.d_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function DA(t,e,n){const r=oe(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Na.get(e),i=s&&s.key;if(i){let o=new $e(J.comparator);o=o.insert(i,Mt.newNoDocument(i,ie.min()));const l=ce().add(i),c=new cc(ie.min(),new Map,new $e(_e),o,l);await vw(r,c),r.Oa=r.Oa.remove(i),r.Na.delete(e),lp(r)}else await Ih(r.localStore,e,!1).then(()=>Nh(r,e,n)).catch(Oa)}async function jA(t,e){const n=oe(t),r=e.batch.batchId;try{const s=await W1(n.localStore,e);ww(n,r,null),_w(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await za(n,s)}catch(s){await Oa(s)}}async function VA(t,e,n){const r=oe(t);try{const s=await function(o,l){const c=oe(o);return c.persistence.runTransaction("Reject batch","readwrite-primary",h=>{let p;return c.mutationQueue.lookupMutationBatch(h,l).next(m=>(Ie(m!==null),p=m.keys(),c.mutationQueue.removeMutationBatch(h,m))).next(()=>c.mutationQueue.performConsistencyCheck(h)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(h,p,l)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(h,p)).next(()=>c.localDocuments.getDocuments(h,p))})}(r.localStore,e);ww(r,e,n),_w(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await za(r,s)}catch(s){await Oa(s)}}function _w(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function ww(t,e,n){const r=oe(t);let s=r.Ba[r.currentUser.toKey()];if(s){const i=s.get(e);i&&(n?i.reject(n):i.resolve(),s=s.remove(e)),r.Ba[r.currentUser.toKey()]=s}}function Nh(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Ma.get(e))t.Fa.delete(r),n&&t.Ca.$a(r,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(r=>{t.La.containsKey(r)||xw(t,r)})}function xw(t,e){t.xa.delete(e.path.canonicalString());const n=t.Oa.get(e);n!==null&&(Jf(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),lp(t))}function iy(t,e,n){for(const r of n)r instanceof mw?(t.La.addReference(r.key,e),LA(t,r)):r instanceof gw?(G("SyncEngine","Document no longer in limbo: "+r.key),t.La.removeReference(r.key,e),t.La.containsKey(r.key)||xw(t,r.key)):se()}function LA(t,e){const n=e.key,r=n.path.canonicalString();t.Oa.get(n)||t.xa.has(r)||(G("SyncEngine","New document in limbo: "+n),t.xa.add(r),lp(t))}function lp(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const n=new J(De.fromString(e)),r=t.qa.next();t.Na.set(r,new SA(n)),t.Oa=t.Oa.insert(n,r),uw(t.remoteStore,new ns(nr(ic(n.path)),r,"TargetPurposeLimboResolution",Mf.oe))}}async function za(t,e,n){const r=oe(t),s=[],i=[],o=[];r.Fa.isEmpty()||(r.Fa.forEach((l,c)=>{o.push(r.Ka(c,e,n).then(h=>{var p;if((h||n)&&r.isPrimaryClient){const m=h?!h.fromCache:(p=n==null?void 0:n.targetChanges.get(c.targetId))===null||p===void 0?void 0:p.current;r.sharedClientState.updateQueryState(c.targetId,m?"current":"not-current")}if(h){s.push(h);const m=Xf.Wi(c.targetId,h);i.push(m)}}))}),await Promise.all(o),r.Ca.d_(s),await async function(c,h){const p=oe(c);try{await p.persistence.runTransaction("notifyLocalViewChanges","readwrite",m=>U.forEach(h,g=>U.forEach(g.$i,k=>p.persistence.referenceDelegate.addReference(m,g.targetId,k)).next(()=>U.forEach(g.Ui,k=>p.persistence.referenceDelegate.removeReference(m,g.targetId,k)))))}catch(m){if(!Ma(m))throw m;G("LocalStore","Failed to update sequence numbers: "+m)}for(const m of h){const g=m.targetId;if(!m.fromCache){const k=p.os.get(g),b=k.snapshotVersion,P=k.withLastLimboFreeSnapshotVersion(b);p.os=p.os.insert(g,P)}}}(r.localStore,i))}async function OA(t,e){const n=oe(t);if(!n.currentUser.isEqual(e)){G("SyncEngine","User change. New user:",e.toKey());const r=await iw(n.localStore,e);n.currentUser=e,function(i,o){i.ka.forEach(l=>{l.forEach(c=>{c.reject(new K(O.CANCELLED,o))})}),i.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await za(n,r.hs)}}function MA(t,e){const n=oe(t),r=n.Na.get(e);if(r&&r.va)return ce().add(r.key);{let s=ce();const i=n.Ma.get(e);if(!i)return s;for(const o of i){const l=n.Fa.get(o);s=s.unionWith(l.view.Va)}return s}}function Ew(t){const e=oe(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=vw.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=MA.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=DA.bind(null,e),e.Ca.d_=xA.bind(null,e.eventManager),e.Ca.$a=EA.bind(null,e.eventManager),e}function FA(t){const e=oe(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=jA.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=VA.bind(null,e),e}class Lu{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=dc(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,n){return null}Ha(e,n){return null}za(e){return H1(this.persistence,new z1,e.initialUser,this.serializer)}Ga(e){return new U1(Yf.Zr,this.serializer)}Wa(e){return new J1}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Lu.provider={build:()=>new Lu};class kh{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>sy(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=OA.bind(null,this.syncEngine),await vA(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new wA}()}createDatastore(e){const n=dc(e.databaseInfo.databaseId),r=function(i){return new nA(i)}(e.databaseInfo);return function(i,o,l,c){return new iA(i,o,l,c)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,s,i,o,l){return new aA(r,s,i,o,l)}(this.localStore,this.datastore,e.asyncQueue,n=>sy(this.syncEngine,n,0),function(){return Zg.D()?new Zg:new Z1}())}createSyncEngine(e,n){return function(s,i,o,l,c,h,p){const m=new NA(s,i,o,l,c,h);return p&&(m.Qa=!0),m}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(s){const i=oe(s);G("RemoteStore","RemoteStore shutting down."),i.L_.add(5),await Ba(i),i.k_.shutdown(),i.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}kh.provider={build:()=>new kh};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class up{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):br("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UA{constructor(e,n,r,s,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=Lt.UNAUTHENTICATED,this.clientId=N_.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(r,async o=>{G("FirestoreClient","Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(G("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Er;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=rp(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function dd(t,e){t.asyncQueue.verifyOperationInProgress(),G("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await iw(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function oy(t,e){t.asyncQueue.verifyOperationInProgress();const n=await $A(t);G("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>ey(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,s)=>ey(e.remoteStore,s)),t._onlineComponents=e}async function $A(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){G("FirestoreClient","Using user provided OfflineComponentProvider");try{await dd(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(s){return s.name==="FirebaseError"?s.code===O.FAILED_PRECONDITION||s.code===O.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;Wi("Error using user provided cache. Falling back to memory cache: "+n),await dd(t,new Lu)}}else G("FirestoreClient","Using default OfflineComponentProvider"),await dd(t,new Lu);return t._offlineComponents}async function Tw(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(G("FirestoreClient","Using user provided OnlineComponentProvider"),await oy(t,t._uninitializedComponentsProvider._online)):(G("FirestoreClient","Using default OnlineComponentProvider"),await oy(t,new kh))),t._onlineComponents}function BA(t){return Tw(t).then(e=>e.syncEngine)}async function Ou(t){const e=await Tw(t),n=e.eventManager;return n.onListen=kA.bind(null,e.syncEngine),n.onUnlisten=PA.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=AA.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=bA.bind(null,e.syncEngine),n}function zA(t,e,n={}){const r=new Er;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,l,c,h){const p=new up({next:g=>{p.Za(),o.enqueueAndForget(()=>ip(i,m));const k=g.docs.has(l);!k&&g.fromCache?h.reject(new K(O.UNAVAILABLE,"Failed to get document because the client is offline.")):k&&g.fromCache&&c&&c.source==="server"?h.reject(new K(O.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):h.resolve(g)},error:g=>h.reject(g)}),m=new ap(ic(l.path),p,{includeMetadataChanges:!0,_a:!0});return sp(i,m)}(await Ou(t),t.asyncQueue,e,n,r)),r.promise}function qA(t,e,n={}){const r=new Er;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,l,c,h){const p=new up({next:g=>{p.Za(),o.enqueueAndForget(()=>ip(i,m)),g.fromCache&&c.source==="server"?h.reject(new K(O.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):h.resolve(g)},error:g=>h.reject(g)}),m=new ap(l,p,{includeMetadataChanges:!0,_a:!0});return sp(i,m)}(await Ou(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Iw(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ay=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sw(t,e,n){if(!n)throw new K(O.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function HA(t,e,n,r){if(e===!0&&r===!0)throw new K(O.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function ly(t){if(!J.isDocumentKey(t))throw new K(O.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function uy(t){if(J.isDocumentKey(t))throw new K(O.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function pc(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":se()}function rn(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new K(O.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=pc(t);throw new K(O.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cy{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new K(O.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new K(O.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}HA("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Iw((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new K(O.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new K(O.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new K(O.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class mc{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new cy({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new K(O.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new K(O.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new cy(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new uk;switch(r.type){case"firstParty":return new fk(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new K(O.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=ay.get(n);r&&(G("ComponentProvider","Removing Datastore"),ay.delete(n),r.terminate())}(this),Promise.resolve()}}function WA(t,e,n,r={}){var s;const i=(t=rn(t,mc))._getSettings(),o=`${e}:${n}`;if(i.host!=="firestore.googleapis.com"&&i.host!==o&&Wi("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},i),{host:o,ssl:!1})),r.mockUserToken){let l,c;if(typeof r.mockUserToken=="string")l=r.mockUserToken,c=Lt.MOCK_USER;else{l=LT(r.mockUserToken,(s=t._app)===null||s===void 0?void 0:s.options.projectId);const h=r.mockUserToken.sub||r.mockUserToken.user_id;if(!h)throw new K(O.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");c=new Lt(h)}t._authCredentials=new ck(new S_(l,c))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ti{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new ti(this.firestore,e,this._query)}}class Ft{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new gs(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Ft(this.firestore,e,this._key)}}class gs extends ti{constructor(e,n,r){super(e,n,ic(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Ft(this.firestore,null,new J(e))}withConverter(e){return new gs(this.firestore,e,this._path)}}function ae(t,e,...n){if(t=Nt(t),Sw("collection","path",e),t instanceof mc){const r=De.fromString(e,...n);return uy(r),new gs(t,null,r)}{if(!(t instanceof Ft||t instanceof gs))throw new K(O.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(De.fromString(e,...n));return uy(r),new gs(t.firestore,null,r)}}function lt(t,e,...n){if(t=Nt(t),arguments.length===1&&(e=N_.newId()),Sw("doc","path",e),t instanceof mc){const r=De.fromString(e,...n);return ly(r),new Ft(t,null,new J(r))}{if(!(t instanceof Ft||t instanceof gs))throw new K(O.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(De.fromString(e,...n));return ly(r),new Ft(t.firestore,t instanceof gs?t.converter:null,new J(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dy{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new aw(this,"async_queue_retry"),this.Vu=()=>{const r=cd();r&&G("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;const n=cd();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const n=cd();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const n=new Er;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!Ma(e))throw e;G("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const n=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;const s=function(o){let l=o.message||"";return o.stack&&(l=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),l}(r);throw br("INTERNAL UNHANDLED ERROR: ",s),r}).then(r=>(this.du=!1,r))));return this.mu=n,n}enqueueAfterDelay(e,n,r){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);const s=np.createAndSchedule(this,e,n,r,i=>this.yu(i));return this.Tu.push(s),s}fu(){this.Eu&&se()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const n=this.Tu.indexOf(e);this.Tu.splice(n,1)}}function hy(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const s=n;for(const i of r)if(i in s&&typeof s[i]=="function")return!0;return!1}(t,["next","error","complete"])}class Dr extends mc{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new dy,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new dy(e),this._firestoreClient=void 0,await e}}}function KA(t,e){const n=typeof t=="object"?t:Mv(),r=typeof t=="string"?t:"(default)",s=kf(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const i=jT("firestore");i&&WA(s,...i)}return s}function gc(t){if(t._terminated)throw new K(O.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||GA(t),t._firestoreClient}function GA(t){var e,n,r;const s=t._freezeSettings(),i=function(l,c,h,p){return new Nk(l,c,h,p.host,p.ssl,p.experimentalForceLongPolling,p.experimentalAutoDetectLongPolling,Iw(p.experimentalLongPollingOptions),p.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,s);t._componentsProvider||!((n=s.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=s.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),t._firestoreClient=new UA(t._authCredentials,t._appCheckCredentials,t._queue,i,t._componentsProvider&&function(l){const c=l==null?void 0:l._online.build();return{_offline:l==null?void 0:l._offline.build(c),_online:c}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ji{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Ji(kt.fromBase64String(e))}catch(n){throw new K(O.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Ji(kt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yc{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new K(O.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Et(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cp{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dp{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new K(O.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new K(O.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return _e(this._lat,e._lat)||_e(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hp{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let i=0;i<r.length;++i)if(r[i]!==s[i])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QA=/^__.*__$/;class YA{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Ss(e,this.data,this.fieldMask,n,this.fieldTransforms):new Ua(e,this.data,n,this.fieldTransforms)}}class Nw{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Ss(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function kw(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw se()}}class fp{constructor(e,n,r,s,i,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.vu(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new fp(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Fu({path:r,xu:!1});return s.Ou(e),s}Nu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Fu({path:r,xu:!1});return s.vu(),s}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return Mu(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(kw(this.Cu)&&QA.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class XA{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||dc(e)}Qu(e,n,r,s=!1){return new fp({Cu:e,methodName:n,qu:r,path:Et.emptyPath(),xu:!1,ku:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function vc(t){const e=t._freezeSettings(),n=dc(t._databaseId);return new XA(t._databaseId,!!e.ignoreUndefinedProperties,n)}function Aw(t,e,n,r,s,i={}){const o=t.Qu(i.merge||i.mergeFields?2:0,e,n,s);pp("Data must be an object, but it was:",o,r);const l=Cw(r,o);let c,h;if(i.merge)c=new pn(o.fieldMask),h=o.fieldTransforms;else if(i.mergeFields){const p=[];for(const m of i.mergeFields){const g=Ah(e,m,n);if(!o.contains(g))throw new K(O.INVALID_ARGUMENT,`Field '${g}' is specified in your field mask but missing from your input data.`);bw(p,g)||p.push(g)}c=new pn(p),h=o.fieldTransforms.filter(m=>c.covers(m.field))}else c=null,h=o.fieldTransforms;return new YA(new Jt(l),c,h)}class _c extends cp{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof _c}}function JA(t,e,n,r){const s=t.Qu(1,e,n);pp("Data must be an object, but it was:",s,r);const i=[],o=Jt.empty();Zs(r,(c,h)=>{const p=mp(e,c,n);h=Nt(h);const m=s.Nu(p);if(h instanceof _c)i.push(p);else{const g=qa(h,m);g!=null&&(i.push(p),o.set(p,g))}});const l=new pn(i);return new Nw(o,l,s.fieldTransforms)}function ZA(t,e,n,r,s,i){const o=t.Qu(1,e,n),l=[Ah(e,r,n)],c=[s];if(i.length%2!=0)throw new K(O.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let g=0;g<i.length;g+=2)l.push(Ah(e,i[g])),c.push(i[g+1]);const h=[],p=Jt.empty();for(let g=l.length-1;g>=0;--g)if(!bw(h,l[g])){const k=l[g];let b=c[g];b=Nt(b);const P=o.Nu(k);if(b instanceof _c)h.push(k);else{const j=qa(b,P);j!=null&&(h.push(k),p.set(k,j))}}const m=new pn(h);return new Nw(p,m,o.fieldTransforms)}function eC(t,e,n,r=!1){return qa(n,t.Qu(r?4:3,e))}function qa(t,e){if(Pw(t=Nt(t)))return pp("Unsupported field value:",e,t),Cw(t,e);if(t instanceof cp)return function(r,s){if(!kw(s.Cu))throw s.Bu(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Bu(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,s){const i=[];let o=0;for(const l of r){let c=qa(l,s.Lu(o));c==null&&(c={nullValue:"NULL_VALUE"}),i.push(c),o++}return{arrayValue:{values:i}}}(t,e)}return function(r,s){if((r=Nt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return Gk(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=ct.fromDate(r);return{timestampValue:ju(s.serializer,i)}}if(r instanceof ct){const i=new ct(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:ju(s.serializer,i)}}if(r instanceof dp)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Ji)return{bytesValue:J_(s.serializer,r._byteString)};if(r instanceof Ft){const i=s.databaseId,o=r.firestore._databaseId;if(!o.isEqual(i))throw s.Bu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:Gf(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof hp)return function(o,l){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(c=>{if(typeof c!="number")throw l.Bu("VectorValues must only contain numeric values.");return qf(l.serializer,c)})}}}}}}(r,s);throw s.Bu(`Unsupported field value: ${pc(r)}`)}(t,e)}function Cw(t,e){const n={};return k_(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Zs(t,(r,s)=>{const i=qa(s,e.Mu(r));i!=null&&(n[r]=i)}),{mapValue:{fields:n}}}function Pw(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof ct||t instanceof dp||t instanceof Ji||t instanceof Ft||t instanceof cp||t instanceof hp)}function pp(t,e,n){if(!Pw(n)||!function(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}(n)){const r=pc(n);throw r==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+r)}}function Ah(t,e,n){if((e=Nt(e))instanceof yc)return e._internalPath;if(typeof e=="string")return mp(t,e);throw Mu("Field path arguments must be of type string or ",t,!1,void 0,n)}const tC=new RegExp("[~\\*/\\[\\]]");function mp(t,e,n){if(e.search(tC)>=0)throw Mu(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new yc(...e.split("."))._internalPath}catch{throw Mu(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Mu(t,e,n,r,s){const i=r&&!r.isEmpty(),o=s!==void 0;let l=`Function ${e}() called with invalid data`;n&&(l+=" (via `toFirestore()`)"),l+=". ";let c="";return(i||o)&&(c+=" (found",i&&(c+=` in field ${r}`),o&&(c+=` in document ${s}`),c+=")"),new K(O.INVALID_ARGUMENT,l+t+c)}function bw(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rw{constructor(e,n,r,s,i){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new Ft(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new nC(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(gp("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class nC extends Rw{data(){return super.data()}}function gp(t,e){return typeof e=="string"?mp(t,e):e instanceof yc?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dw(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new K(O.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class yp{}class rC extends yp{}function rs(t,e,...n){let r=[];e instanceof yp&&r.push(e),r=r.concat(n),function(i){const o=i.filter(c=>c instanceof vp).length,l=i.filter(c=>c instanceof wc).length;if(o>1||o>0&&l>0)throw new K(O.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)t=s._apply(t);return t}class wc extends rC{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new wc(e,n,r)}_apply(e){const n=this._parse(e);return jw(e._query,n),new ti(e.firestore,e.converter,vh(e._query,n))}_parse(e){const n=vc(e.firestore);return function(i,o,l,c,h,p,m){let g;if(h.isKeyField()){if(p==="array-contains"||p==="array-contains-any")throw new K(O.INVALID_ARGUMENT,`Invalid Query. You can't perform '${p}' queries on documentId().`);if(p==="in"||p==="not-in"){py(m,p);const k=[];for(const b of m)k.push(fy(c,i,b));g={arrayValue:{values:k}}}else g=fy(c,i,m)}else p!=="in"&&p!=="not-in"&&p!=="array-contains-any"||py(m,p),g=eC(l,o,m,p==="in"||p==="not-in");return st.create(h,p,g)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function yr(t,e,n){const r=e,s=gp("where",t);return wc._create(s,r,n)}class vp extends yp{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new vp(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:$n.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(s,i){let o=s;const l=i.getFlattenedFilters();for(const c of l)jw(o,c),o=vh(o,c)}(e._query,n),new ti(e.firestore,e.converter,vh(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function fy(t,e,n){if(typeof(n=Nt(n))=="string"){if(n==="")throw new K(O.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!L_(e)&&n.indexOf("/")!==-1)throw new K(O.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(De.fromString(n));if(!J.isDocumentKey(r))throw new K(O.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return jg(t,new J(r))}if(n instanceof Ft)return jg(t,n._key);throw new K(O.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${pc(n)}.`)}function py(t,e){if(!Array.isArray(t)||t.length===0)throw new K(O.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function jw(t,e){const n=function(s,i){for(const o of s)for(const l of o.getFlattenedFilters())if(i.indexOf(l.op)>=0)return l.op;return null}(t.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new K(O.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new K(O.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class sC{convertValue(e,n="none"){switch(Ys(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ke(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Qs(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw se()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Zs(e,(s,i)=>{r[s]=this.convertValue(i,n)}),r}convertVectorValue(e){var n,r,s;const i=(s=(r=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||s===void 0?void 0:s.map(o=>Ke(o.doubleValue));return new hp(i)}convertGeoPoint(e){return new dp(Ke(e.latitude),Ke(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Uf(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(wa(e));default:return null}}convertTimestamp(e){const n=ws(e);return new ct(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=De.fromString(e);Ie(sw(r));const s=new xa(r.get(1),r.get(3)),i=new J(r.popFirst(5));return s.isEqual(n)||br(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vw(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fo{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Lw extends Rw{constructor(e,n,r,s,i,o){super(e,n,r,s,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Yl(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(gp("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class Yl extends Lw{data(e={}){return super.data(e)}}class Ow{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new Fo(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Yl(this._firestore,this._userDataWriter,r.key,r,new Fo(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new K(O.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,i){if(s._snapshot.oldDocs.isEmpty()){let o=0;return s._snapshot.docChanges.map(l=>{const c=new Yl(s._firestore,s._userDataWriter,l.doc.key,l.doc,new Fo(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);return l.doc,{type:"added",doc:c,oldIndex:-1,newIndex:o++}})}{let o=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(l=>i||l.type!==3).map(l=>{const c=new Yl(s._firestore,s._userDataWriter,l.doc.key,l.doc,new Fo(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);let h=-1,p=-1;return l.type!==0&&(h=o.indexOf(l.doc.key),o=o.delete(l.doc.key)),l.type!==1&&(o=o.add(l.doc),p=o.indexOf(l.doc.key)),{type:iC(l.type),doc:c,oldIndex:h,newIndex:p}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function iC(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return se()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ss(t){t=rn(t,Ft);const e=rn(t.firestore,Dr);return zA(gc(e),t._key).then(n=>Mw(e,t,n))}class _p extends sC{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ji(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Ft(this.firestore,null,n)}}function vr(t){t=rn(t,ti);const e=rn(t.firestore,Dr),n=gc(e),r=new _p(e);return Dw(t._query),qA(n,t._query).then(s=>new Ow(e,r,t,s))}function ki(t,e,n){t=rn(t,Ft);const r=rn(t.firestore,Dr),s=Vw(t.converter,e,n);return xc(r,[Aw(vc(r),"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,Pn.none())])}function Zr(t,e,n,...r){t=rn(t,Ft);const s=rn(t.firestore,Dr),i=vc(s);let o;return o=typeof(e=Nt(e))=="string"||e instanceof yc?ZA(i,"updateDoc",t._key,e,n,r):JA(i,"updateDoc",t._key,e),xc(s,[o.toMutation(t._key,Pn.exists(!0))])}function Ch(t){return xc(rn(t.firestore,Dr),[new Hf(t._key,Pn.none())])}function _r(t,e){const n=rn(t.firestore,Dr),r=lt(t),s=Vw(t.converter,e);return xc(n,[Aw(vc(t.firestore),"addDoc",r._key,s,t.converter!==null,{}).toMutation(r._key,Pn.exists(!1))]).then(()=>r)}function mt(t,...e){var n,r,s;t=Nt(t);let i={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||hy(e[o])||(i=e[o],o++);const l={includeMetadataChanges:i.includeMetadataChanges,source:i.source};if(hy(e[o])){const m=e[o];e[o]=(n=m.next)===null||n===void 0?void 0:n.bind(m),e[o+1]=(r=m.error)===null||r===void 0?void 0:r.bind(m),e[o+2]=(s=m.complete)===null||s===void 0?void 0:s.bind(m)}let c,h,p;if(t instanceof Ft)h=rn(t.firestore,Dr),p=ic(t._key.path),c={next:m=>{e[o]&&e[o](Mw(h,t,m))},error:e[o+1],complete:e[o+2]};else{const m=rn(t,ti);h=rn(m.firestore,Dr),p=m._query;const g=new _p(h);c={next:k=>{e[o]&&e[o](new Ow(h,g,m,k))},error:e[o+1],complete:e[o+2]},Dw(t._query)}return function(g,k,b,P){const j=new up(P),S=new ap(k,j,b);return g.asyncQueue.enqueueAndForget(async()=>sp(await Ou(g),S)),()=>{j.Za(),g.asyncQueue.enqueueAndForget(async()=>ip(await Ou(g),S))}}(gc(h),p,l,c)}function xc(t,e){return function(r,s){const i=new Er;return r.asyncQueue.enqueueAndForget(async()=>RA(await BA(r),s,i)),i.promise}(gc(t),e)}function Mw(t,e,n){const r=n.docs.get(e._key),s=new _p(t);return new Lw(t,s,e._key,r,new Fo(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(s){so=s})(no),Hi(new Ws("firestore",(r,{instanceIdentifier:s,options:i})=>{const o=r.getProvider("app").getImmediate(),l=new Dr(new dk(r.getProvider("auth-internal")),new mk(r.getProvider("app-check-internal")),function(h,p){if(!Object.prototype.hasOwnProperty.apply(h.options,["projectId"]))throw new K(O.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new xa(h.options.projectId,p)}(o,s),o);return i=Object.assign({useFetchStreams:n},i),l._setSettings(i),l},"PUBLIC").setMultipleInstances(!0)),ms(Cg,"4.7.3",e),ms(Cg,"4.7.3","esm2017")})();const oC=()=>(L.useEffect(()=>{const t="jspdf-script";if(!document.getElementById(t)){const e=document.createElement("script");e.id=t,e.src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js",e.async=!0,document.body.appendChild(e)}},[]),null),my=typeof __initial_auth_token<"u"?__initial_auth_token:null,kn={EMPLOYEE:"employee",ADMIN:"admin"},Y="artifacts/store/public/data",aC=(t,e)=>{const r=new Date(t),s=new Date(e);return isNaN(r.getTime())||isNaN(s.getTime())||r>s?0:(r.setHours(0,0,0,0),s.setHours(0,0,0,0),Math.round(Math.abs((r.getTime()-s.getTime())/864e5))+1)},Bn=L.createContext(null),wp=L.createContext(null),lC=({children:t})=>{const[e,n]=L.useState(null),[r,s]=L.useState(!0),[i,o]=L.useState(null),[l,c]=L.useState(null),[h,p]=L.useState(null);L.useEffect(()=>{const b=Ov({apiKey:"AIzaSyDW9Bo4aDQBL3ofJ5AqNiVbH4iB7sA2y7w",authDomain:"timeflow-c5c29.firebaseapp.com",projectId:"timeflow-c5c29",storageBucket:"timeflow-c5c29.firebasestorage.app",messagingSenderId:"448310422112",appId:"1:448310422112:web:46beb7b81a7f987a227105"}),P=ak(b),j=KA(b);c(P),o(j);const S=YS(P,async $=>{if($){const F=lt(j,`${Y}/users`,$.uid),w=await ss(F);w.exists()?n({...w.data(),id:$.uid}):(n({id:$.uid,username:`user-${$.uid.substring(0,5)}`,role:kn.EMPLOYEE,leaveBalance:15}),await ki(F,{username:`user-${$.uid.substring(0,5)}`,role:kn.EMPLOYEE,password:"N/A",hourlyRate:20,leaveBalance:15},{merge:!0})),p($.uid)}else n(null),p(null);s(!1)});(async()=>{try{my?await KS(P,my):await BS(P)}catch($){console.error("Firebase authentication failed:",$),s(!1)}})();const N=async()=>{if(!j)return;const $=ae(j,`${Y}/users`),F=ae(j,`${Y}/posProducts`),w=ae(j,`${Y}/customerLoyaltyAccounts`);if(ae(j,`${Y}/appointments`),ae(j,`${Y}/events`),ae(j,`${Y}/shifts`),ae(j,`${Y}/clockEvents`),ae(j,`${Y}/posSales`),ae(j,`${Y}/timeOffRequests`),(await vr($)).empty){const A=[{id:"emp1",username:"employee",password:"password",role:kn.EMPLOYEE,hourlyRate:20,leaveBalance:15},{id:"admin1",username:"admin",password:"adminpass",role:kn.ADMIN,hourlyRate:30,leaveBalance:20}];for(const C of A)await ki(lt($,C.id),C);console.log("Seeded initial dummy users to Firestore.")}if((await vr(F)).empty){const A=[{id:"p1",sku:"SKU001",name:"Laptop",price:1200,costPrice:900,stock:10,lowStockThreshold:5,stockHistory:[]},{id:"p2",sku:"SKU002",name:"Mouse",price:25,costPrice:15,stock:50,lowStockThreshold:10,stockHistory:[]},{id:"p3",sku:"SKU003",name:"Keyboard",price:75,costPrice:50,stock:30,lowStockThreshold:8,stockHistory:[]},{id:"p4",sku:"SKU004",name:"Monitor",price:300,costPrice:200,stock:15,lowStockThreshold:3,stockHistory:[]}];for(const C of A)await ki(lt(F,C.id),C);console.log("Seeded initial dummy products to Firestore.")}if((await vr(w)).empty){const A=[{loyaltyId:"CUST001",firstName:"Alice",lastName:"Smith",phoneNumber:"555-123-4567",discountRate:.05,notes:"Prefers email updates."},{loyaltyId:"CUST002",firstName:"Bob",lastName:"Johnson",phoneNumber:"555-987-6543",discountRate:.05,notes:"Always buys coffee."}];for(const C of A)await ki(lt(w,C.loyaltyId),C);console.log("Seeded initial dummy loyalty accounts to Firestore.")}},D=setTimeout(()=>{r||N()},1e3);return()=>{S(),clearTimeout(D)}},[r]);const m=async(k,b)=>{if(!i)return!1;try{const P=ae(i,`${Y}/users`),j=rs(P,yr("username","==",k),yr("password","==",b)),S=await vr(j);if(!S.empty){const _=S.docs[0],N={..._.data(),id:_.id};return n(N),p(_.id),!0}return!1}catch(P){return console.error("Error during login:",P),!1}},g=async()=>{if(l)try{await l.signOut(),n(null),p(null)}catch(k){console.error("Error signing out:",k)}};return u.jsx(Bn.Provider,{value:{currentUser:e,login:m,logout:g,loading:r,db:i,auth:l,userId:h},children:t})},uC=({children:t})=>{const[e,n]=L.useState("dashboard");return u.jsx(wp.Provider,{value:{currentView:e,setCurrentView:n},children:t})},cC=()=>{const[t,e]=L.useState(""),[n,r]=L.useState(""),[s,i]=L.useState(""),{login:o}=L.useContext(Bn),l=async c=>{c.preventDefault(),i(""),await o(t,n)||i("Invalid username or password.")};return u.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-100 p-4",children:u.jsxs("div",{className:"bg-white p-8 rounded-lg shadow-xl w-full max-w-md",children:[u.jsx("h2",{className:"text-3xl font-bold text-center text-gray-800 mb-8",children:"TimeFlow Login"}),u.jsxs("form",{onSubmit:l,className:"space-y-6",children:[u.jsxs("div",{children:[u.jsx("label",{htmlFor:"username",className:"block text-sm font-medium text-gray-700 mb-1",children:"Username"}),u.jsx("input",{type:"text",id:"username",className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent transition duration-200",value:t,onChange:c=>e(c.target.value),required:!0})]}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-1",children:"Password"}),u.jsx("input",{type:"password",id:"password",className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent transition duration-200",value:n,onChange:c=>r(c.target.value),required:!0})]}),s&&u.jsx("p",{className:"text-red-500 text-sm text-center",children:s}),u.jsx("button",{type:"submit",className:"w-full bg-blue-600 text-white py-2 px-4 rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 transition duration-200 font-semibold",children:"Login"})]}),u.jsxs("p",{className:"text-center text-gray-500 text-sm mt-6",children:[u.jsx("span",{className:"font-semibold",children:"Employee:"})," employee / password",u.jsx("br",{}),u.jsx("span",{className:"font-semibold",children:"Admin:"})," admin / adminpass"]})]})})},dC=()=>{const{currentUser:t,logout:e,userId:n}=L.useContext(Bn),{setCurrentView:r}=L.useContext(wp);return u.jsxs("div",{className:"w-64 bg-gray-800 text-white flex flex-col p-4 rounded-l-lg shadow-lg",children:[u.jsxs("div",{className:"flex-grow",children:[u.jsx("h1",{className:"text-2xl font-bold mb-8 text-blue-300",children:"TimeFlow"})," ",u.jsx("nav",{children:u.jsxs("ul",{children:[u.jsx("li",{className:"mb-2",children:u.jsxs("button",{onClick:()=>r("dashboard"),className:"w-full text-left px-4 py-2 rounded-md hover:bg-gray-700 transition duration-150 flex items-center space-x-2",children:[u.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})}),u.jsx("span",{children:"Dashboard"})]})}),u.jsx("li",{className:"mb-2",children:u.jsxs("button",{onClick:()=>r("timeclock"),className:"w-full text-left px-4 py-2 rounded-md hover:bg-gray-700 transition duration-150 flex items-center space-x-2",children:[u.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),u.jsx("span",{children:"Time Clock"})]})}),u.jsx("li",{className:"mb-2",children:u.jsxs("button",{onClick:()=>r("timeoff"),className:"w-full text-left px-4 py-2 rounded-md hover:bg-gray-700 transition duration-150 flex items-center space-x-2",children:[u.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),u.jsx("span",{children:"Time Off"})]})}),u.jsx("li",{className:"mb-2",children:u.jsxs("button",{onClick:()=>r("chat"),className:"w-full text-left px-4 py-2 rounded-md hover:bg-gray-700 transition duration-150 flex items-center space-x-2",children:[u.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M8 10h.01M12 10h.01M16 10h.01M9 16H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-5l-5 5v-5z"})}),u.jsx("span",{children:"Chat"})]})}),u.jsx("li",{className:"mb-2",children:u.jsxs("button",{onClick:()=>r("pos"),className:"w-full text-left px-4 py-2 rounded-md hover:bg-gray-700 transition duration-150 flex items-center space-x-2",children:[u.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})}),u.jsx("span",{children:"POS System"})]})}),u.jsx("li",{className:"mb-2",children:u.jsxs("button",{onClick:()=>r("appointmentsManagement"),className:"w-full text-left px-4 py-2 rounded-md hover:bg-gray-700 transition duration-150 flex items-center space-x-2",children:[u.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),u.jsx("span",{children:"Appointments"})]})}),(t==null?void 0:t.role)===kn.ADMIN&&u.jsx("li",{className:"mb-2",children:u.jsxs("button",{onClick:()=>r("admin"),className:"w-full text-left px-4 py-2 rounded-md hover:bg-gray-700 transition duration-150 flex items-center space-x-2",children:[u.jsxs("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:[u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]}),u.jsx("span",{children:"Admin Panel"})]})})]})})]}),u.jsxs("div",{className:"mt-auto",children:[u.jsxs("div",{className:"text-sm text-gray-400 mb-2",children:["Logged in as: ",u.jsxs("span",{className:"font-semibold text-blue-200",children:[t==null?void 0:t.username," (",t==null?void 0:t.role,")"]})]}),u.jsxs("div",{className:"text-sm text-gray-400 mb-2",children:["User ID: ",u.jsx("span",{className:"font-semibold text-blue-200 break-all",children:n||"N/A"})]}),u.jsxs("button",{onClick:e,className:"w-full bg-red-600 text-white py-2 px-4 rounded-md hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-offset-2 transition duration-200 font-semibold flex items-center justify-center space-x-2",children:[u.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})}),u.jsx("span",{children:"Logout"})]})]})]})},gy=()=>{const{currentUser:t,db:e}=L.useContext(Bn),[n,r]=L.useState([]),[s,i]=L.useState([]),[o,l]=L.useState([]),[c,h]=L.useState(!0),[p,m]=L.useState(new Date().toISOString().split("T")[0]);return L.useEffect(()=>{if(!e||!t)return;const g=mt(ae(e,`${Y}/events`),P=>{const j=P.docs.map(_=>({id:_.id,..._.data()}));let S=[];t.role===kn.ADMIN?S=j.filter(_=>new Date(_.date)>=new Date):S=j.filter(_=>_.invitedEmployeeIds&&_.invitedEmployeeIds.includes(t.id)&&new Date(_.date)>=new Date),r(S.sort((_,N)=>new Date(_.date)-new Date(N.date))),h(!1)},P=>{console.error("Error fetching events:",P),h(!1)}),k=mt(ae(e,`${Y}/shifts`),P=>{const S=P.docs.map(_=>({id:_.id,..._.data()})).filter(_=>_.employeeId===t.id&&new Date(_.endTime)>=new Date).sort((_,N)=>new Date(_.startTime)-new Date(N.startTime));i(S),h(!1)},P=>{console.error("Error fetching shifts:",P),h(!1)}),b=mt(ae(e,`${Y}/appointments`),P=>{const S=P.docs.map(_=>({id:_.id,..._.data()})).filter(_=>_.date===p).sort((_,N)=>{const D=new Date(`${_.date}T${_.time}`),$=new Date(`${N.date}T${N.time}`);return D-$});l(S),h(!1)},P=>{console.error("Error fetching appointments:",P),h(!1)});return()=>{g(),k(),b()}},[e,t,p]),u.jsxs("div",{className:"p-8 flex flex-col items-center justify-center h-full text-center",children:[u.jsxs("h2",{className:"text-4xl font-extrabold text-gray-800 mb-4",children:["Welcome, ",t==null?void 0:t.username,"!"]}),u.jsx("p",{className:"text-lg text-gray-600",children:"This is your central hub for all business operations."}),u.jsx("p",{className:"text-md text-gray-500 mt-2 mb-8",children:"Navigate using the sidebar to access different modules."}),c?u.jsx("p",{className:"text-gray-500",children:"Loading dashboard data..."}):u.jsxs("div",{className:"w-full max-w-4xl grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[u.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md border border-gray-200",children:[u.jsx("h3",{className:"text-2xl font-bold text-gray-800 mb-4",children:"Upcoming Events"}),n.length===0?u.jsx("p",{className:"text-gray-500",children:"No upcoming events for you."}):u.jsx("ul",{className:"space-y-4 text-left",children:n.map(g=>u.jsxs("li",{className:"p-4 bg-blue-50 rounded-md border border-blue-200",children:[u.jsx("p",{className:"font-semibold text-lg text-blue-800",children:g.title}),u.jsxs("p",{className:"text-gray-700 text-sm mb-2",children:[new Date(g.date).toLocaleDateString()," - ",new Date(g.date).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})]}),u.jsx("p",{className:"text-gray-600",children:g.description})]},g.id))})]}),u.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md border border-gray-200",children:[u.jsx("h3",{className:"text-2xl font-bold text-gray-800 mb-4",children:"My Upcoming Shifts"}),s.length===0?u.jsx("p",{className:"text-gray-500",children:"No upcoming shifts assigned."}):u.jsx("ul",{className:"space-y-4 text-left",children:s.map(g=>u.jsxs("li",{className:"p-4 bg-purple-50 rounded-md border border-purple-200",children:[u.jsx("p",{className:"font-semibold text-lg text-purple-800",children:g.description||"Assigned Shift"}),u.jsxs("p",{className:"text-gray-700 text-sm mb-2",children:[new Date(g.startTime).toLocaleString()," - ",new Date(g.endTime).toLocaleString()]})]},g.id))})]}),u.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md border border-gray-200",children:[u.jsxs("h3",{className:"text-2xl font-bold text-gray-800 mb-4",children:["Appointments for ",new Date(p).toLocaleDateString()," (CST)"]}),u.jsxs("div",{className:"mb-4",children:[u.jsx("label",{htmlFor:"appointmentDateSelector",className:"sr-only",children:"Select Appointment Date"}),u.jsx("input",{type:"date",id:"appointmentDateSelector",value:p,onChange:g=>m(g.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-1 focus:ring-blue-500"})]}),o.length===0?u.jsx("p",{className:"text-gray-500",children:"No appointments scheduled for this date."}):u.jsx("ul",{className:"space-y-4 text-left",children:o.map(g=>u.jsxs("li",{className:"p-4 bg-green-50 rounded-md border border-green-200",children:[u.jsx("p",{className:"font-semibold text-lg text-green-800",children:g.service}),u.jsxs("p",{className:"text-gray-700 text-sm mb-1",children:["Customer: ",g.customerName]}),u.jsxs("p",{className:"text-gray-700 text-sm mb-1",children:["Time: ",g.time," CST"]}),u.jsxs("p",{className:"text-gray-600 text-sm",children:["Status: ",g.status]}),g.notes&&u.jsxs("p",{className:"text-gray-600 text-sm mt-1",children:["Notes: ",g.notes]})]},g.id))})]})]})]})},hC=()=>{const{currentUser:t,db:e,userId:n}=L.useContext(Bn),[r,s]=L.useState([]),[i,o]=L.useState(!0);L.useEffect(()=>{if(!e||!n)return;const c=rs(ae(e,`${Y}/clockEvents`),yr("userId","==",n)),h=mt(c,p=>{const m=p.docs.map(g=>({id:g.id,...g.data()}));s(m.sort((g,k)=>new Date(k.timestamp)-new Date(g.timestamp))),o(!1)},p=>{console.error("Error fetching clock events:",p),o(!1)});return()=>h()},[e,n]);const l=async c=>{if(!(!e||!t))try{const h={userId:t.id,username:t.username,timestamp:new Date().toISOString(),type:c};await _r(ae(e,`${Y}/clockEvents`),h),console.log(`Clock ${c} recorded successfully!`)}catch(h){console.error(`Error recording clock ${c} event:`,h)}};return i?u.jsxs("div",{className:"p-8 text-center text-gray-500 flex items-center justify-center h-full",children:[u.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-blue-500",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[u.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),u.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Loading clock history..."]}):u.jsxs("div",{className:"p-8",children:[u.jsx("h2",{className:"text-3xl font-bold text-gray-800 mb-6",children:"Time Clock"}),u.jsxs("div",{className:"flex space-x-4 mb-8",children:[u.jsx("button",{onClick:()=>l("in"),className:"bg-green-600 text-white py-3 px-6 rounded-lg shadow-md hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-offset-2 transition duration-200 font-semibold text-lg",children:"Clock In"}),u.jsx("button",{onClick:()=>l("out"),className:"bg-red-600 text-white py-3 px-6 rounded-lg shadow-md hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-offset-2 transition duration-200 font-semibold text-lg",children:"Clock Out"})]}),u.jsx("h3",{className:"text-2xl font-semibold text-gray-700 mb-4",children:"Your Clock History"}),r.length===0?u.jsx("p",{className:"text-gray-500",children:"No clock events recorded yet."}):u.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:u.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[u.jsx("thead",{className:"bg-gray-50",children:u.jsxs("tr",{children:[u.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Type"}),u.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Timestamp"})]})}),u.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:r.map(c=>u.jsxs("tr",{children:[u.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:u.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${c.type==="in"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:c.type==="in"?"Clock In":"Clock Out"})}),u.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:new Date(c.timestamp).toLocaleString()})]},c.id))})]})})]})},fC=()=>{const{currentUser:t,db:e}=L.useContext(Bn),[n,r]=L.useState(""),[s,i]=L.useState(""),[o,l]=L.useState(""),[c,h]=L.useState([]),[p,m]=L.useState(!0),[g,k]=L.useState("");L.useEffect(()=>{if(!e||!t)return;const P=rs(ae(e,`${Y}/timeOffRequests`),yr("employeeId","==",t.id)),j=mt(P,S=>{const _=S.docs.map(N=>({id:N.id,...N.data()}));h(_.sort((N,D)=>new Date(D.requestedAt)-new Date(N.requestedAt))),m(!1)},S=>{console.error("Error fetching time off requests:",S),m(!1)});return()=>j()},[e,t]);const b=async P=>{if(P.preventDefault(),k(""),!e||!t||!n||!s||!o.trim()){k("Please fill in all fields.");return}if(new Date(n)>new Date(s)){k("End date cannot be before start date.");return}try{const j={employeeId:t.id,employeeName:t.username,startDate:n,endDate:s,reason:o.trim(),status:"pending",requestedAt:new Date().toISOString()};await _r(ae(e,`${Y}/timeOffRequests`),j),k("Time off request submitted successfully!"),r(""),i(""),l("")}catch(j){console.error("Error submitting time off request:",j),k("Failed to submit request. Please try again.")}};return p?u.jsxs("div",{className:"p-8 text-center text-gray-500 flex items-center justify-center h-full",children:[u.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-blue-500",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[u.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),u.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Loading time off requests..."]}):u.jsxs("div",{className:"p-8",children:[u.jsx("h2",{className:"text-3xl font-bold text-gray-800 mb-6",children:"Request Time Off"}),u.jsxs("div",{className:"mb-8 p-6 bg-blue-50 rounded-lg shadow-md border border-blue-200",children:[u.jsx("h3",{className:"text-2xl font-semibold text-blue-800 mb-4",children:"Submit New Request"}),u.jsxs("form",{onSubmit:b,className:"space-y-4",children:[u.jsxs("div",{children:[u.jsx("label",{htmlFor:"startDate",className:"block text-sm font-medium text-gray-700 mb-1",children:"Start Date"}),u.jsx("input",{type:"date",id:"startDate",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-1 focus:ring-blue-500",value:n,onChange:P=>r(P.target.value),required:!0})]}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"endDate",className:"block text-sm font-medium text-gray-700 mb-1",children:"End Date"}),u.jsx("input",{type:"date",id:"endDate",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-1 focus:ring-blue-500",value:s,onChange:P=>i(P.target.value),required:!0})]}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"reason",className:"block text-sm font-medium text-gray-700 mb-1",children:"Reason"}),u.jsx("textarea",{id:"reason",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-1 focus:ring-blue-500",value:o,onChange:P=>l(P.target.value),rows:"3",required:!0})]}),u.jsx("button",{type:"submit",className:"w-full bg-blue-600 text-white py-2 px-4 rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 font-semibold",children:"Submit Request"}),g&&u.jsx("p",{className:`text-sm text-center ${g.includes("successfully")?"text-green-600":"text-red-500"} mt-2`,children:g})]})]}),u.jsx("h3",{className:"text-2xl font-semibold text-gray-700 mb-4",children:"Your Requests"}),c.length===0?u.jsx("p",{className:"text-gray-500",children:"You have no time off requests."}):u.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden border border-gray-200",children:u.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[u.jsx("thead",{className:"bg-gray-50",children:u.jsxs("tr",{children:[u.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Start Date"}),u.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"End Date"}),u.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Reason"}),u.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),u.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Requested At"})]})}),u.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:c.map(P=>u.jsxs("tr",{children:[u.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:new Date(P.startDate).toLocaleDateString()}),u.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:new Date(P.endDate).toLocaleDateString()}),u.jsx("td",{className:"px-6 py-4 text-sm text-gray-900",children:P.reason}),u.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:u.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${P.status==="approved"?"bg-green-100 text-green-800":P.status==="denied"?"bg-red-100 text-red-800":"bg-yellow-100 text-yellow-800"}`,children:P.status})}),u.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:new Date(P.requestedAt).toLocaleString()})]},P.id))})]})})]})},pC=()=>{const{currentUser:t,db:e}=L.useContext(Bn),[n,r]=L.useState([]),[s,i]=L.useState(""),o=L.useRef(null),[l,c]=L.useState(!0);L.useEffect(()=>{if(!e)return;const m=mt(ae(e,`${Y}/chatMessages`),g=>{const k=g.docs.map(b=>({id:b.id,...b.data()}));r(k.sort((b,P)=>new Date(b.timestamp)-new Date(P.timestamp))),c(!1)},g=>{console.error("Error fetching chat messages:",g),c(!1)});return()=>m()},[e]),L.useEffect(()=>{h()},[n]);const h=()=>{var m;(m=o.current)==null||m.scrollIntoView({behavior:"smooth"})},p=async m=>{if(m.preventDefault(),!(!e||!t||!s.trim()))try{const g={senderId:t.id,senderName:t.username,text:s.trim(),timestamp:new Date().toISOString()};await _r(ae(e,`${Y}/chatMessages`),g),i("")}catch(g){console.error("Error sending message:",g)}};return l?u.jsxs("div",{className:"p-8 text-center text-gray-500 flex items-center justify-center h-full",children:[u.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-blue-500",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[u.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),u.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Loading chat messages..."]}):u.jsxs("div",{className:"flex flex-col h-full p-4",children:[u.jsx("h2",{className:"text-3xl font-bold text-gray-800 mb-6",children:"Team Chat"}),u.jsxs("div",{className:"flex-grow bg-gray-50 rounded-lg p-4 overflow-y-auto mb-4 shadow-inner border border-gray-200",children:[n.length===0?u.jsx("p",{className:"text-gray-500 text-center mt-10",children:"No messages yet. Start the conversation!"}):n.map(m=>u.jsx("div",{className:`mb-3 flex ${m.senderId===t.id?"justify-end":"justify-start"}`,children:u.jsxs("div",{className:`max-w-xs md:max-w-md lg:max-w-lg p-3 rounded-lg shadow-sm ${m.senderId===t.id?"bg-blue-500 text-white rounded-br-none":"bg-gray-300 text-gray-800 rounded-bl-none"}`,children:[u.jsx("div",{className:"font-semibold text-sm mb-1",children:m.senderId===t.id?"You":m.senderName}),u.jsx("p",{className:"text-base break-words",children:m.text}),u.jsx("div",{className:"text-xs text-right mt-1 opacity-80",children:new Date(m.timestamp).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]})},m.id)),u.jsx("div",{ref:o})," "]}),u.jsxs("form",{onSubmit:p,className:"flex space-x-3",children:[u.jsx("input",{type:"text",value:s,onChange:m=>i(m.target.value),placeholder:"Type your message...",className:"flex-grow px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition duration-200"}),u.jsxs("button",{type:"submit",className:"bg-blue-600 text-white py-2 px-5 rounded-lg shadow-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 transition duration-200 font-semibold flex items-center space-x-2",children:[u.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M14 5l7 7m0 0l-7 7m7-7H3"})}),u.jsx("span",{children:"Send"})]})]})]})},mC=()=>{const{currentUser:t,db:e}=L.useContext(Bn),[n,r]=L.useState([]),[s,i]=L.useState([]),[o,l]=L.useState([]),[c,h]=L.useState([]),[p,m]=L.useState(null),[g,k]=L.useState(""),[b,P]=L.useState(""),[j,S]=L.useState(""),[_,N]=L.useState(""),[D,$]=L.useState(!1),[F,w]=L.useState(""),[v,x]=L.useState(""),[T,A]=L.useState(!1),[C,I]=L.useState(""),[Qe,sn]=L.useState(""),[on,Bt]=L.useState(""),[q,X]=L.useState(""),[Z,we]=L.useState(""),[me,Se]=L.useState(!1),[Ye,yt]=L.useState({}),[At,Xe]=L.useState(""),[Ns,ir]=L.useState(!0),[an,_n]=L.useState(!0),[ln,un]=L.useState(!0),[dt,wn]=L.useState("cash"),[Qt,or]=L.useState(0),[ht,zn]=L.useState(""),[xn,Ct]=L.useState(""),[En,We]=L.useState("");L.useEffect(()=>{if(!e)return;const M=mt(ae(e,`${Y}/posProducts`),Q=>{const le=Q.docs.map(he=>({id:he.id,...he.data()}));r(le),ir(!1)},Q=>{console.error("Error fetching products:",Q),ir(!1)});return()=>M()},[e]),L.useEffect(()=>{if(!e)return;const M=mt(ae(e,`${Y}/posSales`),Q=>{const le=Q.docs.map(he=>({id:he.id,...he.data()}));l(le),_n(!1)},Q=>{console.error("Error fetching sales:",Q),_n(!1)});return()=>M()},[e]),L.useEffect(()=>{if(!e)return;const M=mt(ae(e,`${Y}/customerLoyaltyAccounts`),Q=>{const le=Q.docs.map(he=>({id:he.id,...he.data()}));h(le),un(!1)},Q=>{console.error("Error fetching loyalty customers:",Q),un(!1)});return()=>M()},[e]);const Be=M=>{Ct("");const Q=s.find(le=>le.id===M.id);i(Q?s.map(le=>le.id===M.id?{...le,quantity:le.quantity+1}:le):[...s,{...M,quantity:1}])},Lr=(M,Q)=>{Ct("");const le=n.find(Le=>Le.id===M),he=le?le.stock:0,Je=Math.max(0,Math.min(Q,he));i(Le=>Le.map(Pt=>Pt.id===M?{...Pt,quantity:Je}:Pt).filter(Pt=>Pt.quantity>0))},ze=async M=>{if(M.preventDefault(),w(""),!e||!g.trim()||!b.trim()||!j.trim()){w("Please fill in all fields for loyalty sign-up.");return}try{const Q=ae(e,`${Y}/customerLoyaltyAccounts`),le=rs(Q,yr("phoneNumber","==",j.trim()));if(!(await vr(le)).empty){w("A loyalty account with this phone number already exists.");return}const Je=`CUST-${crypto.randomUUID().substring(0,8).toUpperCase()}`,Le={loyaltyId:Je,firstName:g.trim(),lastName:b.trim(),phoneNumber:j.trim(),discountRate:.05,notes:_.trim(),signedUpAt:new Date().toISOString()};await ki(lt(e,`${Y}/customerLoyaltyAccounts`,Je),Le),w("Loyalty account created successfully!"),k(""),P(""),S(""),N(""),$(!1),m(Le)}catch(Q){console.error("Error signing up loyalty customer:",Q),w("Failed to create loyalty account. Please try again.")}},it=async M=>{if(M.preventDefault(),we(""),!e||!t||!p||!C||!Qe||!on.trim()){we("Please fill in all appointment fields.");return}try{const Q={customerId:p.loyaltyId,customerName:`${p.firstName} ${p.lastName}`,date:C,time:Qe,service:on.trim(),notes:q.trim(),status:"scheduled",bookedBy:t.username,bookedAt:new Date().toISOString()};await _r(ae(e,`${Y}/appointments`),Q),we("Appointment booked successfully!"),A(!1),I(""),sn(""),Bt(""),X("")}catch(Q){console.error("Error booking appointment:",Q),we("Failed to book appointment. Please try again.")}},ar=()=>{if(Xe(""),Object.keys(Ye).length===0){Xe("Please select at least one product to generate labels.");return}if(typeof window.jspdf>"u"||typeof window.jspdf.jsPDF>"u"){Xe("PDF library not loaded. Please try again or refresh."),console.error("jsPDF library not found.");return}const{jsPDF:M}=window.jspdf,Q=new M({orientation:"portrait",unit:"mm",format:"a4"}),le=50,he=25,Je=5,Le=2,cn=Q.internal.pageSize.getWidth(),Pt=Q.internal.pageSize.getHeight(),xe=Math.floor((cn-2*Je)/le),ke=Math.floor((Pt-2*Je)/he);let Ze=Je,Oe=Je,Pe=0;const et=n.filter(tt=>Ye[tt.id]>0);if(et.length===0){Xe("No products selected for label generation.");return}et.forEach(tt=>{const Ae=Ye[tt.id];for(let zt=0;zt<Ae;zt++)Pe>=xe*ke&&(Q.addPage(),Ze=Je,Oe=Je,Pe=0),Q.rect(Ze,Oe,le,he),Q.setFontSize(8),Q.text(tt.name.substring(0,20),Ze+Le,Oe+Le+3),Q.setFontSize(10),Q.text(`SKU: ${tt.sku}`,Ze+Le,Oe+Le+10),Q.setFontSize(12),Q.setFont("helvetica","bold"),Q.text(`$${tt.price.toFixed(2)}`,Ze+Le,Oe+Le+18),Q.setFont("helvetica","normal"),Ze+=le,Pe++,Pe%xe===0&&(Ze=Je,Oe+=he)}),Q.save("product_labels.pdf"),Xe("Labels PDF generated successfully!"),yt({}),Se(!1)},Or=async()=>{if(!e||s.length===0||!t){Ct("Cart is empty or user not logged in. Cannot process sale.");return}const M=s.reduce((xe,ke)=>xe+ke.price*ke.quantity,0),Q=s.reduce((xe,ke)=>xe+(ke.costPrice||0)*ke.quantity,0);let le=Qt;p&&(le=p.discountRate*100);const he=M*(1-le/100),Je=he-Q;let Le=0;if(dt==="cash"){const xe=parseFloat(ht);if(isNaN(xe)||xe<he){Ct("Amount given is insufficient for cash payment.");return}Le=xe-he}const cn=s.map(async xe=>{const ke=lt(e,`${Y}/posProducts`,xe.id),Ze=await ss(ke);if(Ze.exists()){const Oe=Ze.data().stock;if(Oe<xe.quantity)return Ct(`Insufficient stock for ${xe.name}. Available: ${Oe}, Needed: ${xe.quantity}`),!1}else return Ct(`Product ${xe.name} not found.`),!1;return!0});if((await Promise.all(cn)).every(Boolean))try{const xe=s.map(async Pe=>{const et=lt(e,`${Y}/posProducts`,Pe.id),tt=await ss(et);if(tt.exists()){const Ae=tt.data(),zt=Ae.stock-Pe.quantity,qt=[...Ae.stockHistory||[],{timestamp:new Date().toISOString(),type:"sold",quantityChange:-Pe.quantity,newStock:zt,by:t.username,saleId:"pending"}];return Zr(et,{stock:zt,stockHistory:qt})}return Promise.resolve()});await Promise.all(xe);const ke={items:s.map(Pe=>({id:Pe.id,name:Pe.name,price:Pe.price,costPrice:Pe.costPrice,quantity:Pe.quantity,sku:Pe.sku})),subtotal:M,discountPercentage:le,total:he,grossProfit:Je,timestamp:new Date().toISOString(),salespersonId:t.id,salespersonName:t.username,paymentMethod:dt,amountGiven:dt==="cash"?parseFloat(ht):null,changeDue:dt==="cash"?Le:null,loyaltyCustomerId:p?p.loyaltyId:null,loyaltyCustomerName:p?`${p.firstName} ${p.lastName}`:null,loyaltyCustomerNotes:p?p.notes:null},Ze=await _r(ae(e,`${Y}/posSales`),ke),Oe=s.map(async Pe=>{const et=lt(e,`${Y}/posProducts`,Pe.id),tt=await ss(et);if(tt.exists()){const zt=tt.data().stockHistory.map(qt=>qt.saleId==="pending"?{...qt,saleId:Ze.id}:qt);return Zr(et,{stockHistory:zt})}return Promise.resolve()});await Promise.all(Oe),i([]),or(0),m(null),wn("cash"),zn(""),Ct(`Sale processed successfully! Change Due: $${Le.toFixed(2)}`)}catch(xe){console.error("Error processing sale:",xe),Ct("Error processing sale. Please try again.")}},ks=s.reduce((M,Q)=>M+Q.price*Q.quantity,0);let Mr=Qt;p&&(Mr=p.discountRate*100);const ot=ks*(1-Mr/100),As=n.filter(M=>M.name.toLowerCase().includes(En.toLowerCase())||M.sku.toLowerCase().includes(En.toLowerCase())),lr=c.filter(M=>M.firstName.toLowerCase().includes(v.toLowerCase())||M.lastName.toLowerCase().includes(v.toLowerCase())||M.phoneNumber.includes(v));return Ns||an||ln?u.jsxs("div",{className:"p-8 text-center text-gray-500 flex items-center justify-center h-full",children:[u.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-blue-500",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[u.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),u.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Loading POS data..."]}):u.jsxs("div",{className:"p-8 flex h-full",children:[u.jsxs("div",{className:"w-2/3 pr-8 border-r border-gray-200",children:[u.jsx("h2",{className:"text-3xl font-bold text-gray-800 mb-6",children:"Products"}),u.jsx("div",{className:"mb-4",children:u.jsx("input",{type:"text",placeholder:"Search products by name or SKU...",className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent transition duration-200",value:En,onChange:M=>We(M.target.value)})}),u.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 overflow-y-auto max-h-[calc(100vh-250px)] pr-2",children:As.map(M=>u.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 flex flex-col justify-between border border-gray-200",children:[u.jsxs("div",{children:[u.jsx("h3",{className:"text-xl font-semibold text-gray-800 mb-2",children:M.name}),u.jsxs("p",{className:"text-gray-600 mb-1",children:["SKU: ",M.sku]}),u.jsxs("p",{className:"text-gray-600 mb-1",children:["Price: $",M.price.toFixed(2)]}),u.jsxs("p",{className:"text-gray-600 mb-4",children:["Stock: ",u.jsx("span",{className:"font-medium",children:M.stock})]})]}),u.jsx("button",{onClick:()=>Be(M),disabled:M.stock<=0,className:`w-full py-2 px-4 rounded-md font-semibold transition duration-200 ${M.stock<=0?"bg-gray-400 text-gray-700 cursor-not-allowed":"bg-blue-600 text-white hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2"}`,children:M.stock<=0?"Out of Stock":"Add to Cart"})]},M.id))})]}),u.jsxs("div",{className:"w-1/3 pl-8 flex flex-col",children:[u.jsx("h2",{className:"text-3xl font-bold text-gray-800 mb-6",children:"Cart"}),u.jsx("div",{className:"flex-grow bg-gray-50 rounded-lg p-4 overflow-y-auto mb-4 shadow-inner border border-gray-200",children:s.length===0?u.jsx("p",{className:"text-gray-500 text-center mt-10",children:"Cart is empty."}):s.map(M=>{var Q;return u.jsxs("div",{className:"flex items-center justify-between bg-white p-3 rounded-md shadow-sm mb-3 border border-gray-100",children:[u.jsxs("div",{children:[u.jsx("p",{className:"font-semibold text-gray-800",children:M.name}),u.jsxs("p",{className:"text-sm text-gray-600",children:["SKU: ",M.sku]}),u.jsxs("p",{className:"text-sm text-gray-600",children:["$",M.price.toFixed(2)]})]}),u.jsx("div",{className:"flex items-center space-x-2",children:u.jsx("input",{type:"number",min:"1",max:((Q=n.find(le=>le.id===M.id))==null?void 0:Q.stock)||1,value:M.quantity,onChange:le=>Lr(M.id,parseInt(le.target.value)||0),className:"w-16 text-center px-2 py-1 border border-gray-300 rounded-md focus:ring-1 focus:ring-blue-500"})})]},M.id)})}),u.jsxs("div",{className:"mt-auto pt-4 border-t border-gray-200",children:[u.jsxs("div",{className:"mb-4 p-4 bg-yellow-50 rounded-lg border border-yellow-200",children:[u.jsx("h3",{className:"text-lg font-semibold text-yellow-800 mb-2",children:"Customer Loyalty"}),p?u.jsxs("div",{className:"flex items-center justify-between text-gray-700",children:[u.jsxs("span",{children:["Selected: ",u.jsxs("span",{className:"font-semibold",children:[p.firstName," ",p.lastName]})]}),u.jsx("button",{onClick:()=>m(null),className:"text-red-500 hover:text-red-700 text-sm",children:"(Remove)"})]}):u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"mb-2",children:u.jsx("input",{type:"text",placeholder:"Search by name or phone...",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-1 focus:ring-yellow-500",value:v,onChange:M=>x(M.target.value)})}),u.jsxs("select",{className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-1 focus:ring-yellow-500 mb-2",onChange:M=>{const Q=c.find(le=>le.loyaltyId===M.target.value);m(Q||null),N(Q&&Q.notes||"")},value:(p==null?void 0:p.loyaltyId)||"",children:[u.jsx("option",{value:"",children:"Select Loyalty Customer"}),lr.map(M=>u.jsxs("option",{value:M.loyaltyId,children:[M.firstName," ",M.lastName," (",M.phoneNumber,")"]},M.loyaltyId))]}),u.jsx("button",{onClick:()=>$(!D),className:"w-full bg-yellow-600 text-white py-2 px-4 rounded-md hover:bg-yellow-700 focus:outline-none focus:ring-2 focus:ring-yellow-500 focus:ring-offset-2 font-semibold text-sm",children:D?"Hide Sign Up":"Sign Up New Customer"})]}),D&&!p&&u.jsxs("form",{onSubmit:ze,className:"mt-3 space-y-2",children:[u.jsx("input",{type:"text",placeholder:"First Name",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-1 focus:ring-yellow-500",value:g,onChange:M=>k(M.target.value),required:!0}),u.jsx("input",{type:"text",placeholder:"Last Name",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-1 focus:ring-yellow-500",value:b,onChange:M=>P(M.target.value),required:!0}),u.jsx("input",{type:"tel",placeholder:"Phone Number (e.g., 555-123-4567)",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-1 focus:ring-yellow-500",value:j,onChange:M=>S(M.target.value),required:!0}),u.jsx("textarea",{placeholder:"Notes (e.g., Prefers email updates)",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-1 focus:ring-yellow-500",value:_,onChange:M=>N(M.target.value),rows:"2"}),u.jsx("button",{type:"submit",className:"w-full bg-yellow-700 text-white py-2 px-4 rounded-md hover:bg-yellow-800 font-semibold text-sm",children:"Create Loyalty Account"}),F&&u.jsx("p",{className:`text-sm text-center ${F.includes("successfully")?"text-green-600":"text-red-500"} mt-1`,children:F})]}),p&&u.jsxs("div",{className:"mt-3",children:[u.jsx("h4",{className:"font-semibold text-gray-700 text-sm mb-1",children:"Customer Notes:"}),u.jsx("textarea",{className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-1 focus:ring-yellow-500",value:p.notes||"",onChange:M=>{m({...p,notes:M.target.value})},rows:"2",placeholder:"Add notes about this customer..."}),u.jsx("button",{onClick:()=>A(!0),className:"w-full bg-indigo-600 text-white py-2 px-4 rounded-md hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 font-semibold mt-3",children:"Book Appointment"})]})]}),u.jsxs("div",{className:"flex justify-between items-center mb-2",children:[u.jsx("span",{className:"text-lg font-semibold text-gray-800",children:"Subtotal:"}),u.jsxs("span",{className:"text-xl font-bold text-gray-800",children:["$",ks.toFixed(2)]})]}),u.jsxs("div",{className:"mb-4",children:[u.jsx("label",{htmlFor:"manualDiscount",className:"block text-sm font-medium text-gray-700 mb-1",children:"Manual Discount (%)"}),u.jsx("input",{type:"number",id:"manualDiscount",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-1 focus:ring-blue-500",value:Qt,onChange:M=>or(Math.max(0,Math.min(100,parseFloat(M.target.value)||0))),min:"0",max:"100",step:"1",disabled:!!p}),p&&u.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:["Loyalty Discount Applied: ",u.jsxs("span",{className:"font-semibold",children:[p.discountRate*100,"%"]})]})]}),u.jsxs("div",{className:"mb-4",children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Payment Method"}),u.jsxs("div",{className:"flex space-x-4",children:[u.jsxs("label",{className:"inline-flex items-center",children:[u.jsx("input",{type:"radio",className:"form-radio text-blue-600",name:"paymentMethod",value:"cash",checked:dt==="cash",onChange:()=>wn("cash")}),u.jsx("span",{className:"ml-2 text-gray-700",children:"Cash"})]}),u.jsxs("label",{className:"inline-flex items-center",children:[u.jsx("input",{type:"radio",className:"form-radio text-blue-600",name:"paymentMethod",value:"card",checked:dt==="card",onChange:()=>wn("card")}),u.jsx("span",{className:"ml-2 text-gray-700",children:"Card"})]})]})]}),dt==="cash"&&u.jsxs("div",{className:"mb-4",children:[u.jsx("label",{htmlFor:"amountGiven",className:"block text-sm font-medium text-gray-700 mb-1",children:"Amount Given ($)"}),u.jsx("input",{type:"number",id:"amountGiven",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-1 focus:ring-blue-500",value:ht,onChange:M=>zn(M.target.value),min:ot.toFixed(2),step:"0.01",required:!0}),u.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:["Change Due: ",u.jsxs("span",{className:"font-semibold",children:["$",(parseFloat(ht)-ot).toFixed(2)]})]})]}),u.jsxs("div",{className:"flex justify-between items-center mb-4",children:[u.jsx("span",{className:"text-xl font-bold text-gray-800",children:"Total:"}),u.jsxs("span",{className:"text-2xl font-extrabold text-blue-600",children:["$",ot.toFixed(2)]})]}),xn&&u.jsx("p",{className:`text-sm text-center ${xn.includes("successfully")?"text-green-600":"text-red-500"} mb-4`,children:xn}),u.jsx("button",{onClick:Or,disabled:s.length===0||dt==="cash"&&(isNaN(parseFloat(ht))||parseFloat(ht)<ot),className:`w-full py-3 px-6 rounded-lg shadow-md font-semibold text-lg transition duration-200 ${s.length===0||dt==="cash"&&(isNaN(parseFloat(ht))||parseFloat(ht)<ot)?"bg-gray-400 text-gray-700 cursor-not-allowed":"bg-green-600 text-white hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-offset-2"}`,children:"Process Sale"}),u.jsx("button",{onClick:()=>Se(!0),className:"w-full bg-gray-600 text-white py-2 px-4 rounded-md hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2 font-semibold mt-4",children:"Generate Product Labels"})]})]}),T&&p&&u.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-75 flex items-center justify-center z-50",children:u.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-xl w-full max-w-md",children:[u.jsxs("h3",{className:"text-2xl font-bold text-gray-800 mb-4",children:["Book Appointment for ",p.firstName," ",p.lastName]}),u.jsxs("form",{onSubmit:it,className:"space-y-4",children:[u.jsxs("div",{children:[u.jsx("label",{htmlFor:"appointmentDate",className:"block text-sm font-medium text-gray-700 mb-1",children:"Date"}),u.jsx("input",{type:"date",id:"appointmentDate",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-1 focus:ring-indigo-500",value:C,onChange:M=>I(M.target.value),required:!0})]}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"appointmentTime",className:"block text-sm font-medium text-gray-700 mb-1",children:"Time (CST)"}),u.jsx("input",{type:"time",id:"appointmentTime",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-1 focus:ring-indigo-500",value:Qe,onChange:M=>sn(M.target.value),required:!0})]}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"appointmentService",className:"block text-sm font-medium text-gray-700 mb-1",children:"Service"}),u.jsx("input",{type:"text",id:"appointmentService",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-1 focus:ring-indigo-500",value:on,onChange:M=>Bt(M.target.value),placeholder:"e.g., Haircut, Manicure",required:!0})]}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"appointmentNotes",className:"block text-sm font-medium text-gray-700 mb-1",children:"Notes (Optional)"}),u.jsx("textarea",{id:"appointmentNotes",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-1 focus:ring-indigo-500",value:q,onChange:M=>X(M.target.value),rows:"3",placeholder:"Any specific requests or details"})]}),Z&&u.jsx("p",{className:`text-sm text-center ${Z.includes("successfully")?"text-green-600":"text-red-500"} mt-2`,children:Z}),u.jsxs("div",{className:"flex justify-end space-x-3 mt-4",children:[u.jsx("button",{type:"button",onClick:()=>A(!1),className:"bg-gray-300 text-gray-800 py-2 px-4 rounded-md hover:bg-gray-400 font-semibold",children:"Cancel"}),u.jsx("button",{type:"submit",className:"bg-indigo-600 text-white py-2 px-4 rounded-md hover:bg-indigo-700 font-semibold",children:"Confirm Booking"})]})]})]})}),me&&u.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-75 flex items-center justify-center z-50",children:u.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-xl w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[u.jsx("h3",{className:"text-2xl font-bold text-gray-800 mb-4",children:"Generate Product Labels"}),u.jsx("p",{className:"text-gray-700 mb-4",children:"Select products and specify the number of labels to print for each."}),u.jsx("div",{className:"space-y-3 mb-6",children:n.length===0?u.jsx("p",{className:"text-gray-500",children:"No products available to generate labels."}):n.map(M=>u.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-md border border-gray-200",children:[u.jsxs("div",{className:"flex items-center",children:[u.jsx("input",{type:"checkbox",id:`label-product-${M.id}`,checked:!!Ye[M.id],onChange:Q=>{const le=Q.target.checked;yt(he=>({...he,[M.id]:le?he[M.id]||1:0}))},className:"form-checkbox h-5 w-5 text-blue-600 rounded"}),u.jsxs("label",{htmlFor:`label-product-${M.id}`,className:"ml-3 text-lg font-medium text-gray-900",children:[M.name," (",M.sku,") - $",M.price.toFixed(2)]})]}),Ye[M.id]>0&&u.jsxs("div",{className:"flex items-center space-x-2",children:[u.jsx("label",{htmlFor:`copies-${M.id}`,className:"text-sm text-gray-700",children:"Copies:"}),u.jsx("input",{type:"number",id:`copies-${M.id}`,min:"1",value:Ye[M.id]||1,onChange:Q=>{const le=parseInt(Q.target.value)||0;yt(he=>({...he,[M.id]:Math.max(1,le)}))},className:"w-20 px-2 py-1 border border-gray-300 rounded-md focus:ring-1 focus:ring-blue-500 text-center"})]})]},M.id))}),At&&u.jsx("p",{className:`text-sm text-center ${At.includes("successfully")?"text-green-600":"text-red-500"} mb-4`,children:At}),u.jsxs("div",{className:"flex justify-end space-x-3 mt-4",children:[u.jsx("button",{type:"button",onClick:()=>{Se(!1),yt({}),Xe("")},className:"bg-gray-300 text-gray-800 py-2 px-4 rounded-md hover:bg-gray-400 font-semibold",children:"Cancel"}),u.jsx("button",{type:"button",onClick:ar,className:"bg-blue-600 text-white py-2 px-4 rounded-md hover:bg-blue-700 font-semibold",children:"Generate PDF"})]})]})})]})},gC=()=>{const{currentUser:t,db:e}=L.useContext(Bn),[n,r]=L.useState([]),[s,i]=L.useState(!0);L.useEffect(()=>{if(!e)return;const c=mt(ae(e,`${Y}/appointments`),h=>{const p=h.docs.map(m=>({id:m.id,...m.data()}));r(p.sort((m,g)=>{const k=new Date(`${m.date}T${m.time}`),b=new Date(`${g.date}T${g.time}`);return k-b})),i(!1)},h=>{console.error("Error fetching appointments:",h),i(!1)});return()=>c()},[e]);const o=async(c,h,p)=>{if(e)try{const m=lt(e,`${Y}/appointments`,c);await Zr(m,{[h]:p}),console.log(`Appointment ${c} ${h} updated to ${p}`)}catch(m){console.error(`Error updating appointment ${c}:`,m)}},l=async(c,h)=>{if(!(!e||!window.confirm(`Are you sure you want to delete the appointment for "${h}"?`)))try{await Ch(lt(e,`${Y}/appointments`,c)),console.log(`Appointment ${c} deleted.`)}catch(p){console.error(`Error deleting appointment ${c}:`,p)}};return s?u.jsxs("div",{className:"p-8 text-center text-gray-500 flex items-center justify-center h-full",children:[u.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-blue-500",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[u.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),u.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Loading appointments..."]}):u.jsxs("div",{className:"p-8 bg-indigo-50 rounded-lg shadow-md border border-indigo-200 h-full overflow-auto",children:[u.jsx("h3",{className:"text-2xl font-semibold text-indigo-800 mb-4",children:"Appointments Management"}),u.jsx("p",{className:"text-gray-600 mb-4 text-sm",children:"All appointment times are in CST (Central Standard Time)."}),n.length===0?u.jsx("p",{className:"text-gray-500",children:"No appointments scheduled yet."}):u.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden border border-gray-200",children:u.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[u.jsx("thead",{className:"bg-gray-50",children:u.jsxs("tr",{children:[u.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Customer"}),u.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"}),u.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Time (CST)"}),u.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Service"}),u.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),u.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Notes"}),u.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Booked By"}),u.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),u.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:n.map(c=>u.jsxs("tr",{children:[u.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:c.customerName}),u.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:u.jsx("input",{type:"date",value:c.date,onChange:h=>o(c.id,"date",h.target.value),className:"w-32 px-2 py-1 border border-gray-300 rounded-md"})}),u.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:u.jsx("input",{type:"time",value:c.time,onChange:h=>o(c.id,"time",h.target.value),className:"w-28 px-2 py-1 border border-gray-300 rounded-md"})}),u.jsx("td",{className:"px-6 py-4 text-sm text-gray-900",children:u.jsx("input",{type:"text",value:c.service,onChange:h=>o(c.id,"service",h.target.value),className:"w-32 px-2 py-1 border border-gray-300 rounded-md"})}),u.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:u.jsxs("select",{value:c.status,onChange:h=>o(c.id,"status",h.target.value),className:"px-2 py-1 border border-gray-300 rounded-md",children:[u.jsx("option",{value:"scheduled",children:"Scheduled"}),u.jsx("option",{value:"completed",children:"Completed"}),u.jsx("option",{value:"cancelled",children:"Cancelled"})]})}),u.jsx("td",{className:"px-6 py-4 text-sm text-gray-900",children:u.jsx("textarea",{value:c.notes,onChange:h=>o(c.id,"notes",h.target.value),className:"w-48 px-2 py-1 border border-gray-300 rounded-md",rows:"1"})}),u.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:c.bookedBy||"N/A"}),u.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:u.jsx("button",{onClick:()=>l(c.id,c.customerName),className:"text-red-600 hover:text-red-900",children:"Delete"})})]},c.id))})]})})]})},yC=()=>{var oi;const{currentUser:t,db:e}=L.useContext(Bn),[n,r]=L.useState([]),[s,i]=L.useState([]),[o,l]=L.useState([]),[c,h]=L.useState([]),[p,m]=L.useState([]),[g,k]=L.useState([]),[b,P]=L.useState([]),[j,S]=L.useState([]),[_,N]=L.useState(!0),[D,$]=L.useState(null),[F,w]=L.useState("employeeAccounts"),[v,x]=L.useState(""),[T,A]=L.useState(""),[C,I]=L.useState(kn.EMPLOYEE),[Qe,sn]=L.useState(20),[on,Bt]=L.useState(15),[q,X]=L.useState(""),[Z,we]=L.useState(""),[me,Se]=L.useState(""),[Ye,yt]=L.useState(""),[At,Xe]=L.useState([]),[Ns,ir]=L.useState(""),[an,_n]=L.useState(""),[ln,un]=L.useState(""),[dt,wn]=L.useState(""),[Qt,or]=L.useState(""),[ht,zn]=L.useState(""),[xn,Ct]=L.useState(""),[En,We]=L.useState(""),[Be,Lr]=L.useState(null),[ze,it]=L.useState(""),[ar,Or]=L.useState(""),[ks,Mr]=L.useState(!1),[ot,As]=L.useState(null),[lr,M]=L.useState(""),[Q,le]=L.useState(""),[he,Je]=L.useState(""),[Le,cn]=L.useState(""),[Pt,xe]=L.useState(""),[ke,Ze]=L.useState(""),[Oe,Pe]=L.useState(""),[et,tt]=L.useState(""),[Ae,zt]=L.useState(.05),[qt,qn]=L.useState(""),[ao,Tn]=L.useState(""),[Yt,lo]=L.useState(null);L.useEffect(()=>{if(!e)return;const E=mt(ae(e,`${Y}/users`),ee=>{const fe=ee.docs.map(te=>({id:te.id,...te.data()}));r(fe.filter(te=>te.role===kn.EMPLOYEE)),N(!1)},ee=>{console.error("Error fetching users:",ee),N(!1)}),H=mt(ae(e,`${Y}/clockEvents`),ee=>{const fe=ee.docs.map(te=>({id:te.id,...te.data()}));i(fe)},ee=>{console.error("Error fetching clock events for admin:",ee)}),ne=mt(ae(e,`${Y}/posSales`),ee=>{const fe=ee.docs.map(te=>({id:te.id,...te.data()}));l(fe)},ee=>{console.error("Error fetching sales for admin:",ee)}),Ee=mt(ae(e,`${Y}/posProducts`),ee=>{const fe=ee.docs.map(te=>({id:te.id,...te.data()}));h(fe)},ee=>{console.error("Error fetching products for admin:",ee)}),ge=mt(ae(e,`${Y}/events`),ee=>{const fe=ee.docs.map(te=>({id:te.id,...te.data()}));m(fe.sort((te,vt)=>new Date(vt.date)-new Date(te.date)))},ee=>{console.error("Error fetching events for admin:",ee)}),In=mt(ae(e,`${Y}/timeOffRequests`),ee=>{const fe=ee.docs.map(te=>({id:te.id,...te.data()}));k(fe.sort((te,vt)=>new Date(vt.requestedAt)-new Date(te.requestedAt)))},ee=>{console.error("Error fetching time off requests for admin:",ee)}),Kn=mt(ae(e,`${Y}/shifts`),ee=>{const fe=ee.docs.map(te=>({id:te.id,...te.data()}));P(fe.sort((te,vt)=>new Date(vt.startTime)-new Date(te.startTime)))},ee=>{console.error("Error fetching shifts for admin:",ee)}),Ur=mt(ae(e,`${Y}/customerLoyaltyAccounts`),ee=>{const fe=ee.docs.map(te=>({id:te.id,...te.data()}));S(fe)},ee=>{console.error("Error fetching loyalty customers for admin:",ee)});return()=>{E(),H(),ne(),Ee(),ge(),In(),Kn(),Ur()}},[e]);const Ec=async E=>{if(E.preventDefault(),X(""),!e||!v.trim()||!T.trim()||Qe<=0||on<0){X("Please fill in all fields correctly.");return}try{const H=ae(e,`${Y}/users`),ne=rs(H,yr("username","==",v));if(!(await vr(ne)).empty){X("Username already exists. Please choose a different one.");return}const ge=await _r(H,{username:v,password:T,role:C,hourlyRate:parseFloat(Qe),leaveBalance:parseInt(on)});X(`Account for ${v} created successfully! User ID: ${ge.id}`),x(""),A(""),I(kn.EMPLOYEE),sn(20),Bt(15)}catch(H){console.error("Error creating account:",H),X("Failed to create account. Please try again.")}},ni=async E=>{if(E.preventDefault(),ir(""),!e||!t||!Z.trim()||!me.trim()||!Ye){ir("Please fill in all event fields.");return}try{const H={title:Z.trim(),description:me.trim(),date:Ye,invitedEmployeeIds:At,createdBy:t.id,createdByName:t.username,timestamp:new Date().toISOString()};await _r(ae(e,`${Y}/events`),H),ir("Event created successfully!"),we(""),Se(""),yt(""),Xe([])}catch(H){console.error("Error creating event:",H),ir("Failed to create event. Please try again.")}},uo=async(E,H)=>{if(!(!e||!t))try{const ne=lt(e,`${Y}/timeOffRequests`,E),Ee=await ss(ne);if(Ee.exists()){const ge=Ee.data(),In=ge.employeeId,Kn=lt(e,`${Y}/users`,In),Ur=await ss(Kn);if(H==="approved"&&Ur.exists()){const ee=Ur.data(),fe=aC(ge.startDate,ge.endDate),te=(ee.leaveBalance||0)-fe;await Zr(Kn,{leaveBalance:te}),console.log(`Employee ${ee.username}'s leave balance updated to ${te}`)}await Zr(ne,{status:H,reviewedBy:t.id,reviewedByName:t.username,reviewedAt:new Date().toISOString()}),console.log(`Request ${E} ${H} by ${t.username}`)}else console.warn(`Time off request ${E} not found.`)}catch(ne){console.error(`Error updating time off request ${E}:`,ne)}},co=async E=>{if(E.preventDefault(),We(""),!e||!an.trim()||isNaN(parseFloat(ln))||isNaN(parseFloat(dt))||isNaN(parseInt(Qt))||!ht.trim()||isNaN(parseInt(xn))){We("Please fill in all product fields correctly, including SKU, Cost Price, and Low Stock Threshold.");return}try{if(Be){if(ht.trim()!==Be.sku){const ne=ae(e,`${Y}/posProducts`),Ee=rs(ne,yr("sku","==",ht.trim())),ge=await vr(Ee);if(!ge.empty&&ge.docs[0].id!==Be.id){We("SKU already exists for another product. Please use a unique SKU.");return}}}else{const ne=ae(e,`${Y}/posProducts`),Ee=rs(ne,yr("sku","==",ht.trim()));if(!(await vr(Ee)).empty){We("SKU already exists. Please use a unique SKU.");return}}const H={timestamp:new Date().toISOString(),type:Be?"updated":"initial",quantityChange:Be?parseInt(Qt)-Be.stock:parseInt(Qt),newStock:parseInt(Qt),by:t.username};if(Be){const ne=lt(e,`${Y}/posProducts`,Be.id),In=[...(await ss(ne)).data().stockHistory||[],H];await Zr(ne,{name:an.trim(),price:parseFloat(ln),costPrice:parseFloat(dt),stock:parseInt(Qt),sku:ht.trim(),lowStockThreshold:parseInt(xn),stockHistory:In}),We(`Product "${an}" updated successfully!`),Lr(null)}else await _r(ae(e,`${Y}/posProducts`),{name:an.trim(),price:parseFloat(ln),costPrice:parseFloat(dt),stock:parseInt(Qt),sku:ht.trim(),lowStockThreshold:parseInt(xn),stockHistory:[H]}),We(`Product "${an}" added successfully!`);_n(""),un(""),wn(""),or(""),zn(""),Ct("")}catch(H){console.error("Error adding/updating product:",H),We("Failed to save product. Please try again.")}},ri=E=>{Lr(E),_n(E.name),un(E.price),wn(E.costPrice||""),or(E.stock),zn(E.sku),Ct(E.lowStockThreshold||""),We("")},Hn=async(E,H)=>{if(!(!e||!window.confirm(`Are you sure you want to delete "${H}"?`)))try{await Ch(lt(e,`${Y}/posProducts`,E)),We(`Product "${H}" deleted successfully!`)}catch(ne){console.error("Error deleting product:",ne),We("Failed to delete product. Please try again.")}},Ha=E=>{As(E),un(E.price),Mr(!0),Or(""),We("")},Wa=async E=>{if(E.preventDefault(),!(!e||!t||!ot)){if(ar!==t.password){We("Incorrect password. Price change denied.");return}try{const H=lt(e,`${Y}/posProducts`,ot.id),ge=[...(await ss(H)).data().stockHistory||[],{timestamp:new Date().toISOString(),type:"price_change",oldPrice:ot.price,newPrice:parseFloat(ln),by:t.username}];await Zr(H,{price:parseFloat(ln),stockHistory:ge}),We(`Price for "${ot.name}" updated successfully!`),Mr(!1),As(null),un(""),Or("")}catch(H){console.error("Error changing product price:",H),We("Failed to change price. Please try again.")}}},ho=async E=>{if(E.preventDefault(),xe(""),!e||!lr||!Q||!he){xe("Please fill in all shift fields.");return}if(new Date(Q)>=new Date(he)){xe("Shift end time must be after start time.");return}try{const H=n.find(Ee=>Ee.id===lr);if(!H){xe("Selected employee not found.");return}const ne={employeeId:lr,employeeName:H.username,startTime:Q,endTime:he,description:Le.trim(),assignedBy:t.id,assignedByName:t.username,assignedAt:new Date().toISOString()};await _r(ae(e,`${Y}/shifts`),ne),xe("Shift added successfully!"),M(""),le(""),Je(""),cn("")}catch(H){console.error("Error adding shift:",H),xe("Failed to add shift. Please try again.")}},fo=async E=>{if(E.preventDefault(),Tn(""),!e||!ke.trim()||!Oe.trim()||!et.trim()||isNaN(parseFloat(Ae))){Tn("Please fill in all customer fields correctly.");return}try{const H=ae(e,`${Y}/customerLoyaltyAccounts`),ne=rs(H,yr("phoneNumber","==",et.trim())),Ee=await vr(ne);if(!Ee.empty&&(!Yt||Ee.docs[0].id!==Yt.id)){Tn("A loyalty account with this phone number already exists.");return}if(Yt){const ge=lt(e,`${Y}/customerLoyaltyAccounts`,Yt.id);await Zr(ge,{firstName:ke.trim(),lastName:Oe.trim(),phoneNumber:et.trim(),discountRate:parseFloat(Ae),notes:qt.trim()}),Tn(`Customer "${ke} ${Oe}" updated successfully!`),lo(null)}else{const ge=`CUST-${crypto.randomUUID().substring(0,8).toUpperCase()}`;await ki(lt(H,ge),{loyaltyId:ge,firstName:ke.trim(),lastName:Oe.trim(),phoneNumber:et.trim(),discountRate:parseFloat(Ae),notes:qt.trim(),signedUpAt:new Date().toISOString()}),Tn(`Customer "${ke} ${Oe}" added successfully!`)}Ze(""),Pe(""),tt(""),zt(.05),qn("")}catch(H){console.error("Error saving customer:",H),Tn("Failed to save customer. Please try again.")}},Ka=E=>{lo(E),Ze(E.firstName),Pe(E.lastName),tt(E.phoneNumber),zt(E.discountRate),qn(E.notes||""),Tn("")},Ga=async(E,H)=>{if(!(!e||!window.confirm(`Are you sure you want to delete customer "${H}"?`)))try{await Ch(lt(e,`${Y}/customerLoyaltyAccounts`,E)),Tn(`Customer "${H}" deleted successfully!`)}catch(ne){console.error("Error deleting customer:",ne),Tn("Failed to delete customer. Please try again.")}},Qa=c.filter(E=>E.stock<=0),Cs=c.filter(E=>E.stock>0&&E.stock<=(E.lowStockThreshold||0)),po=(E,H)=>{const ne=H.filter(te=>te.userId===E).sort((te,vt)=>new Date(te.timestamp)-new Date(vt.timestamp));let Ee=0,ge=null;const In=new Date,Kn=In.getDay(),Ur=Kn===0?6:Kn-1,ee=new Date(In);ee.setDate(In.getDate()-Ur),ee.setHours(0,0,0,0);const fe=new Date(ee);if(fe.setDate(ee.getDate()+7),fe.setMilliseconds(fe.getMilliseconds()-1),ne.forEach(te=>{const vt=new Date(te.timestamp);if(vt>=ee&&vt<=fe){if(te.type==="in")ge=vt;else if(te.type==="out"&&ge){const Ja=vt.getTime()-ge.getTime();Ee+=Ja/(1e3*60*60),ge=null}}}),ge&&ge>=ee&&ge<=fe){const te=fe.getTime()-ge.getTime();Ee+=te/(1e3*60*60)}return Ee},si=(E,H)=>H.filter(ne=>ne.salespersonId===E).length,Fr=(E,H)=>H.filter(ne=>ne.salespersonId===E).reduce((ne,Ee)=>ne+Ee.total,0),Wn=(E,H)=>H.filter(ne=>ne.salespersonId===E).reduce((ne,Ee)=>ne+(Ee.grossProfit||0),0);if((t==null?void 0:t.role)!==kn.ADMIN)return u.jsx("div",{className:"p-8 text-center text-red-500 font-semibold",children:"Access Denied: You must be an administrator to view this page."});if(_)return u.jsxs("div",{className:"p-8 text-center text-gray-500 flex items-center justify-center h-full",children:[u.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-blue-500",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[u.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),u.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Loading admin data..."]});const ii=o.reduce((E,H)=>E+H.total,0),Tc=o.reduce((E,H)=>{const ne=H.items.reduce((Ee,ge)=>Ee+ge.price*ge.quantity,0);return E+ne*(H.discountPercentage/100||0)},0),Ya=o.length>0?ii/o.length:0,Xa=o.reduce((E,H)=>E+(H.grossProfit||0),0),mo=c.filter(E=>E.name.toLowerCase().includes(ze.toLowerCase())||E.sku.toLowerCase().includes(ze.toLowerCase()));return u.jsxs("div",{className:"p-8 flex flex-col h-full",children:[u.jsx("h2",{className:"text-3xl font-bold text-gray-800 mb-6",children:"Admin Panel"}),u.jsx("div",{className:"mb-6 border-b border-gray-200",children:u.jsx("nav",{className:"-mb-px flex space-x-8","aria-label":"Tabs",children:[{id:"employeeAccounts",name:"Employee Accounts"},{id:"customerAccounts",name:"Customer Accounts"},{id:"productManagement",name:"Product Management"},{id:"shiftManagement",name:"Shift Management"},{id:"eventsManagement",name:"Events Management"},{id:"timeOffRequests",name:"Time Off Requests"},{id:"salesHistory",name:"Sales History"},{id:"clockLogs",name:"Clock Logs"},{id:"reports",name:"Reports"}].map(E=>u.jsx("button",{onClick:()=>w(E.id),className:`whitespace-nowrap py-3 px-1 border-b-2 font-medium text-sm transition duration-150 ${F===E.id?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:E.name},E.id))})}),u.jsxs("div",{className:"flex-grow overflow-y-auto",children:[F==="employeeAccounts"&&u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[u.jsxs("div",{className:"p-6 bg-blue-50 rounded-lg shadow-md border border-blue-200",children:[u.jsx("h3",{className:"text-2xl font-semibold text-blue-800 mb-4",children:"Create Account"}),u.jsxs("form",{onSubmit:Ec,className:"space-y-4",children:[u.jsxs("div",{children:[u.jsx("label",{htmlFor:"newUsername",className:"block text-sm font-medium text-gray-700 mb-1",children:"Username"}),u.jsx("input",{type:"text",id:"newUsername",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-1 focus:ring-blue-500",value:v,onChange:E=>x(E.target.value),required:!0})]}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"newPassword",className:"block text-sm font-medium text-gray-700 mb-1",children:"Password"}),u.jsx("input",{type:"password",id:"newPassword",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-1 focus:ring-blue-500",value:T,onChange:E=>A(E.target.value),required:!0})]}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"newHourlyRate",className:"block text-sm font-medium text-gray-700 mb-1",children:"Hourly Rate ($)"}),u.jsx("input",{type:"number",id:"newHourlyRate",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-1 focus:ring-blue-500",value:Qe,onChange:E=>sn(E.target.value),min:"0",step:"0.01",required:!0})]}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"newLeaveBalance",className:"block text-sm font-medium text-gray-700 mb-1",children:"Initial Leave Balance (Days)"}),u.jsx("input",{type:"number",id:"newLeaveBalance",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-1 focus:ring-blue-500",value:on,onChange:E=>Bt(E.target.value),min:"0",step:"1",required:!0})]}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"newUserRole",className:"block text-sm font-medium text-gray-700 mb-1",children:"Role"}),u.jsxs("select",{id:"newUserRole",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-1 focus:ring-blue-500",value:C,onChange:E=>I(E.target.value),children:[u.jsx("option",{value:kn.EMPLOYEE,children:"Employee"}),u.jsx("option",{value:kn.ADMIN,children:"Admin"})]})]}),u.jsx("button",{type:"submit",className:"w-full bg-blue-600 text-white py-2 px-4 rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 font-semibold",children:"Create Account"}),q&&u.jsx("p",{className:`text-sm text-center ${q.includes("successfully")?"text-green-600":"text-red-500"} mt-2`,children:q})]})]}),u.jsxs("div",{className:"p-6 bg-white rounded-lg shadow-md border border-gray-200",children:[u.jsx("h3",{className:"text-2xl font-semibold text-gray-800 mb-4",children:"All Employees"}),n.length===0?u.jsx("p",{className:"text-gray-500",children:"No employees found."}):u.jsx("ul",{className:"space-y-2 max-h-60 overflow-y-auto pr-2 mb-4",children:n.map(E=>u.jsx("li",{children:u.jsxs("button",{onClick:()=>$(E),className:`w-full text-left p-3 rounded-md transition duration-150 flex items-center justify-between ${(D==null?void 0:D.id)===E.id?"bg-blue-100 text-blue-800 font-semibold":"bg-gray-50 hover:bg-gray-100 text-gray-800"}`,children:[u.jsxs("span",{children:[E.username," (",E.role,")"]}),u.jsx("svg",{className:"w-4 h-4 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 5l7 7-7 7"})})]})},E.id))}),u.jsx("h4",{className:"text-xl font-bold text-gray-800 mb-4",children:"Selected Employee Profile"}),D?u.jsxs("div",{className:"space-y-2 text-md text-gray-700",children:[u.jsxs("p",{children:[u.jsx("span",{className:"font-semibold",children:"Username:"})," ",D.username]}),u.jsxs("p",{children:[u.jsx("span",{className:"font-semibold",children:"User ID:"})," ",D.id]}),u.jsxs("p",{children:[u.jsx("span",{className:"font-semibold",children:"Role:"})," ",D.role]}),u.jsxs("p",{children:[u.jsx("span",{className:"font-semibold",children:"Hourly Rate:"})," $",((oi=D.hourlyRate)==null?void 0:oi.toFixed(2))||"N/A"]}),u.jsxs("p",{children:[u.jsx("span",{className:"font-semibold",children:"Leave Balance:"})," ",D.leaveBalance," days"]}),u.jsxs("p",{children:[u.jsx("span",{className:"font-semibold",children:"Clocked-in Hours This Week:"})," ",po(D.id,s).toFixed(2)," hours"]}),u.jsxs("p",{children:[u.jsx("span",{className:"font-semibold",children:"Estimated Weekly Paycheck:"})," $",(po(D.id,s)*(D.hourlyRate||0)).toFixed(2)]}),u.jsxs("p",{children:[u.jsx("span",{className:"font-semibold",children:"Total Sales Processed:"})," ",si(D.id,o)," sales"]}),u.jsxs("p",{children:[u.jsx("span",{className:"font-semibold",children:"Total Sales Value:"})," $",Fr(D.id,o).toFixed(2)]}),u.jsxs("p",{children:[u.jsx("span",{className:"font-semibold",children:"Total Gross Profit:"})," $",Wn(D.id,o).toFixed(2)]}),u.jsx("button",{onClick:()=>$(null),className:"mt-4 bg-gray-200 text-gray-800 py-2 px-4 rounded-md hover:bg-gray-300 transition duration-200 font-semibold",children:"Clear Selection"})]}):u.jsx("p",{className:"text-gray-500 text-center",children:"Select an employee from the list above."})]})]}),F==="customerAccounts"&&u.jsxs("div",{className:"p-6 bg-yellow-50 rounded-lg shadow-md border border-yellow-200",children:[u.jsx("h3",{className:"text-2xl font-semibold text-yellow-800 mb-4",children:Yt?"Edit Customer Account":"Add New Customer Account"}),u.jsxs("form",{onSubmit:fo,className:"space-y-4 mb-6",children:[u.jsxs("div",{children:[u.jsx("label",{htmlFor:"customerFirstName",className:"block text-sm font-medium text-gray-700 mb-1",children:"First Name"}),u.jsx("input",{type:"text",id:"customerFirstName",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-1 focus:ring-yellow-500",value:ke,onChange:E=>Ze(E.target.value),required:!0})]}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"customerLastName",className:"block text-sm font-medium text-gray-700 mb-1",children:"Last Name"}),u.jsx("input",{type:"text",id:"customerLastName",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-1 focus:ring-yellow-500",value:Oe,onChange:E=>Pe(E.target.value),required:!0})]}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"customerPhoneNumber",className:"block text-sm font-medium text-gray-700 mb-1",children:"Phone Number"}),u.jsx("input",{type:"tel",id:"customerPhoneNumber",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-1 focus:ring-yellow-500",value:et,onChange:E=>tt(E.target.value),required:!0})]}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"customerDiscountRate",className:"block text-sm font-medium text-gray-700 mb-1",children:"Discount Rate (0.00 - 1.00)"}),u.jsx("input",{type:"number",id:"customerDiscountRate",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-1 focus:ring-yellow-500",value:Ae,onChange:E=>zt(Math.max(0,Math.min(1,parseFloat(E.target.value)||0))),min:"0",max:"1",step:"0.01",required:!0})]}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"customerNotes",className:"block text-sm font-medium text-gray-700 mb-1",children:"Notes (Optional)"}),u.jsx("textarea",{id:"customerNotes",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-1 focus:ring-yellow-500",value:qt,onChange:E=>qn(E.target.value),rows:"3"})]}),u.jsx("button",{type:"submit",className:"w-full bg-yellow-600 text-white py-2 px-4 rounded-md hover:bg-yellow-700 focus:outline-none focus:ring-2 focus:ring-yellow-500 focus:ring-offset-2 font-semibold",children:Yt?"Update Customer":"Add Customer"}),Yt&&u.jsx("button",{type:"button",onClick:()=>{lo(null),Ze(""),Pe(""),tt(""),zt(.05),qn(""),Tn("")},className:"w-full mt-2 bg-gray-200 text-gray-800 py-2 px-4 rounded-md hover:bg-gray-300 font-semibold",children:"Cancel Edit"}),ao&&u.jsx("p",{className:`text-sm text-center ${ao.includes("successfully")?"text-green-600":"text-red-500"} mt-2`,children:ao})]}),u.jsx("h4",{className:"text-xl font-semibold text-gray-700 mb-3",children:"All Loyalty Customers"}),j.length===0?u.jsx("p",{className:"text-gray-500",children:"No loyalty customers found."}):u.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden border border-gray-200",children:u.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[u.jsx("thead",{className:"bg-gray-50",children:u.jsxs("tr",{children:[u.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Name"}),u.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Phone"}),u.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Discount Rate"}),u.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Notes"}),u.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),u.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:j.map(E=>u.jsxs("tr",{children:[u.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:[E.firstName," ",E.lastName]}),u.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:E.phoneNumber}),u.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:[(E.discountRate*100).toFixed(0),"%"]}),u.jsx("td",{className:"px-6 py-4 text-sm text-gray-900",children:E.notes||"N/A"}),u.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:[u.jsx("button",{onClick:()=>Ka(E),className:"text-indigo-600 hover:text-indigo-900 mr-3",children:"Edit"}),u.jsx("button",{onClick:()=>Ga(E.id,`${E.firstName} ${E.lastName}`),className:"text-red-600 hover:text-red-900",children:"Delete"})]})]},E.id))})]})})]}),F==="productManagement"&&u.jsxs("div",{className:"p-6 bg-purple-50 rounded-lg shadow-md border border-purple-200",children:[u.jsx("h3",{className:"text-2xl font-semibold text-purple-800 mb-4",children:Be?"Edit Product":"Add New Product"}),u.jsxs("form",{onSubmit:co,className:"space-y-4 mb-6",children:[u.jsxs("div",{children:[u.jsx("label",{htmlFor:"productName",className:"block text-sm font-medium text-gray-700 mb-1",children:"Product Name"}),u.jsx("input",{type:"text",id:"productName",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-1 focus:ring-purple-500",value:an,onChange:E=>_n(E.target.value),required:!0})]}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"productSku",className:"block text-sm font-medium text-gray-700 mb-1",children:"SKU"}),u.jsx("input",{type:"text",id:"productSku",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-1 focus:ring-purple-500",value:ht,onChange:E=>zn(E.target.value),required:!0})]}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"productPrice",className:"block text-sm font-medium text-gray-700 mb-1",children:"Price ($)"}),u.jsx("input",{type:"number",id:"productPrice",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-1 focus:ring-purple-500",value:ln,onChange:E=>un(E.target.value),min:"0",step:"0.01",required:!0})]}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"productCostPrice",className:"block text-sm font-medium text-gray-700 mb-1",children:"Cost Price ($)"}),u.jsx("input",{type:"number",id:"productCostPrice",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-1 focus:ring-purple-500",value:dt,onChange:E=>wn(E.target.value),min:"0",step:"0.01",required:!0})]}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"productStock",className:"block text-sm font-medium text-gray-700 mb-1",children:"Stock"}),u.jsx("input",{type:"number",id:"productStock",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-1 focus:ring-purple-500",value:Qt,onChange:E=>or(E.target.value),min:"0",step:"1",required:!0})]}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"lowStockThreshold",className:"block text-sm font-medium text-gray-700 mb-1",children:"Low Stock Threshold"}),u.jsx("input",{type:"number",id:"lowStockThreshold",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-1 focus:ring-purple-500",value:xn,onChange:E=>Ct(E.target.value),min:"0",step:"1",required:!0})]}),u.jsx("button",{type:"submit",className:"w-full bg-purple-600 text-white py-2 px-4 rounded-md hover:bg-purple-700 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:ring-offset-2 font-semibold",children:Be?"Update Product":"Add Product"}),Be&&u.jsx("button",{type:"button",onClick:()=>{Lr(null),_n(""),un(""),wn(""),or(""),zn(""),Ct(""),We("")},className:"w-full mt-2 bg-gray-200 text-gray-800 py-2 px-4 rounded-md hover:bg-gray-300 font-semibold",children:"Cancel Edit"}),En&&u.jsx("p",{className:`text-sm text-center ${En.includes("successfully")?"text-green-600":"text-red-500"} mt-2`,children:En})]}),u.jsx("h4",{className:"text-xl font-semibold text-gray-700 mb-3",children:"All Products"}),u.jsx("div",{className:"mb-4",children:u.jsx("input",{type:"text",placeholder:"Search products by name or SKU...",className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-purple-500 focus:border-transparent transition duration-200",value:ze,onChange:E=>it(E.target.value)})}),mo.length===0?u.jsx("p",{className:"text-gray-500",children:"No products found."}):u.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden border border-gray-200",children:u.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[u.jsx("thead",{className:"bg-gray-50",children:u.jsxs("tr",{children:[u.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Name"}),u.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"SKU"}),u.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Price"}),u.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Cost Price"}),u.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Stock"}),u.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Low Stock Threshold"}),u.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),u.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:mo.map(E=>{var H;return u.jsxs("tr",{children:[u.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:E.name}),u.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:E.sku}),u.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:["$",E.price.toFixed(2)]}),u.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:["$",((H=E.costPrice)==null?void 0:H.toFixed(2))||"N/A"]}),u.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:E.stock}),u.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:E.lowStockThreshold||"N/A"}),u.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:[u.jsx("button",{onClick:()=>ri(E),className:"text-indigo-600 hover:text-indigo-900 mr-3",children:"Edit All"}),u.jsx("button",{onClick:()=>Ha(E),className:"text-blue-600 hover:text-blue-900 mr-3",children:"Change Price"}),u.jsx("button",{onClick:()=>Hn(E.id,E.name),className:"text-red-600 hover:text-red-900",children:"Delete"})]})]},E.id)})})]})}),ks&&u.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-75 flex items-center justify-center z-50",children:u.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-xl w-full max-w-sm",children:[u.jsx("h3",{className:"text-xl font-bold text-gray-800 mb-4",children:"Confirm Price Change"}),u.jsxs("p",{className:"text-gray-700 mb-4",children:['Enter admin password to change price for "',ot==null?void 0:ot.name,'" to $',parseFloat(ln).toFixed(2),":"]}),u.jsxs("form",{onSubmit:Wa,className:"space-y-4",children:[u.jsxs("div",{children:[u.jsx("label",{htmlFor:"priceChangePassword",className:"sr-only",children:"Admin Password"}),u.jsx("input",{type:"password",id:"priceChangePassword",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-1 focus:ring-blue-500",value:ar,onChange:E=>Or(E.target.value),placeholder:"Admin Password",required:!0})]}),En&&u.jsx("p",{className:`text-sm text-center ${En.includes("successfully")?"text-green-600":"text-red-500"} mt-2`,children:En}),u.jsxs("div",{className:"flex justify-end space-x-3",children:[u.jsx("button",{type:"button",onClick:()=>Mr(!1),className:"bg-gray-300 text-gray-800 py-2 px-4 rounded-md hover:bg-gray-400 font-semibold",children:"Cancel"}),u.jsx("button",{type:"submit",className:"bg-blue-600 text-white py-2 px-4 rounded-md hover:bg-blue-700 font-semibold",children:"Confirm Change"})]})]})]})}),Be&&u.jsxs("div",{className:"mt-8 p-6 bg-gray-50 rounded-lg shadow-md border border-gray-200",children:[u.jsxs("h4",{className:"text-xl font-semibold text-gray-800 mb-4",children:["Stock History for ",Be.name]}),Be.stockHistory&&Be.stockHistory.length>0?u.jsx("div",{className:"max-h-60 overflow-y-auto",children:u.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[u.jsx("thead",{className:"bg-gray-100",children:u.jsxs("tr",{children:[u.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Timestamp"}),u.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Type"}),u.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Change"}),u.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"New Stock"}),u.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"By"})]})}),u.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:Be.stockHistory.sort((E,H)=>new Date(H.timestamp)-new Date(E.timestamp)).map((E,H)=>u.jsxs("tr",{children:[u.jsx("td",{className:"px-4 py-2 whitespace-nowrap text-sm text-gray-900",children:new Date(E.timestamp).toLocaleString()}),u.jsx("td",{className:"px-4 py-2 whitespace-nowrap text-sm text-gray-900",children:E.type}),u.jsx("td",{className:"px-4 py-2 whitespace-nowrap text-sm text-gray-900",children:E.quantityChange!==void 0?E.quantityChange:E.newPrice?`Price: $${E.oldPrice} -> $${E.newPrice}`:"N/A"}),u.jsx("td",{className:"px-4 py-2 whitespace-nowrap text-sm text-gray-900",children:E.newStock!==void 0?E.newStock:"N/A"}),u.jsx("td",{className:"px-4 py-2 whitespace-nowrap text-sm text-gray-900",children:E.by||"System"})]},H))})]})}):u.jsx("p",{className:"text-gray-500",children:"No stock history available for this product."})]})]}),F==="shiftManagement"&&u.jsxs("div",{className:"p-6 bg-orange-50 rounded-lg shadow-md border border-orange-200",children:[u.jsx("h3",{className:"text-2xl font-semibold text-orange-800 mb-4",children:"Shift Management"}),u.jsxs("form",{onSubmit:ho,className:"space-y-4 mb-6",children:[u.jsxs("div",{children:[u.jsx("label",{htmlFor:"shiftEmployee",className:"block text-sm font-medium text-gray-700 mb-1",children:"Assign to Employee"}),u.jsxs("select",{id:"shiftEmployee",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-1 focus:ring-orange-500",value:lr,onChange:E=>M(E.target.value),required:!0,children:[u.jsx("option",{value:"",children:"Select Employee"}),n.map(E=>u.jsx("option",{value:E.id,children:E.username},E.id))]})]}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"shiftStartTime",className:"block text-sm font-medium text-gray-700 mb-1",children:"Start Time"}),u.jsx("input",{type:"datetime-local",id:"shiftStartTime",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-1 focus:ring-orange-500",value:Q,onChange:E=>le(E.target.value),required:!0})]}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"shiftEndTime",className:"block text-sm font-medium text-gray-700 mb-1",children:"End Time"}),u.jsx("input",{type:"datetime-local",id:"shiftEndTime",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-1 focus:ring-orange-500",value:he,onChange:E=>Je(E.target.value),required:!0})]}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"shiftDescription",className:"block text-sm font-medium text-gray-700 mb-1",children:"Description (Optional)"}),u.jsx("input",{type:"text",id:"shiftDescription",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-1 focus:ring-orange-500",value:Le,onChange:E=>cn(E.target.value)})]}),u.jsx("button",{type:"submit",className:"w-full bg-orange-600 text-white py-2 px-4 rounded-md hover:bg-orange-700 focus:outline-none focus:ring-2 focus:ring-orange-500 focus:ring-offset-2 font-semibold",children:"Add Shift"}),Pt&&u.jsx("p",{className:`text-sm text-center ${Pt.includes("successfully")?"text-green-600":"text-red-500"} mt-2`,children:Pt})]}),u.jsx("h4",{className:"text-xl font-semibold text-gray-700 mb-3",children:"All Shifts"}),b.length===0?u.jsx("p",{className:"text-gray-500",children:"No shifts created yet."}):u.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden border border-gray-200",children:u.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[u.jsx("thead",{className:"bg-gray-50",children:u.jsxs("tr",{children:[u.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Employee"}),u.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Start Time"}),u.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"End Time"}),u.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Description"})]})}),u.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:b.map(E=>u.jsxs("tr",{children:[u.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:E.employeeName}),u.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:new Date(E.startTime).toLocaleString()}),u.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:new Date(E.endTime).toLocaleString()}),u.jsx("td",{className:"px-6 py-4 text-sm text-gray-900",children:E.description||"N/A"})]},E.id))})]})})]}),F==="eventsManagement"&&u.jsxs("div",{className:"p-6 bg-green-50 rounded-lg shadow-md border border-green-200",children:[u.jsx("h3",{className:"text-2xl font-semibold text-green-800 mb-4",children:"Events Management"}),u.jsxs("form",{onSubmit:ni,className:"space-y-4 mb-6",children:[u.jsxs("div",{children:[u.jsx("label",{htmlFor:"eventTitle",className:"block text-sm font-medium text-gray-700 mb-1",children:"Event Title"}),u.jsx("input",{type:"text",id:"eventTitle",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-1 focus:ring-green-500",value:Z,onChange:E=>we(E.target.value),required:!0})]}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"eventDescription",className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),u.jsx("textarea",{id:"eventDescription",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-1 focus:ring-green-500",value:me,onChange:E=>Se(E.target.value),rows:"3",required:!0})]}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"eventDate",className:"block text-sm font-medium text-gray-700 mb-1",children:"Date & Time"}),u.jsx("input",{type:"datetime-local",id:"eventDate",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-1 focus:ring-green-500",value:Ye,onChange:E=>yt(E.target.value),required:!0})]}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"invitedEmployees",className:"block text-sm font-medium text-gray-700 mb-1",children:"Invite Employees"}),u.jsx("select",{id:"invitedEmployees",multiple:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-1 focus:ring-green-500 h-32",value:At,onChange:E=>Xe(Array.from(E.target.selectedOptions,H=>H.value)),children:n.map(E=>u.jsxs("option",{value:E.id,children:[E.username," (",E.role,")"]},E.id))}),u.jsx("button",{type:"button",onClick:()=>Xe(n.map(E=>E.id)),className:"mt-2 w-full bg-gray-200 text-gray-800 py-2 px-4 rounded-md hover:bg-gray-300 font-semibold",children:"Select All Employees"})]}),u.jsx("button",{type:"submit",className:"w-full bg-green-600 text-white py-2 px-4 rounded-md hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-offset-2 font-semibold",children:"Add Event"}),Ns&&u.jsx("p",{className:`text-sm text-center ${Ns.includes("successfully")?"text-green-600":"text-red-500"} mt-2`,children:Ns})]}),u.jsx("h4",{className:"text-xl font-semibold text-gray-700 mb-3",children:"All Events"}),p.length===0?u.jsx("p",{className:"text-gray-500",children:"No events created yet."}):u.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden border border-gray-200",children:u.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[u.jsx("thead",{className:"bg-gray-50",children:u.jsxs("tr",{children:[u.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Title"}),u.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"}),u.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Invited"}),u.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Created By"})]})}),u.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:p.map(E=>u.jsxs("tr",{children:[u.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:E.title}),u.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:new Date(E.date).toLocaleString()}),u.jsx("td",{className:"px-6 py-4 text-sm text-gray-900",children:E.invitedEmployeeIds&&E.invitedEmployeeIds.length>0?E.invitedEmployeeIds.map(H=>{var ne;return((ne=n.find(Ee=>Ee.id===H))==null?void 0:ne.username)||H.substring(0,5)}).join(", "):"None"}),u.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:E.createdByName||"N/A"})]},E.id))})]})})]}),F==="timeOffRequests"&&u.jsxs("div",{className:"p-6 bg-yellow-50 rounded-lg shadow-md border border-yellow-200",children:[u.jsx("h3",{className:"text-2xl font-semibold text-yellow-800 mb-4",children:"Time Off Requests"}),g.length===0?u.jsx("p",{className:"text-gray-500",children:"No time off requests."}):u.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden border border-gray-200",children:u.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[u.jsx("thead",{className:"bg-gray-50",children:u.jsxs("tr",{children:[u.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Employee"}),u.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Dates"}),u.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Reason"}),u.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),u.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),u.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:g.map(E=>u.jsxs("tr",{children:[u.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:E.employeeName}),u.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:[new Date(E.startDate).toLocaleDateString()," - ",new Date(E.endDate).toLocaleDateString()]}),u.jsx("td",{className:"px-6 py-4 text-sm text-gray-900",children:E.reason}),u.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:u.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${E.status==="approved"?"bg-green-100 text-green-800":E.status==="denied"?"bg-red-100 text-red-800":"bg-yellow-100 text-yellow-800"}`,children:E.status})}),u.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:E.status==="pending"?u.jsxs(u.Fragment,{children:[u.jsx("button",{onClick:()=>uo(E.id,"approved"),className:"text-green-600 hover:text-green-900 mr-3",children:"Accept"}),u.jsx("button",{onClick:()=>uo(E.id,"denied"),className:"text-red-600 hover:text-red-900",children:"Deny"})]}):u.jsx("span",{className:"text-gray-500",children:"Reviewed"})})]},E.id))})]})})]}),F==="salesHistory"&&u.jsxs("div",{className:"p-6 bg-white rounded-lg shadow-md border border-gray-200",children:[u.jsx("h3",{className:"text-2xl font-semibold text-gray-700 mb-4",children:"Sales History"}),o.length===0?u.jsx("p",{className:"text-gray-500",children:"No sales recorded yet."}):u.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden border border-gray-200",children:u.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[u.jsx("thead",{className:"bg-gray-50",children:u.jsxs("tr",{children:[u.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Sale ID"}),u.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Salesperson"}),u.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Items"}),u.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Total"}),u.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Gross Profit"}),u.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Payment Method"}),u.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Discount"}),u.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Loyalty Customer"}),u.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Timestamp"})]})}),u.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:o.map(E=>{var H;return u.jsxs("tr",{children:[u.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:["#",E.id]}),u.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:E.salespersonName||"N/A"}),u.jsx("td",{className:"px-6 py-4 text-sm text-gray-900",children:E.items.map(ne=>`${ne.name} (x${ne.quantity})`).join(", ")}),u.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:["$",E.total.toFixed(2)]}),u.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:["$",((H=E.grossProfit)==null?void 0:H.toFixed(2))||"N/A"]}),u.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:E.paymentMethod||"N/A"}),u.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:E.discountPercentage?`${E.discountPercentage}%`:"0%"}),u.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:E.loyaltyCustomerName||"N/A"}),u.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:new Date(E.timestamp).toLocaleString()})]},E.id)})})]})})]}),F==="clockLogs"&&u.jsxs("div",{className:"p-6 bg-white rounded-lg shadow-md border border-gray-200",children:[u.jsx("h3",{className:"text-2xl font-semibold text-gray-700 mb-4",children:"All Employee Clock-in/out Logs"}),s.length===0?u.jsx("p",{className:"text-gray-500",children:"No clock events recorded."}):u.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden border border-gray-200",children:u.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[u.jsx("thead",{className:"bg-gray-50",children:u.jsxs("tr",{children:[u.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Employee"}),u.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Type"}),u.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Timestamp"})]})}),u.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:s.sort((E,H)=>new Date(H.timestamp)-new Date(E.timestamp)).map(E=>u.jsxs("tr",{children:[u.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:E.username}),u.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:u.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${E.type==="in"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:E.type==="in"?"Clock In":"Clock Out"})}),u.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:new Date(E.timestamp).toLocaleString()})]},E.id))})]})})]}),F==="reports"&&u.jsxs("div",{className:"p-6 bg-blue-50 rounded-lg shadow-md border border-blue-200",children:[u.jsx("h3",{className:"text-2xl font-semibold text-blue-800 mb-4",children:"Sales Reports"}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 text-center",children:[u.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-sm border border-gray-200",children:[u.jsx("p",{className:"text-sm text-gray-500",children:"Total Sales Value"}),u.jsxs("p",{className:"text-2xl font-bold text-blue-600",children:["$",ii.toFixed(2)]})]}),u.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-sm border border-gray-200",children:[u.jsx("p",{className:"text-sm text-gray-500",children:"Total Discounts Given"}),u.jsxs("p",{className:"text-2xl font-bold text-red-600",children:["$",Tc.toFixed(2)]})]}),u.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-sm border border-gray-200",children:[u.jsx("p",{className:"text-sm text-gray-500",children:"Average Sale Value"}),u.jsxs("p",{className:"text-2xl font-bold text-green-600",children:["$",Ya.toFixed(2)]})]}),u.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-sm border border-gray-200",children:[u.jsx("p",{className:"text-sm text-gray-500",children:"Total Gross Profit"}),u.jsxs("p",{className:"text-2xl font-bold text-purple-600",children:["$",Xa.toFixed(2)]})]})]}),u.jsx("h4",{className:"text-xl font-semibold text-gray-700 mt-8 mb-3",children:"Employee Sales Performance"}),n.length===0?u.jsx("p",{className:"text-gray-500",children:"No employees to display performance for."}):u.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden border border-gray-200",children:u.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[u.jsx("thead",{className:"bg-gray-50",children:u.jsxs("tr",{children:[u.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Employee"}),u.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Total Sales"}),u.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Total Sales Value"}),u.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Total Gross Profit"})]})}),u.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:n.map(E=>u.jsxs("tr",{children:[u.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:E.username}),u.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:si(E.id,o)}),u.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:["$",Fr(E.id,o).toFixed(2)]}),u.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:["$",Wn(E.id,o).toFixed(2)]})]},E.id))})]})}),u.jsx("h4",{className:"text-xl font-semibold text-gray-700 mt-8 mb-3",children:"Low Stock Alerts"}),Cs.length===0?u.jsx("p",{className:"text-gray-500",children:"No items are currently low on stock. Good job!"}):u.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden border border-gray-200",children:u.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[u.jsx("thead",{className:"bg-gray-50",children:u.jsxs("tr",{children:[u.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Product Name"}),u.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"SKU"}),u.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Current Stock"}),u.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Threshold"})]})}),u.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:Cs.map(E=>u.jsxs("tr",{className:"bg-orange-50",children:[u.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-orange-800",children:E.name}),u.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-orange-700",children:E.sku}),u.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-orange-700",children:E.stock}),u.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-orange-700",children:E.lowStockThreshold})]},E.id))})]})}),u.jsx("h4",{className:"text-xl font-semibold text-gray-700 mt-8 mb-3",children:"Out of Stock Items"}),Qa.length===0?u.jsx("p",{className:"text-gray-500",children:"No items are currently out of stock. Great job!"}):u.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden border border-gray-200",children:u.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[u.jsx("thead",{className:"bg-gray-50",children:u.jsxs("tr",{children:[u.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Product Name"}),u.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"SKU"}),u.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Price"})]})}),u.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:Qa.map(E=>u.jsxs("tr",{className:"bg-red-50",children:[u.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-red-800",children:E.name}),u.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-red-700",children:E.sku}),u.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-red-700",children:["$",E.price.toFixed(2)]})]},E.id))})]})})]})]})]})},vC=()=>{const{currentUser:t,loading:e}=L.useContext(Bn),{currentView:n}=L.useContext(wp);return e?u.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gray-100",children:u.jsxs("div",{className:"text-blue-600 text-2xl font-semibold flex items-center",children:[u.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-8 w-8 text-blue-500",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[u.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),u.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Loading TimeFlow..."]})}):t?u.jsxs("div",{className:"flex min-h-screen bg-gray-100 font-inter",children:[u.jsx(oC,{})," ",u.jsx(dC,{})," ",u.jsx("main",{className:"flex-1 flex flex-col bg-white rounded-r-lg shadow-xl overflow-hidden",children:(()=>{switch(n){case"dashboard":return u.jsx(gy,{});case"timeclock":return u.jsx(hC,{});case"timeoff":return u.jsx(fC,{});case"chat":return u.jsx(pC,{});case"pos":return u.jsx(mC,{});case"appointmentsManagement":return u.jsx(gC,{});case"admin":return u.jsx(yC,{});default:return u.jsx(gy,{})}})()})]}):u.jsx(cC,{})},_C=()=>u.jsx(lC,{children:u.jsx(uC,{children:u.jsx(vC,{})})});hd.createRoot(document.getElementById("root")).render(u.jsx(mx.StrictMode,{children:u.jsx(_C,{})}));
